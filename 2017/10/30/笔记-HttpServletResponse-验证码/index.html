<!DOCTYPE HTML>
<html>
	<head>
		<meta charset="utf-8">
		
		<title>[笔记]-HttpServletResponse-验证码 | 一个放笔记的地方而已</title>
		
		<meta name="author" content="Huangzhike">
		
		
		<meta name="description" content="用手记笔记，用心记笔记，用脑记笔记">
		
		
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
		
		<meta property="og:title" content="[笔记]-HttpServletResponse-验证码"/>
		
		<meta property="og:site_name" content="一个放笔记的地方而已"/>
		
		
		<!-- favicon -->
		<link rel="icon" type="image/ico" href="/favicon.ico" sizes="32x32">
		<link rel="manifest" href="/manifest.json">
		<meta name="msapplication-TileColor" content="#009688">
		<meta name="msapplication-TileImage" content="/mstile-144x144.ico">
		<meta name="theme-color" content="#009688">
		<script>var timeStart = new Date();</script>
		<!-- favicon end -->
		<!-- <link href="//favicon.ico" rel="icon"> -->
		
		<!-- toc -->
		<!-- <link rel="stylesheet" href="/libs/tocify/jquery.tocify.css" media="screen" type="text/css"> -->
		<!-- <link rel="stylesheet" href="/libs/bs/css/bootstrap.min.css" media="screen" type="text/css"> -->
		<!--<link rel="stylesheet" href="//apps.bdimg.com/libs/bootstrap/3.3.4/css/bootstrap.min.css" media="screen" type="text/css">-->
		<!-- material design -->
		<!-- <link rel="stylesheet" href="/libs/bs-material/css/ripples.min.css" media="screen" type="text/css"> -->
		<!-- <link rel="stylesheet" href="//apps.bdimg.com/libs/bootstrap-material/0.3.0/css/ripples.min.css" media="screen" type="text/css"> -->
		<!-- <link rel="stylesheet" href="/libs/bs-material/css/material.min.css" media="screen" type="text/css"> -->
		<!--<link rel="stylesheet" href="//apps.bdimg.com/libs/bootstrap-material/0.3.0/css/material.min.css" media="screen" type="text/css"> -->
		<!--<link rel="stylesheet" href="/css/highlight.light.css" media="screen" type="text/css">-->
		<link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
		
		
		<!-- <script src="//apps.bdimg.com/libs/jquery/2.0.3/jquery.min.js"></script>-->
		<!-- <script>window.jQuery || document.write('<script src="/libs/jquery-3.1.1.slim.min.js" type="text/javascript"><\/script>')</script>-->
	</head>

<body>
	<nav class="navbar navbar-default">
	<div class="container">
		<div class="navbar-header">
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
				<span class="sr-only">菜单</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			<a class="navbar-brand" href="/">一个放笔记的地方而已</a>
           
		</div>
		<div id="navbar" class="collapse navbar-collapse">
			<ul class="nav navbar-nav navbar-right">
				
				<li>
					<a href="https://huangzhike.github.io/" title="">
						<i class="fa fa-home"></i>首页
					</a>
				</li>
				
				<li>
					<a href="https://huangzhike.github.io/archives" title="">
						<i class="fa fa-list"></i>存档
					</a>
				</li>
				
				<li>
					<a href="https://github.com/huangzhike" title="我的主页">
						<i class="fa fa-github"></i>GitHub
					</a>
				</li>
				
			</ul>
		</div>
	</div>
</nav>

	<div class="container" >
		<div class="row">
	
		<div class="col-md-9 center-content">
			
			<div class="content">
				<!-- index -->
				
				<h2>[笔记]-HttpServletResponse-验证码</h2>
				
				<div>
					<span class="post-time">2017-10-30 12:34</span>
				</div>	
				
				<div class="article-content">
				<figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> mmp.response.study;</div><div class="line"></div><div class="line">public <span class="class"><span class="keyword">class</span> <span class="title">ResponseP</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</div><div class="line"></div><div class="line">	public void doGet(<span class="type">HttpServletRequest</span> request, <span class="type">HttpServletResponse</span> response) </div><div class="line">			<span class="keyword">throws</span> <span class="type">ServletException</span>, <span class="type">IOException</span> &#123;</div><div class="line">		<span class="comment">// 在内存中创建一张图片</span></div><div class="line">		<span class="type">BufferedImage</span> image = <span class="keyword">new</span> <span class="type">BufferedImage</span>(<span class="number">80</span>, <span class="number">20</span>, <span class="type">BufferedImage</span>.<span class="type">TYPE_INT_RGB</span>);</div><div class="line">		<span class="comment">// 得到图片</span></div><div class="line">		<span class="type">Graphics2D</span> g = (<span class="type">Graphics2D</span>) image.getGraphics();</div><div class="line">		g.setColor(<span class="type">Color</span>.<span class="type">WHITE</span>); <span class="comment">// 设置图片背景色</span></div><div class="line">		g.fillRect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">80</span>, <span class="number">20</span>); <span class="comment">// 填充背景色</span></div><div class="line">		<span class="comment">// 向图片上写数据</span></div><div class="line">		g.setColor(<span class="type">Color</span>.<span class="type">BLUE</span>); <span class="comment">// 设置图片上字体颜色</span></div><div class="line">		g.setFont(<span class="keyword">new</span> <span class="type">Font</span>(<span class="literal">null</span>, <span class="type">Font</span>.<span class="type">BOLD</span>, <span class="number">20</span>));</div><div class="line">		g.drawString(makeNum(), <span class="number">0</span>, <span class="number">20</span>);</div><div class="line">		<span class="comment">// 设置响应头控制浏览器浏览器以图片的方式打开</span></div><div class="line">		<span class="comment">// 等同于response.setHeader("Content-Type", "image/jpeg");</span></div><div class="line">		response.setContentType(<span class="string">"image/jpeg"</span>);</div><div class="line">		<span class="comment">// 设置响应头控制浏览器不缓存图片</span></div><div class="line">		response.setDateHeader(<span class="string">"expires"</span>, <span class="number">-1</span>);</div><div class="line">		response.setHeader(<span class="string">"Cache-Control"</span>, <span class="string">"no-cache"</span>);</div><div class="line">		response.setHeader(<span class="string">"Pragma"</span>, <span class="string">"no-cache"</span>);</div><div class="line">		<span class="comment">// 将图片写给浏览器</span></div><div class="line">		<span class="type">ImageIO</span>.write(image, <span class="string">"jpg"</span>, response.getOutputStream());</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="keyword">private</span> <span class="type">String</span> makeNum() &#123;</div><div class="line">		<span class="type">Random</span> random = <span class="keyword">new</span> <span class="type">Random</span>();</div><div class="line">		<span class="type">String</span> num = random.nextInt(<span class="number">9999999</span>) + <span class="string">""</span>;</div><div class="line">		<span class="type">StringBuffer</span> sb = <span class="keyword">new</span> <span class="type">StringBuffer</span>();</div><div class="line">		<span class="keyword">for</span> (int i = <span class="number">0</span>; i &lt; <span class="number">7</span> - num.length(); i++) &#123;</div><div class="line">			sb.append(<span class="string">"0"</span>);</div><div class="line">		&#125;</div><div class="line">		num = sb.toString() + num;</div><div class="line">		<span class="keyword">return</span> num;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">// 略</span></div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>生成验证码图片</p>
<figure class="highlight taggerscript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div></pre></td><td class="code"><pre><div class="line">public class DrawImage extends HttpServlet &#123;</div><div class="line">	private static final long serialVersionUID = 3038623696184546092L;</div><div class="line"></div><div class="line">	public static final int WIDTH = 120; // 生成的图片的宽度</div><div class="line">	public static final int HEIGHT = 30; // 生成的图片的高度</div><div class="line"></div><div class="line">	public void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123;</div><div class="line">		this.doPost(request, response);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	public void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123;</div><div class="line">		String createTypeFlag = request.getParameter("createTypeFlag"); // 接收客户端传递的createTypeFlag标识</div><div class="line"></div><div class="line">		BufferedImage bi = new BufferedImage(WIDTH, HEIGHT, BufferedImage.TYPE_INT_RGB);</div><div class="line">		Graphics g = bi.getGraphics();</div><div class="line">		// 边框区域</div><div class="line">		g.setColor(Color.WHITE);</div><div class="line">		g.fillRect(0, 0, WIDTH, HEIGHT);</div><div class="line"></div><div class="line">		g.setColor(Color.BLUE);</div><div class="line">		g.drawRect(1, 1, WIDTH - 2, HEIGHT - 2);</div><div class="line">		// 画干扰线</div><div class="line">		drawRandomLine(g);</div><div class="line">		// 根据客户端传递的createTypeFlag标识生成随机数</div><div class="line">		String random = drawRandomNum((Graphics2D) g, createTypeFlag);</div><div class="line"></div><div class="line">		request.getSession().setAttribute("checkcode", random); // 将随机数存在session中</div><div class="line">		response.setHeader("refresh", "5"); // 5秒钟刷新</div><div class="line">		response.setContentType("image/jpeg");</div><div class="line">		response.setDateHeader("expries", -1);</div><div class="line">		response.setHeader("Cache-Control", "no-cache");</div><div class="line">		response.setHeader("Pragma", "no-cache");</div><div class="line">		ImageIO.write(bi, "jpg", response.getOutputStream());</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	// 在图片上画随机线条</div><div class="line">	private void drawRandomLine(Graphics g) &#123;</div><div class="line">		// 设置颜色</div><div class="line">		g.setColor(Color.GREEN);</div><div class="line">		// 设置线条个数并画线</div><div class="line">		for (int i = 0; i &lt; 5; i++) &#123;</div><div class="line">			int x1 = new Random().nextInt(WIDTH);</div><div class="line">			int y1 = new Random().nextInt(HEIGHT);</div><div class="line">			int x2 = new Random().nextInt(WIDTH);</div><div class="line">			int y2 = new Random().nextInt(HEIGHT);</div><div class="line">			g.drawLine(x1, y1, x2, y2);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	// 画随机字符</div><div class="line">	private String drawRandomNum(Graphics2D g, String... createTypeFlag) &#123;</div><div class="line">		// 设置颜色</div><div class="line">		g.setColor(Color.RED);</div><div class="line">		// 设置字体</div><div class="line">		g.setFont(new Font("宋体", Font.BOLD, 20));</div><div class="line">		// 常用的中国汉字</div><div class="line">		String baseChineseChar = "<span class="symbol">\u</span>7684<span class="symbol">\u</span>4e00<span class="symbol">\u</span>4e86<span class="symbol">\u</span>662f<span class="symbol">\u</span>6211<span class="symbol">\u</span>4e0d<span class="symbol">\u</span>5728<span class="symbol">\u</span>4eba<span class="symbol">\u</span>4eec<span class="symbol">\u</span>6709<span class="symbol">\u</span>6765<span class="symbol">\u</span>4ed6<span class="symbol">\u</span>8fd9<span class="symbol">\u</span>4e0a<span class="symbol">\u</span>7740<span class="symbol">\u</span>4e2a<span class="symbol">\u</span>5730<span class="symbol">\u</span>5230<span class="symbol">\u</span>5927<span class="symbol">\u</span>91cc<span class="symbol">\u</span>8bf4<span class="symbol">\u</span>5c31<span class="symbol">\u</span>53bb<span class="symbol">\u</span>5b50<span class="symbol">\u</span>5f97<span class="symbol">\u</span>4e5f<span class="symbol">\u</span>548c<span class="symbol">\u</span>90a3<span class="symbol">\u</span>8981<span class="symbol">\u</span>4e0b<span class="symbol">\u</span>770b<span class="symbol">\u</span>5929<span class="symbol">\u</span>65f6<span class="symbol">\u</span>8fc7<span class="symbol">\u</span>51fa<span class="symbol">\u</span>5c0f<span class="symbol">\u</span>4e48<span class="symbol">\u</span>8d77<span class="symbol">\u</span>4f60<span class="symbol">\u</span>90fd<span class="symbol">\u</span>628a<span class="symbol">\u</span>597d<span class="symbol">\u</span>8fd8<span class="symbol">\u</span>591a<span class="symbol">\u</span>6ca1<span class="symbol">\u</span>4e3a<span class="symbol">\u</span>53c8<span class="symbol">\u</span>53ef<span class="symbol">\u</span>5bb6<span class="symbol">\u</span>5b66<span class="symbol">\u</span>53ea<span class="symbol">\u</span>4ee5<span class="symbol">\u</span>4e3b<span class="symbol">\u</span>4f1a<span class="symbol">\u</span>6837<span class="symbol">\u</span>5e74<span class="symbol">\u</span>60f3<span class="symbol">\u</span>751f<span class="symbol">\u</span>540c<span class="symbol">\u</span>8001<span class="symbol">\u</span>4e2d<span class="symbol">\u</span>5341<span class="symbol">\u</span>4ece<span class="symbol">\u</span>81ea<span class="symbol">\u</span>9762<span class="symbol">\u</span>524d<span class="symbol">\u</span>5934<span class="symbol">\u</span>9053<span class="symbol">\u</span>5b83<span class="symbol">\u</span>540e<span class="symbol">\u</span>7136<span class="symbol">\u</span>8d70<span class="symbol">\u</span>5f88<span class="symbol">\u</span>50cf<span class="symbol">\u</span>89c1<span class="symbol">\u</span>4e24<span class="symbol">\u</span>7528<span class="symbol">\u</span>5979<span class="symbol">\u</span>56fd<span class="symbol">\u</span>52a8<span class="symbol">\u</span>8fdb<span class="symbol">\u</span>6210<span class="symbol">\u</span>56de<span class="symbol">\u</span>4ec0<span class="symbol">\u</span>8fb9<span class="symbol">\u</span>4f5c<span class="symbol">\u</span>5bf9<span class="symbol">\u</span>5f00<span class="symbol">\u</span>800c<span class="symbol">\u</span>5df1<span class="symbol">\u</span>4e9b<span class="symbol">\u</span>73b0<span class="symbol">\u</span>5c71<span class="symbol">\u</span>6c11<span class="symbol">\u</span>5019<span class="symbol">\u</span>7ecf<span class="symbol">\u</span>53d1<span class="symbol">\u</span>5de5<span class="symbol">\u</span>5411<span class="symbol">\u</span>4e8b<span class="symbol">\u</span>547d<span class="symbol">\u</span>7ed9<span class="symbol">\u</span>957f<span class="symbol">\u</span>6c34<span class="symbol">\u</span>51e0<span class="symbol">\u</span>4e49<span class="symbol">\u</span>4e09<span class="symbol">\u</span>58f0<span class="symbol">\u</span>4e8e<span class="symbol">\u</span>9ad8<span class="symbol">\u</span>624b<span class="symbol">\u</span>77e5<span class="symbol">\u</span>7406<span class="symbol">\u</span>773c<span class="symbol">\u</span>5fd7<span class="symbol">\u</span>70b9<span class="symbol">\u</span>5fc3<span class="symbol">\u</span>6218<span class="symbol">\u</span>4e8c<span class="symbol">\u</span>95ee<span class="symbol">\u</span>4f46<span class="symbol">\u</span>8eab<span class="symbol">\u</span>65b9<span class="symbol">\u</span>5b9e<span class="symbol">\u</span>5403<span class="symbol">\u</span>505a<span class="symbol">\u</span>53eb<span class="symbol">\u</span>5f53<span class="symbol">\u</span>4f4f<span class="symbol">\u</span>542c<span class="symbol">\u</span>9769<span class="symbol">\u</span>6253<span class="symbol">\u</span>5462<span class="symbol">\u</span>771f<span class="symbol">\u</span>5168<span class="symbol">\u</span>624d<span class="symbol">\u</span>56db<span class="symbol">\u</span>5df2<span class="symbol">\u</span>6240<span class="symbol">\u</span>654c<span class="symbol">\u</span>4e4b<span class="symbol">\u</span>6700<span class="symbol">\u</span>5149<span class="symbol">\u</span>4ea7<span class="symbol">\u</span>60c5<span class="symbol">\u</span>8def<span class="symbol">\u</span>5206<span class="symbol">\u</span>603b<span class="symbol">\u</span>6761<span class="symbol">\u</span>767d<span class="symbol">\u</span>8bdd<span class="symbol">\u</span>4e1c<span class="symbol">\u</span>5e2d<span class="symbol">\u</span>6b21<span class="symbol">\u</span>4eb2<span class="symbol">\u</span>5982<span class="symbol">\u</span>88ab<span class="symbol">\u</span>82b1<span class="symbol">\u</span>53e3<span class="symbol">\u</span>653e<span class="symbol">\u</span>513f<span class="symbol">\u</span>5e38<span class="symbol">\u</span>6c14<span class="symbol">\u</span>4e94<span class="symbol">\u</span>7b2c<span class="symbol">\u</span>4f7f<span class="symbol">\u</span>5199<span class="symbol">\u</span>519b<span class="symbol">\u</span>5427<span class="symbol">\u</span>6587<span class="symbol">\u</span>8fd0<span class="symbol">\u</span>518d<span class="symbol">\u</span>679c<span class="symbol">\u</span>600e<span class="symbol">\u</span>5b9a<span class="symbol">\u</span>8bb8<span class="symbol">\u</span>5feb<span class="symbol">\u</span>660e<span class="symbol">\u</span>884c<span class="symbol">\u</span>56e0<span class="symbol">\u</span>522b<span class="symbol">\u</span>98de<span class="symbol">\u</span>5916<span class="symbol">\u</span>6811<span class="symbol">\u</span>7269<span class="symbol">\u</span>6d3b<span class="symbol">\u</span>90e8<span class="symbol">\u</span>95e8<span class="symbol">\u</span>65e0<span class="symbol">\u</span>5f80<span class="symbol">\u</span>8239<span class="symbol">\u</span>671b<span class="symbol">\u</span>65b0<span class="symbol">\u</span>5e26<span class="symbol">\u</span>961f<span class="symbol">\u</span>5148<span class="symbol">\u</span>529b<span class="symbol">\u</span>5b8c<span class="symbol">\u</span>5374<span class="symbol">\u</span>7ad9<span class="symbol">\u</span>4ee3<span class="symbol">\u</span>5458<span class="symbol">\u</span>673a<span class="symbol">\u</span>66f4<span class="symbol">\u</span>4e5d<span class="symbol">\u</span>60a8<span class="symbol">\u</span>6bcf<span class="symbol">\u</span>98ce<span class="symbol">\u</span>7ea7<span class="symbol">\u</span>8ddf<span class="symbol">\u</span>7b11<span class="symbol">\u</span>554a<span class="symbol">\u</span>5b69<span class="symbol">\u</span>4e07<span class="symbol">\u</span>5c11<span class="symbol">\u</span>76f4<span class="symbol">\u</span>610f<span class="symbol">\u</span>591c<span class="symbol">\u</span>6bd4<span class="symbol">\u</span>9636<span class="symbol">\u</span>8fde<span class="symbol">\u</span>8f66<span class="symbol">\u</span>91cd<span class="symbol">\u</span>4fbf<span class="symbol">\u</span>6597<span class="symbol">\u</span>9a6c<span class="symbol">\u</span>54ea<span class="symbol">\u</span>5316<span class="symbol">\u</span>592a<span class="symbol">\u</span>6307<span class="symbol">\u</span>53d8<span class="symbol">\u</span>793e<span class="symbol">\u</span>4f3c<span class="symbol">\u</span>58eb<span class="symbol">\u</span>8005<span class="symbol">\u</span>5e72<span class="symbol">\u</span>77f3<span class="symbol">\u</span>6ee1<span class="symbol">\u</span>65e5<span class="symbol">\u</span>51b3<span class="symbol">\u</span>767e<span class="symbol">\u</span>539f<span class="symbol">\u</span>62ff<span class="symbol">\u</span>7fa4<span class="symbol">\u</span>7a76<span class="symbol">\u</span>5404<span class="symbol">\u</span>516d<span class="symbol">\u</span>672c<span class="symbol">\u</span>601d<span class="symbol">\u</span>89e3<span class="symbol">\u</span>7acb<span class="symbol">\u</span>6cb3<span class="symbol">\u</span>6751<span class="symbol">\u</span>516b<span class="symbol">\u</span>96be<span class="symbol">\u</span>65e9<span class="symbol">\u</span>8bba<span class="symbol">\u</span>5417<span class="symbol">\u</span>6839<span class="symbol">\u</span>5171<span class="symbol">\u</span>8ba9<span class="symbol">\u</span>76f8<span class="symbol">\u</span>7814<span class="symbol">\u</span>4eca<span class="symbol">\u</span>5176<span class="symbol">\u</span>4e66<span class="symbol">\u</span>5750<span class="symbol">\u</span>63a5<span class="symbol">\u</span>5e94<span class="symbol">\u</span>5173<span class="symbol">\u</span>4fe1<span class="symbol">\u</span>89c9<span class="symbol">\u</span>6b65<span class="symbol">\u</span>53cd<span class="symbol">\u</span>5904<span class="symbol">\u</span>8bb0<span class="symbol">\u</span>5c06<span class="symbol">\u</span>5343<span class="symbol">\u</span>627e<span class="symbol">\u</span>4e89<span class="symbol">\u</span>9886<span class="symbol">\u</span>6216<span class="symbol">\u</span>5e08<span class="symbol">\u</span>7ed3<span class="symbol">\u</span>5757<span class="symbol">\u</span>8dd1<span class="symbol">\u</span>8c01<span class="symbol">\u</span>8349<span class="symbol">\u</span>8d8a<span class="symbol">\u</span>5b57<span class="symbol">\u</span>52a0<span class="symbol">\u</span>811a<span class="symbol">\u</span>7d27<span class="symbol">\u</span>7231<span class="symbol">\u</span>7b49<span class="symbol">\u</span>4e60<span class="symbol">\u</span>9635<span class="symbol">\u</span>6015<span class="symbol">\u</span>6708<span class="symbol">\u</span>9752<span class="symbol">\u</span>534a<span class="symbol">\u</span>706b<span class="symbol">\u</span>6cd5<span class="symbol">\u</span>9898<span class="symbol">\u</span>5efa<span class="symbol">\u</span>8d76<span class="symbol">\u</span>4f4d<span class="symbol">\u</span>5531<span class="symbol">\u</span>6d77<span class="symbol">\u</span>4e03<span class="symbol">\u</span>5973<span class="symbol">\u</span>4efb<span class="symbol">\u</span>4ef6<span class="symbol">\u</span>611f<span class="symbol">\u</span>51c6<span class="symbol">\u</span>5f20<span class="symbol">\u</span>56e2<span class="symbol">\u</span>5c4b<span class="symbol">\u</span>79bb<span class="symbol">\u</span>8272<span class="symbol">\u</span>8138<span class="symbol">\u</span>7247<span class="symbol">\u</span>79d1<span class="symbol">\u</span>5012<span class="symbol">\u</span>775b<span class="symbol">\u</span>5229<span class="symbol">\u</span>4e16<span class="symbol">\u</span>521a<span class="symbol">\u</span>4e14<span class="symbol">\u</span>7531<span class="symbol">\u</span>9001<span class="symbol">\u</span>5207<span class="symbol">\u</span>661f<span class="symbol">\u</span>5bfc<span class="symbol">\u</span>665a<span class="symbol">\u</span>8868<span class="symbol">\u</span>591f<span class="symbol">\u</span>6574<span class="symbol">\u</span>8ba4<span class="symbol">\u</span>54cd<span class="symbol">\u</span>96ea<span class="symbol">\u</span>6d41<span class="symbol">\u</span>672a<span class="symbol">\u</span>573a<span class="symbol">\u</span>8be5<span class="symbol">\u</span>5e76<span class="symbol">\u</span>5e95<span class="symbol">\u</span>6df1<span class="symbol">\u</span>523b<span class="symbol">\u</span>5e73<span class="symbol">\u</span>4f1f<span class="symbol">\u</span>5fd9<span class="symbol">\u</span>63d0<span class="symbol">\u</span>786e<span class="symbol">\u</span>8fd1<span class="symbol">\u</span>4eae<span class="symbol">\u</span>8f7b<span class="symbol">\u</span>8bb2<span class="symbol">\u</span>519c<span class="symbol">\u</span>53e4<span class="symbol">\u</span>9ed1<span class="symbol">\u</span>544a<span class="symbol">\u</span>754c<span class="symbol">\u</span>62c9<span class="symbol">\u</span>540d<span class="symbol">\u</span>5440<span class="symbol">\u</span>571f<span class="symbol">\u</span>6e05<span class="symbol">\u</span>9633<span class="symbol">\u</span>7167<span class="symbol">\u</span>529e<span class="symbol">\u</span>53f2<span class="symbol">\u</span>6539<span class="symbol">\u</span>5386<span class="symbol">\u</span>8f6c<span class="symbol">\u</span>753b<span class="symbol">\u</span>9020<span class="symbol">\u</span>5634<span class="symbol">\u</span>6b64<span class="symbol">\u</span>6cbb<span class="symbol">\u</span>5317<span class="symbol">\u</span>5fc5<span class="symbol">\u</span>670d<span class="symbol">\u</span>96e8<span class="symbol">\u</span>7a7f<span class="symbol">\u</span>5185<span class="symbol">\u</span>8bc6<span class="symbol">\u</span>9a8c<span class="symbol">\u</span>4f20<span class="symbol">\u</span>4e1a<span class="symbol">\u</span>83dc<span class="symbol">\u</span>722c<span class="symbol">\u</span>7761<span class="symbol">\u</span>5174<span class="symbol">\u</span>5f62<span class="symbol">\u</span>91cf<span class="symbol">\u</span>54b1<span class="symbol">\u</span>89c2<span class="symbol">\u</span>82e6<span class="symbol">\u</span>4f53<span class="symbol">\u</span>4f17<span class="symbol">\u</span>901a<span class="symbol">\u</span>51b2<span class="symbol">\u</span>5408<span class="symbol">\u</span>7834<span class="symbol">\u</span>53cb<span class="symbol">\u</span>5ea6<span class="symbol">\u</span>672f<span class="symbol">\u</span>996d<span class="symbol">\u</span>516c<span class="symbol">\u</span>65c1<span class="symbol">\u</span>623f<span class="symbol">\u</span>6781<span class="symbol">\u</span>5357<span class="symbol">\u</span>67aa<span class="symbol">\u</span>8bfb<span class="symbol">\u</span>6c99<span class="symbol">\u</span>5c81<span class="symbol">\u</span>7ebf<span class="symbol">\u</span>91ce<span class="symbol">\u</span>575a<span class="symbol">\u</span>7a7a<span class="symbol">\u</span>6536<span class="symbol">\u</span>7b97<span class="symbol">\u</span>81f3<span class="symbol">\u</span>653f<span class="symbol">\u</span>57ce<span class="symbol">\u</span>52b3<span class="symbol">\u</span>843d<span class="symbol">\u</span>94b1<span class="symbol">\u</span>7279<span class="symbol">\u</span>56f4<span class="symbol">\u</span>5f1f<span class="symbol">\u</span>80dc<span class="symbol">\u</span>6559<span class="symbol">\u</span>70ed<span class="symbol">\u</span>5c55<span class="symbol">\u</span>5305<span class="symbol">\u</span>6b4c<span class="symbol">\u</span>7c7b<span class="symbol">\u</span>6e10<span class="symbol">\u</span>5f3a<span class="symbol">\u</span>6570<span class="symbol">\u</span>4e61<span class="symbol">\u</span>547c<span class="symbol">\u</span>6027<span class="symbol">\u</span>97f3<span class="symbol">\u</span>7b54<span class="symbol">\u</span>54e5<span class="symbol">\u</span>9645<span class="symbol">\u</span>65e7<span class="symbol">\u</span>795e<span class="symbol">\u</span>5ea7<span class="symbol">\u</span>7ae0<span class="symbol">\u</span>5e2e<span class="symbol">\u</span>5566<span class="symbol">\u</span>53d7<span class="symbol">\u</span>7cfb<span class="symbol">\u</span>4ee4<span class="symbol">\u</span>8df3<span class="symbol">\u</span>975e<span class="symbol">\u</span>4f55<span class="symbol">\u</span>725b<span class="symbol">\u</span>53d6<span class="symbol">\u</span>5165<span class="symbol">\u</span>5cb8<span class="symbol">\u</span>6562<span class="symbol">\u</span>6389<span class="symbol">\u</span>5ffd<span class="symbol">\u</span>79cd<span class="symbol">\u</span>88c5<span class="symbol">\u</span>9876<span class="symbol">\u</span>6025<span class="symbol">\u</span>6797<span class="symbol">\u</span>505c<span class="symbol">\u</span>606f<span class="symbol">\u</span>53e5<span class="symbol">\u</span>533a<span class="symbol">\u</span>8863<span class="symbol">\u</span>822c<span class="symbol">\u</span>62a5<span class="symbol">\u</span>53f6<span class="symbol">\u</span>538b<span class="symbol">\u</span>6162<span class="symbol">\u</span>53d4<span class="symbol">\u</span>80cc<span class="symbol">\u</span>7ec6";</div><div class="line">		// 数字和字母的组合</div><div class="line">		String baseNumLetter = "0123456789ABCDEFGHJKLMNOPQRSTUVWXYZ";</div><div class="line">		// 纯数字</div><div class="line">		String baseNum = "0123456789";</div><div class="line">		// 纯字母</div><div class="line">		String baseLetter = "ABCDEFGHJKLMNOPQRSTUVWXYZ";</div><div class="line">		// createTypeFlag[0]==null表示没有传递参数</div><div class="line">		if (createTypeFlag.length &gt; 0 &amp;&amp; null != createTypeFlag[0]) &#123;</div><div class="line">			if (createTypeFlag[0].equals("ch")) &#123;</div><div class="line">				// 截取汉字</div><div class="line">				return createRandomChar(g, baseChineseChar);</div><div class="line">			&#125; else if (createTypeFlag[0].equals("nl")) &#123;</div><div class="line">				// 截取数字和字母的组合</div><div class="line">				return createRandomChar(g, baseNumLetter);</div><div class="line">			&#125; else if (createTypeFlag[0].equals("n")) &#123;</div><div class="line">				// 截取数字</div><div class="line">				return createRandomChar(g, baseNum);</div><div class="line">			&#125; else if (createTypeFlag[0].equals("l")) &#123;</div><div class="line">				// 截取字母</div><div class="line">				return createRandomChar(g, baseLetter);</div><div class="line">			&#125;</div><div class="line">		&#125; else &#123;</div><div class="line">			// 默认截取数字和字母的组合</div><div class="line">			return createRandomChar(g, baseNumLetter);</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		return "";</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	// 创建随机字符</div><div class="line">	private String createRandomChar(Graphics2D g, String baseChar) &#123;</div><div class="line">		StringBuffer sb = new StringBuffer();</div><div class="line">		int x = 5; // 修改 x的自增量，可以缩小间距</div><div class="line">		String ch = "";</div><div class="line">		// 控制字数</div><div class="line">		for (int i = 0; i &lt; 4; i++) &#123;</div><div class="line">			// 设置字体旋转角度</div><div class="line">			int degree = new Random().nextInt() <span class="variable">% 30;</span></div><div class="line">			ch = baseChar.charAt(new Random().nextInt(baseChar.length())) + "";</div><div class="line">			sb.append(ch);</div><div class="line">			// 正向角度</div><div class="line">			g.rotate(degree * Math.PI / 180, x, 20);</div><div class="line">			g.drawString(ch, x, 20);</div><div class="line">			// 反向角度</div><div class="line">			g.rotate(-degree * Math.PI / 180, x, 20);</div><div class="line">			x += 30;</div><div class="line">		&#125;</div><div class="line">		return sb.toString();</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>在Form表单中使用验证码图片<br><figure class="highlight erb"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="xml"><span class="tag">&lt;<span class="name">%</span></span></span><span class="ruby">@ page language=<span class="string">"java"</span> import=<span class="string">"java.util.*"</span> pageEncoding=<span class="string">"UTF-8"</span></span><span class="xml"><span class="tag">%&gt;</span></span></div><div class="line"><span class="meta">&lt;!DOCTYPE&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span>在Form表单中使用验证码<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">			<span class="comment">// 刷新验证码</span></div><div class="line">			<span class="function"><span class="keyword">function</span> <span class="title">changeImg</span>(<span class="params"></span>)</span>&#123;</div><div class="line">				<span class="built_in">document</span>.getElementById(<span class="string">"validateCodeImg"</span>).src = </div><div class="line">					<span class="string">"$&#123;pageContext.request.contextPath&#125;/servlet/DrawImage?"</span> + <span class="built_in">Math</span>.random();</div><div class="line">				<span class="comment">// 末尾加Math.random()使每次请求地址不相同，也可以用new date()时间戳的形式作为参数传递</span></div><div class="line">			&#125;</div><div class="line">		<span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"$&#123;pageContext.request.contextPath&#125;/servlet/CheckServlet"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></div><div class="line">			验证码：</div><div class="line">			<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"validateCode"</span>/&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">img</span> <span class="attr">alt</span>=<span class="string">"验证码看不清，换一张"</span> <span class="attr">src</span>=<span class="string">"$&#123;pageContext.request.contextPath&#125;/servlet/DrawImage"</span> </span></div><div class="line">				<span class="attr">id</span>=<span class="string">"validateCodeImg"</span> <span class="attr">onclick</span>=<span class="string">"changeImg()"</span>&gt;</div><div class="line">			<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"javascript:void(0)"</span> <span class="attr">onclick</span>=<span class="string">"changeImg()"</span>&gt;</span>看不清，换一张<span class="tag">&lt;/<span class="name">a</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">br</span>/&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"提交"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">form</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>DrawImage Servlet除了可以生成的字母和数字的组合的验证码之外，还可以生成汉字，纯数字，纯字母的验证码图片，只需要向DrawImage Servlet传递约定好的生成标识符参数。<br><figure class="highlight erb"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div></pre></td><td class="code"><pre><div class="line"><span class="xml"><span class="tag">&lt;<span class="name">%</span></span></span><span class="ruby">@ page language=<span class="string">"java"</span> import=<span class="string">"java.util.*"</span> pageEncoding=<span class="string">"UTF-8"</span></span><span class="xml"><span class="tag">%&gt;</span></span></div><div class="line"><span class="meta">&lt;!DOCTYPE&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span>在Form表单中使用验证码<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">script</span> &gt;</span><span class="javascript"></span></div><div class="line">			<span class="comment">// 刷新验证码</span></div><div class="line">			<span class="function"><span class="keyword">function</span> <span class="title">changeImg</span>(<span class="params">obj,createTypeFlag</span>)</span>&#123;</div><div class="line">			<span class="built_in">document</span>.getElementById(obj.id).src = </div><div class="line">				<span class="string">"$&#123;pageContext.request.contextPath&#125;/servlet/DrawImage?createTypeFlag="</span> + createTypeFlag+<span class="string">"&amp;id="</span>+id+<span class="built_in">Math</span>.random();</div><div class="line">			&#125;</div><div class="line">			<span class="comment">// 当有多个验证码的时候，保存在seesion中checkcode是4个当中的一个</span></div><div class="line">			<span class="comment">// getParameter("validateCode")获得的validateCOde也是4个当中的一个</span></div><div class="line">			<span class="comment">// 当有多个验证码的页面提交验证总是会失败</span></div><div class="line">			<span class="comment">// 每个input的name属性设置不相同，为Servlet DrawImage增加一个id参数</span></div><div class="line">			<span class="comment">// 在doGet时获取id：String id = request.getParameter("id");</span></div><div class="line">			<span class="comment">// 保存到session的时候后面加个id号</span></div><div class="line">			<span class="comment">// 在验证的时候读取session中保存的所有验证码，根据id进行比较</span></div><div class="line">		<span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"$&#123;pageContext.request.contextPath&#125;/servlet/CheckServlet"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></div><div class="line">			数字字母混合验证码：</div><div class="line">			<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"validateCode"</span>/&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">img</span> <span class="attr">alt</span>=<span class="string">"验证码看不清，换一张"</span> </span></div><div class="line">				<span class="attr">src</span>=<span class="string">"$&#123;pageContext.request.contextPath&#125;/servlet/DrawImage"</span> </div><div class="line">				<span class="attr">id</span>=<span class="string">"validateCodeImg1"</span> <span class="attr">onclick</span>=<span class="string">"changeImg(this,'nl')"</span>&gt;</div><div class="line">			<span class="tag">&lt;<span class="name">br</span>/&gt;</span></div><div class="line">			中文验证码：</div><div class="line">			<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"validateCode"</span>/&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">img</span> <span class="attr">alt</span>=<span class="string">"验证码看不清，换一张"</span> </span></div><div class="line">				<span class="attr">src</span>=<span class="string">"$&#123;pageContext.request.contextPath&#125;/servlet/DrawImage?createTypeFlag=ch"</span> </div><div class="line">				<span class="attr">id</span>=<span class="string">"validateCodeImg2"</span> <span class="attr">onclick</span>=<span class="string">"changeImg(this,'ch')"</span>&gt;</div><div class="line">			<span class="tag">&lt;<span class="name">br</span>/&gt;</span></div><div class="line">			英文验证码：</div><div class="line">			<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"validateCode"</span>/&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">img</span> <span class="attr">alt</span>=<span class="string">"验证码看不清，换一张"</span> </span></div><div class="line">				<span class="attr">src</span>=<span class="string">"$&#123;pageContext.request.contextPath&#125;/servlet/DrawImage?createTypeFlag=l"</span> </div><div class="line">				<span class="attr">id</span>=<span class="string">"validateCodeImg3"</span> <span class="attr">onclick</span>=<span class="string">"changeImg(this,'l')"</span>&gt;</div><div class="line">			<span class="tag">&lt;<span class="name">br</span>/&gt;</span></div><div class="line">			数字验证码：</div><div class="line">			<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"validateCode"</span>/&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">img</span> <span class="attr">alt</span>=<span class="string">"验证码看不清，换一张"</span> </span></div><div class="line">				<span class="attr">src</span>=<span class="string">"$&#123;pageContext.request.contextPath&#125;/servlet/DrawImage?createTypeFlag=n"</span> </div><div class="line">				<span class="attr">id</span>=<span class="string">"validateCodeImg4"</span> <span class="attr">onclick</span>=<span class="string">"changeImg(this,'n')"</span>&gt;</div><div class="line">			<span class="tag">&lt;<span class="name">br</span>/&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"提交"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">form</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>服务器端对form表单提交上来的验证码处理<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> mmp.response.study;</div><div class="line"></div><div class="line">public <span class="class"><span class="keyword">class</span> <span class="title">CheckServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</div><div class="line">	public void doGet(<span class="type">HttpServletRequest</span> request, <span class="type">HttpServletResponse</span> response) </div><div class="line">			<span class="keyword">throws</span> <span class="type">ServletException</span>, <span class="type">IOException</span> &#123;</div><div class="line">		<span class="comment">// 接收客户端浏览器提交上来的验证码</span></div><div class="line">		<span class="type">String</span> clientCheckcode = request.getParameter(<span class="string">"validateCode"</span>);</div><div class="line">		<span class="comment">// 从服务器端的session中取出验证码</span></div><div class="line">		<span class="type">String</span> serverCheckcode = (<span class="type">String</span>) request.getSession().getAttribute(<span class="string">"checkcode"</span>);</div><div class="line">		<span class="comment">// 将客户端验证码和服务器端验证比较，如果相等，则表示验证通过</span></div><div class="line">		<span class="keyword">if</span> (clientCheckcode.equals(serverCheckcode)) &#123;</div><div class="line">			<span class="type">System</span>.out.println(<span class="string">"验证码验证通过！"</span>);</div><div class="line">		&#125; <span class="keyword">else</span> &#123;</div><div class="line">			<span class="type">System</span>.out.println(<span class="string">"验证码验证失败！"</span>);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	public void doPost(<span class="type">HttpServletRequest</span> request, <span class="type">HttpServletResponse</span> response) </div><div class="line">			<span class="keyword">throws</span> <span class="type">ServletException</span>, <span class="type">IOException</span> &#123;</div><div class="line">		doGet(request, response);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>

				</div>
				<!-- about -->
				
			</div>
			<!-- pagination -->
			
			<div class="comment-section">
	
	


</div>
		</div>
		
	</div>


		<footer>
			
<p>Powered by <a href="https://hexo.io">Hexo</a> with <a href="https://github.com/wayou/hexo-theme-material">Material</a> theme modified by <b> Huangzhike </b></p>
<p>&copy; 2017 <a href="https://huangzhike.github.io"><b> Huangzhike </b></a></p>
<a id="gotop" href="#" title="back to top"><i class="mdi-hardware-keyboard-arrow-up"></i></a>

		</footer>
	</div>
	<!-- <script src="/libs/bs/js/bootstrap.min.js"></script> -->
	<!-- <script src="//apps.bdimg.com/libs/bootstrap/3.3.4/js/bootstrap.min.js"></script> -->
	<script src="/js/highlight.js"></script> 
	<script>hljs.initHighlightingOnLoad();var timeEnd = new Date();console.log('耗时：' + (timeEnd - timeStart));</script>
	<!-- <script>(typeof $().modal == 'function')|| document.write('<script src="/libs/bs/js/bootstrap.min.js" type="text/javascript"><\/script>')</script>-->
	<!-- material design -->
	<!-- <script src="/libs/bs-material/js/ripples.min.js"></script> -->
	<!-- <script src="//apps.bdimg.com/libs/bootstrap-material/0.3.0/js/ripples.min.js"></script> -->
	<!-- <script src="/libs/bs-material/js/material.min.js"></script> -->
	<!-- <script src="//apps.bdimg.com/libs/bootstrap-material/0.3.0/js/material.min.js"></script>-->
	<!-- toc -->
	<!-- <script src="/libs/tocify/jquery-ui.min.js"></script> -->
	<!-- <script src="//apps.bdimg.com/libs/jqueryui/1.10.4/jquery-ui.min.js"></script> -->
	<!-- <script src="/libs/tocify/jquery.tocify.custom.js"></script> -->
	<!-- <script src="/js/main.js"></script> -->
</body>
</html>
