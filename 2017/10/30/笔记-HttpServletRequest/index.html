<!DOCTYPE HTML>
<html>
	<head>
		<meta charset="utf-8">
		
		<title>[笔记]-HttpServletRequest | 一个放笔记的地方而已</title>
		
		<meta name="author" content="Huangzhike">
		
		
		<meta name="description" content="用手记笔记，用心记笔记，用脑记笔记">
		
		
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
		
		<meta property="og:title" content="[笔记]-HttpServletRequest"/>
		
		<meta property="og:site_name" content="一个放笔记的地方而已"/>
		
		
		<!-- favicon -->
		<link rel="icon" type="image/ico" href="/favicon.ico" sizes="32x32">
		<link rel="manifest" href="/manifest.json">
		<meta name="msapplication-TileColor" content="#009688">
		<meta name="msapplication-TileImage" content="/mstile-144x144.ico">
		<meta name="theme-color" content="#009688">
		<script>var timeStart = new Date();</script>
		<!-- favicon end -->
		<!-- <link href="//favicon.ico" rel="icon"> -->
		
		<!-- toc -->
		<!-- <link rel="stylesheet" href="/libs/tocify/jquery.tocify.css" media="screen" type="text/css"> -->
		<!-- <link rel="stylesheet" href="/libs/bs/css/bootstrap.min.css" media="screen" type="text/css"> -->
		<!--<link rel="stylesheet" href="//apps.bdimg.com/libs/bootstrap/3.3.4/css/bootstrap.min.css" media="screen" type="text/css">-->
		<!-- material design -->
		<!-- <link rel="stylesheet" href="/libs/bs-material/css/ripples.min.css" media="screen" type="text/css"> -->
		<!-- <link rel="stylesheet" href="//apps.bdimg.com/libs/bootstrap-material/0.3.0/css/ripples.min.css" media="screen" type="text/css"> -->
		<!-- <link rel="stylesheet" href="/libs/bs-material/css/material.min.css" media="screen" type="text/css"> -->
		<!--<link rel="stylesheet" href="//apps.bdimg.com/libs/bootstrap-material/0.3.0/css/material.min.css" media="screen" type="text/css"> -->
		<!--<link rel="stylesheet" href="/css/highlight.light.css" media="screen" type="text/css">-->
		<link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
		
		
		<!-- <script src="//apps.bdimg.com/libs/jquery/2.0.3/jquery.min.js"></script>-->
		<!-- <script>window.jQuery || document.write('<script src="/libs/jquery-3.1.1.slim.min.js" type="text/javascript"><\/script>')</script>-->
	</head>

<body>
	<nav class="navbar navbar-default">
	<div class="container">
		<div class="navbar-header">
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
				<span class="sr-only">菜单</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			<a class="navbar-brand" href="/">一个放笔记的地方而已</a>
           
		</div>
		<div id="navbar" class="collapse navbar-collapse">
			<ul class="nav navbar-nav navbar-right">
				
				<li>
					<a href="https://huangzhike.github.io/" title="">
						<i class="fa fa-home"></i>首页
					</a>
				</li>
				
				<li>
					<a href="https://huangzhike.github.io/archives" title="">
						<i class="fa fa-list"></i>存档
					</a>
				</li>
				
				<li>
					<a href="https://github.com/huangzhike" title="我的主页">
						<i class="fa fa-github"></i>GitHub
					</a>
				</li>
				
			</ul>
		</div>
	</div>
</nav>

	<div class="container" >
		<div class="row">
	
		<div class="col-md-9 center-content">
			
			<div class="content">
				<!-- index -->
				
				<h2>[笔记]-HttpServletRequest</h2>
				
				<div>
					<span class="post-time">2017-10-30 12:34</span>
				</div>	
				
				<div class="article-content">
				<ul>
<li>URI:标识某个资源</li>
<li>URL:标识互联网上某个资源</li>
</ul>
<p>通过request对象获取客户端请求信息<br><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// localhost:4000/2017/xxx</span></div><div class="line">String requestUrl = request.getRequestURL().toString();</div><div class="line"><span class="comment">// /2017/xxx</span></div><div class="line">String requestUri = request.getRequestURI(); <span class="comment">// 请求的资源，用于权限拦截，访问统计</span></div><div class="line">String queryString = request.getQueryString(); <span class="comment">// 请求的URL地址中附带的参数</span></div><div class="line">String remoteAddr = request.getRemoteAddr(); <span class="comment">// IP地址</span></div><div class="line">String remoteHost = request.getRemoteHost();</div><div class="line"></div><div class="line">String <span class="function"><span class="keyword">method</span> = <span class="title">request</span>.<span class="title">getMethod</span><span class="params">()</span>;</span> <span class="comment">// 得到请求方法</span></div></pre></td></tr></table></figure></p>
<p>通过request对象获取客户端请求头信息<br><figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">response.setCharacterEncoding(<span class="string">"UTF-8"</span>);</div><div class="line">response.setHeader(<span class="string">"content-type"</span>, <span class="string">"text/html;charset=UTF-8"</span>);</div><div class="line"></div><div class="line">PrintWriter out = response.getWriter();</div><div class="line"></div><div class="line">out.<span class="built_in">write</span>(<span class="string">"获取到的客户端所有的请求头信息如下："</span>);</div><div class="line">out.<span class="built_in">write</span>(<span class="string">"&lt;hr/&gt;"</span>);</div><div class="line">Enumeration&lt;<span class="keyword">String</span>&gt; reqHeadInfos = request.getHeaderNames(); <span class="comment">// 获取所有的请求头</span></div><div class="line"><span class="built_in">while</span> (reqHeadInfos.hasMoreElements()) &#123;</div><div class="line">	<span class="keyword">String</span> headName = (<span class="keyword">String</span>) reqHeadInfos.nextElement();</div><div class="line">	<span class="keyword">String</span> headValue = request.getHeader(headName); <span class="comment">// 对应的请求头的值</span></div><div class="line">	out.<span class="built_in">write</span>(headName + <span class="string">":"</span> + headValue);</div><div class="line">	out.<span class="built_in">write</span>(<span class="string">"&lt;br/&gt;"</span>);</div><div class="line">&#125;</div><div class="line">out.<span class="built_in">write</span>(<span class="string">"&lt;br/&gt;"</span>);</div><div class="line"></div><div class="line">out.<span class="built_in">write</span>(<span class="string">"获取到的客户端Accept-Encoding请求头的值："</span>);</div><div class="line">out.<span class="built_in">write</span>(<span class="string">"&lt;hr/&gt;"</span>);</div><div class="line"><span class="keyword">String</span> value = request.getHeader(<span class="string">"Accept-Encoding"</span>); <span class="comment">// 获取Accept-Encoding请求头对应的值</span></div><div class="line">out.<span class="built_in">write</span>(value);</div><div class="line"></div><div class="line">Enumeration&lt;<span class="keyword">String</span>&gt; e = request.getHeaders(<span class="string">"Accept-Encoding"</span>);</div><div class="line"><span class="built_in">while</span> (e.hasMoreElements()) &#123;</div><div class="line">	<span class="keyword">String</span> <span class="keyword">string</span> = (<span class="keyword">String</span>) e.nextElement();</div><div class="line">	System.out.<span class="built_in">println</span>(<span class="keyword">string</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>获得客户机请求参数(客户端提交的数据)<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div></pre></td><td class="code"><pre><div class="line">&lt;%@ page language="java" import="java.util.*" pageEncoding="UTF-8"%&gt;</div><div class="line">&lt;!DOCTYPE&gt;</div><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line">	&lt;title&gt;Form表单元素&lt;/title&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;fieldset style="width:500px;"&gt;</div><div class="line">	&lt;legend&gt;Html的Form表单元素&lt;/legend&gt;</div><div class="line">	&lt;!--form表单的action属性规定当提交表单时，向何处发送表单数据，method属性指明提交方式，默认get--&gt;</div><div class="line">	&lt;form action="$&#123;pageContext.request.contextPath&#125;/servlet/RequestDemo03" method="post"&gt;</div><div class="line">	&lt;!--输入文本框，SIZE表示显示长度，maxlength表示最多输入长度--&gt;</div><div class="line">	编&amp;nbsp;&amp;nbsp;号(文本框)：</div><div class="line">	&lt;input type="text" name="userid" value="NO." size="2" maxlength="2"&gt;&lt;br&gt;</div><div class="line">	&lt;!--输入文本框--&gt;</div><div class="line">	用户名(文本框)：&lt;input type="text" name="username" value="请输入用户名"&gt;&lt;br&gt;</div><div class="line">	&lt;!--密码框，其中所有输入的内容都以密文的形式显示--&gt;</div><div class="line">	密&amp;nbsp;&amp;nbsp;码(密码框)：</div><div class="line">	&lt;input type="password" name="userpass" value="请输入密码"&gt;&lt;br&gt;</div><div class="line">	&lt;!--单选按钮--&gt;</div><div class="line">	性&amp;nbsp;&amp;nbsp;别(单选框)：</div><div class="line">	&lt;input type="radio" name="sex" value="男" checked&gt;男 </div><div class="line">	&lt;input type="radio" name="sex" value="女"&gt;女&lt;br&gt;</div><div class="line">	&lt;!--下拉列表框，通过&lt;option&gt;元素指定下拉的选项--&gt;</div><div class="line">	部&amp;nbsp;&amp;nbsp;门(下拉框)：</div><div class="line">	&lt;select name="dept"&gt;</div><div class="line">		&lt;option value="技术部"&gt;技术部&lt;/option&gt;</div><div class="line">		&lt;option value="销售部" SELECTED&gt;销售部&lt;/option&gt;</div><div class="line">		&lt;option value="财务部"&gt;财务部&lt;/option&gt;</div><div class="line">	&lt;/select&gt;&lt;br&gt;</div><div class="line">	&lt;!--复选框，name必须一样--&gt;</div><div class="line">	兴&amp;nbsp;&amp;nbsp;趣(复选框)： </div><div class="line">	&lt;input type="checkbox" name="inst" value="唱歌"&gt;唱歌 </div><div class="line">	&lt;input type="checkbox" name="inst" value="游泳"&gt;游泳 </div><div class="line">	&lt;input type="checkbox" name="inst" value="跳舞"&gt;跳舞 </div><div class="line">	&lt;input type="checkbox" name="inst" value="编程" checked&gt;编程 </div><div class="line">	&lt;input type="checkbox" name="inst" value="上网"&gt;上网</div><div class="line">	&lt;br&gt;</div><div class="line">	&lt;!--大文本输入框--&gt;</div><div class="line">	说&amp;nbsp;&amp;nbsp;明(文本域)：</div><div class="line">	&lt;textarea name="note" cols="34" rows="5"&gt;</div><div class="line">	 &lt;/textarea&gt;</div><div class="line">	&lt;br&gt;</div><div class="line">	&lt;!--隐藏域，在页面上无法看到，用来传递参数或者保存参数--&gt;</div><div class="line">	&lt;input type="hidden" name="hiddenField" value="hiddenvalue"/&gt;</div><div class="line">	&lt;!--提交表单按钮，当点击提交后，所有填写的表单内容都会被传输到服务器端--&gt;</div><div class="line">	&lt;input type="submit" value="提交(提交按钮)"&gt;</div><div class="line">	&lt;!--重置表单按钮，当点击重置后，所有表单恢复原始显示内容--&gt;</div><div class="line">	&lt;input type="reset" value="重置(重置按钮)"&gt;</div><div class="line">	&lt;/form&gt;</div><div class="line">	&lt;!--表单结束--&gt;</div><div class="line">&lt;/fieldset&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure></p>
<p>requst对象获取数据的四种方式</p>
<ul>
<li><code>getParameter</code></li>
<li><code>getParameterNames</code></li>
<li><code>getParameterValues</code></li>
<li><code>getParameterMap</code>(可结合JavaBean使用)</li>
</ul>
<p>在服务器端使用getParameter方法和getParameterValues方法接收表单参数<br><figure class="highlight django"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div></pre></td><td class="code"><pre><div class="line"><span class="xml">package mmp.request.study;</span></div><div class="line"></div><div class="line">public class Request3 extends HttpServlet &#123;</div><div class="line"></div><div class="line">	public void doPost(HttpServletRequest request, HttpServletResponse response) </div><div class="line">			throws ServletException, IOException &#123;</div><div class="line">		// 客户端以UTF-8编码提交，服务器端以UTF-8的编码接收</div><div class="line">		request.setCharacterEncoding("UTF-8");</div><div class="line"></div><div class="line">		String userid = request.getParameter("userid"); // userid是文本框的name</div><div class="line">		String username = request.getParameter("username");</div><div class="line">		String userpass = request.getParameter("userpass");</div><div class="line">		String sex = request.getParameter("sex");</div><div class="line">		String dept = request.getParameter("dept");</div><div class="line"></div><div class="line">		String[] insts = request.getParameterValues("inst");</div><div class="line"></div><div class="line">		String note = request.getParameter("note");</div><div class="line">		String hiddenField = request.getParameter("hiddenField");</div><div class="line"></div><div class="line">		String instStr = "";</div><div class="line"></div><div class="line">		// 避免insts数组为null时引发的空指针异常</div><div class="line">		for (int i = 0; insts != null &amp;&amp; i <span class="tag">&lt; <span class="attr">insts.length</span>; <span class="attr">i</span>++) &#123;</span></div><div class="line">			<span class="attr">if</span> (<span class="attr">i</span> == <span class="string">insts.length</span> <span class="attr">-</span> <span class="attr">1</span>) &#123;</div><div class="line">				<span class="attr">instStr</span> += <span class="string">insts[i];</span></div><div class="line">			&#125; <span class="attr">else</span> &#123;</div><div class="line">				<span class="attr">instStr</span> += <span class="string">insts[i]</span> + ",";</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		<span class="attr">String</span> <span class="attr">htmlStr</span> = <span class="string">"&lt;table&gt;"</span> </div><div class="line">				+ "&lt;<span class="attr">tr</span>&gt;<span class="tag">&lt;<span class="name">td</span>&gt;</span>填写的编号：<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;0&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">tr</span>&gt;</span>"</div><div class="line">				+ "<span class="tag">&lt;<span class="name">tr</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>填写的用户名：<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;1&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">tr</span>&gt;</span>"</div><div class="line">				+ "<span class="tag">&lt;<span class="name">tr</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>填写的密码：<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;2&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">tr</span>&gt;</span>" </div><div class="line">				+ "<span class="tag">&lt;<span class="name">tr</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>选中的性别：<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;3&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">tr</span>&gt;</span>"</div><div class="line">				+ "<span class="tag">&lt;<span class="name">tr</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>选中的部门：<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;4&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">tr</span>&gt;</span>" </div><div class="line">				+ "<span class="tag">&lt;<span class="name">tr</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>选中的兴趣：<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;5&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">tr</span>&gt;</span>"</div><div class="line">				+ "<span class="tag">&lt;<span class="name">tr</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>填写的说明：<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;6&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">tr</span>&gt;</span>" </div><div class="line">				+ "<span class="tag">&lt;<span class="name">tr</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>隐藏域的内容：<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;7&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">tr</span>&gt;</span>" </div><div class="line">				+ "<span class="tag">&lt;/<span class="name">table</span>&gt;</span>";</div><div class="line">		htmlStr = MessageFormat.format(htmlStr, userid, username, userpass, sex, dept, instStr, note, hiddenField);</div><div class="line"></div><div class="line">		response.setCharacterEncoding("UTF-8"); // 服务器端以UTF-8编码输出</div><div class="line">		response.setContentType("text/html;charset=UTF-8"); // 客户端以UTF-8编码解析</div><div class="line">		response.getWriter().write(htmlStr);</div><div class="line">	&#125;</div><div class="line">	// 略</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>在服务器端使用getParameterMap方法接收表单参数<br><figure class="highlight dart"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// request对象封装的参数是以Map的形式存储的</span></div><div class="line"><span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">String</span>[]&gt; paramMap = request.getParameterMap();</div><div class="line"><span class="keyword">for</span> (<span class="built_in">Map</span>.Entry&lt;<span class="built_in">String</span>, <span class="built_in">String</span>[]&gt; entry :paramMap.entrySet()) &#123;</div><div class="line">	<span class="built_in">String</span> paramName = entry.getKey();</div><div class="line">	<span class="built_in">String</span> paramValue = <span class="string">""</span>;</div><div class="line">	<span class="built_in">String</span>[] paramValueArr = entry.getValue();</div><div class="line">	<span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; paramValueArr!=<span class="keyword">null</span> &amp;&amp; i &lt; paramValueArr.length; i++) &#123;</div><div class="line">		<span class="keyword">if</span> (i == paramValueArr.length<span class="number">-1</span>) &#123;</div><div class="line">			paramValue+=paramValueArr[i];</div><div class="line">		&#125; <span class="keyword">else</span> &#123;</div><div class="line">			paramValue += paramValueArr[i] + <span class="string">","</span>;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	System.out.println(MessageFormat.format(<span class="string">"&#123;0&#125;=&#123;1&#125;"</span>, paramName, paramValue));</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>getParameterNames() 方法读取所有可用的表单参数。<br>该方法返回一个枚举，循环这个枚举，hasMoreElements() 方法确定何时停止循环，nextElement() 方法来获取每个参数的名称。</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">Enumeration paramNames = request.getParameterNames();</div><div class="line"><span class="built_in">while</span> (paramNames.hasMoreElements()) &#123;</div><div class="line">	<span class="keyword">String</span> paramName = (<span class="keyword">String</span>) paramNames.nextElement();</div><div class="line"></div><div class="line">	<span class="keyword">String</span>[] paramValues = request.getParameterValues(paramName);</div><div class="line">	<span class="comment">// Read single valued data</span></div><div class="line">	<span class="built_in">if</span> (paramValues.length == <span class="number">1</span>) &#123;</div><div class="line">		<span class="keyword">String</span> paramValue = paramValues[<span class="number">0</span>];</div><div class="line">		<span class="built_in">if</span> (paramValue.length() !== <span class="number">0</span>) &#123;</div><div class="line">		&#125;</div><div class="line">	&#125; <span class="built_in">else</span> &#123;</div><div class="line">		<span class="comment">// Read multiple valued data</span></div><div class="line">		<span class="built_in">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; paramValues.length; i++) &#123;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>request接收表单提交中文参数乱码问题</p>
<p>POST方式（默认不缓存）</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">request</span><span class="selector-class">.setCharacterEncoding</span>(<span class="string">"UTF-8"</span>); <span class="comment">// 设置服务器以UTF-8的编码接收数据</span></div></pre></td></tr></table></figure>
<p>GET方式（相同请求响应默认被缓存）<br><figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// request.setCharacterEncoding("UTF-8"); 无效</span></div><div class="line"><span class="comment">// 只适用于设置post提交的request body的编码而不是设置get方法提交的queryString的编码</span></div><div class="line"></div><div class="line"><span class="keyword">String</span> name = request.getParameter(<span class="string">"name"</span>);</div><div class="line"><span class="comment">// 以ISO8859-1编码接收，通过字节数组以UTF-8编码构建字符串</span></div><div class="line">name =<span class="keyword">new</span> <span class="keyword">String</span>(name.getBytes(<span class="string">"ISO8859-1"</span>), <span class="string">"UTF-8"</span>) ;</div></pre></td></tr></table></figure></p>
<p>GET方式提交中文数据乱码产生的原因是Tomcat编码设置的问题。<br>解决方法：<code>conf/server.xml</code>： <code>&lt;Connector URIEncoding=&quot;UTF-8&quot;/&gt;</code><br>新版本的Tomcat的编码默认UTF-8，GET处理中文和POST一样。</p>
<p>超链接形式传递中文参数</p>
<p>客户端传输数据到服务器，可以表单提交，也可以超链接后加参数</p>
<figure class="highlight dust"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="xml"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"$</span></span></span><span class="template-variable">&#123;pageContext.request.contextPath&#125;</span><span class="xml"><span class="tag"><span class="string">/servlet/Request3?userName=mmp&amp;name=mdzz"</span>&gt;</span>点击<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></div></pre></td></tr></table></figure>
<p>点击超链接，以GET的方式传输到服务器，解决方式与GET一致。<br>URL地址后面如果跟了中文数据，中文参数最好使用URL编码处理<br><figure class="highlight erb"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="xml"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"$&#123;pageContext.request.contextPath&#125;/servlet/Request3?userName=mmp&amp;name=&lt;%=</span></span></span><span class="ruby">URLEncoder.encode(<span class="string">"马的纸张"</span>, <span class="string">"UTF-8"</span>)</span><span class="xml"><span class="tag"><span class="string">%&gt;"</span>&gt;</span>点击<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></div></pre></td></tr></table></figure></p>
<p>在Servlet中实现请求转发的两种方式：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 将请求转发的test.jsp页面</span></div><div class="line"><span class="comment">// 方法1</span></div><div class="line">RequestDispatcher reqDispatcher =<span class="keyword">this</span>.getServletContext().getRequestDispatcher(<span class="string">"/test.jsp"</span>);</div><div class="line">reqDispatcher.forward(request, response);</div><div class="line"></div><div class="line"><span class="comment">// 方法2</span></div><div class="line">request.getRequestDispatcher(<span class="string">"/test.jsp"</span>).forward(request, response);</div></pre></td></tr></table></figure>
<p>request对象也是一个域对象(Map容器)，通过request对象在实现转发时，把数据通过request对象带给其它web资源处理。</p>
<figure class="highlight vbscript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">String</span> data=<span class="string">"mmp"</span>;</div><div class="line"><span class="built_in">request</span>.setAttribute(<span class="string">"data"</span>, data);</div><div class="line"><span class="built_in">request</span>.getRequestDispatcher(<span class="string">"/test.jsp"</span>).forward(<span class="built_in">request</span>, <span class="built_in">response</span>);</div></pre></td></tr></table></figure>
<p>test.jsp<br><figure class="highlight vbscript-html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="xml">普通方式取出存储在request对象中的数据：</span></div><div class="line"><span class="tag">&lt;<span class="name">h3</span> <span class="attr">style</span>=<span class="string">"color:red;"</span>&gt;</span><span class="vbscript">&lt;%=(<span class="built_in">String</span>)<span class="built_in">request</span>.getAttribute(<span class="string">"data"</span>)%&gt;</span><span class="xml"><span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></div><div class="line">EL表达式</div><div class="line"><span class="tag">&lt;<span class="name">h3</span> <span class="attr">style</span>=<span class="string">"color:red;"</span>&gt;</span>$&#123;data&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>请求重定向和请求转发的区别</p>
<p>一个web资源收到客户端请求后，通知服务器调用另外一个web资源进行处理，称之为请求转发/307。<br>一个web资源收到客户端请求后，通知浏览器访问另外一个web资源进行处理，称之为请求重定向/302。</p>
<p>重定向过程：客户浏览器发送http请求-&gt;web服务器接受后发送302响应要求客户浏览器发送一个新的http请求-&gt;客户端浏览器接受此响应后在发送一个新的http请求到服务器-&gt;服务器根据此请求寻找资源并发送给客户，它可以重定向到任意URL，不能共享request范围内的数据。重定向是在客户端的跳转。</p>
<p>转发过程：客户浏览器发送http请求-&gt;web服务器接受此请求后调用内部的一个方法在容器内部完成请求处理和转发动作-&gt;将目标资源发送给客户，它只能在同一个web应用中使用，可以共享request范围内的数据。转发是在服务器端的跳转。</p>
<table>
<thead>
<tr>
<th>头信息</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>Accept</td>
<td>指定 MIME 类型。如 image/jpeg。</td>
</tr>
<tr>
<td>Accept-Charset</td>
<td>指定浏览器显示信息的字符集。如 ISO-8859-1。</td>
</tr>
<tr>
<td>Accept-Encoding</td>
<td>指定浏览器编码类型。如 gzip。</td>
</tr>
<tr>
<td>Accept-Language</td>
<td>指定客户端的首选语言。</td>
</tr>
<tr>
<td>Authorization</td>
<td>客户端在访问受密码保护的网页时识别自己的身份。</td>
</tr>
<tr>
<td>Connection</td>
<td>指示客户端是否可以处理持久 HTTP 连接。持久连接允许客户端通过单个请求来检索多个文件。Keep-Alive 意味着持续连接。</td>
</tr>
<tr>
<td>Content-Length</td>
<td>只适用于 POST 请求，并给出 POST 数据的大小（以字节为单位）。</td>
</tr>
<tr>
<td>Cookie</td>
<td>把之前发送到浏览器的 cookies 返回到服务器。</td>
</tr>
<tr>
<td>Host</td>
<td>指定原始的 URL 中的主机和端口。</td>
</tr>
<tr>
<td>If-Modified-Since</td>
<td>表示只有当页面在指定的日期后已更改时，客户端想要的页面。如果没有新的结果，服务器会发送 304 代码，表示 Not Modified。</td>
</tr>
<tr>
<td>If-Unmodified-Since</td>
<td>If-Modified-Since 的对立面，只有当文档早于指定日期时，操作才会成功。</td>
</tr>
<tr>
<td>Referer</td>
<td>指示所指向的 Web 页的 URL。例如点击一个链接，浏览器请求网页时，网页的 URL 就会包含在 Referer 头信息中。</td>
</tr>
<tr>
<td>User-Agent</td>
<td>识别发出请求的浏览器或其他客户端，并可以向不同类型的浏览器返回不同的内容。</td>
</tr>
</tbody>
</table>

				</div>
				<!-- about -->
				
			</div>
			<!-- pagination -->
			
			<div class="comment-section">
	
	


</div>
		</div>
		
	</div>


		<footer>
			
<p>Powered by <a href="https://hexo.io">Hexo</a> with <a href="https://github.com/wayou/hexo-theme-material">Material</a> theme modified by <b> Huangzhike </b></p>
<p>&copy; 2017 <a href="https://huangzhike.github.io"><b> Huangzhike </b></a></p>
<a id="gotop" href="#" title="back to top"><i class="mdi-hardware-keyboard-arrow-up"></i></a>

		</footer>
	</div>
	<!-- <script src="/libs/bs/js/bootstrap.min.js"></script> -->
	<!-- <script src="//apps.bdimg.com/libs/bootstrap/3.3.4/js/bootstrap.min.js"></script> -->
	<script src="/js/highlight.js"></script> 
	<script>hljs.initHighlightingOnLoad();var timeEnd = new Date();console.log('耗时：' + (timeEnd - timeStart));</script>
	<!-- <script>(typeof $().modal == 'function')|| document.write('<script src="/libs/bs/js/bootstrap.min.js" type="text/javascript"><\/script>')</script>-->
	<!-- material design -->
	<!-- <script src="/libs/bs-material/js/ripples.min.js"></script> -->
	<!-- <script src="//apps.bdimg.com/libs/bootstrap-material/0.3.0/js/ripples.min.js"></script> -->
	<!-- <script src="/libs/bs-material/js/material.min.js"></script> -->
	<!-- <script src="//apps.bdimg.com/libs/bootstrap-material/0.3.0/js/material.min.js"></script>-->
	<!-- toc -->
	<!-- <script src="/libs/tocify/jquery-ui.min.js"></script> -->
	<!-- <script src="//apps.bdimg.com/libs/jqueryui/1.10.4/jquery-ui.min.js"></script> -->
	<!-- <script src="/libs/tocify/jquery.tocify.custom.js"></script> -->
	<!-- <script src="/js/main.js"></script> -->
</body>
</html>
