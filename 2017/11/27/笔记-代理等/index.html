<!DOCTYPE HTML>
<html>
	<head>
		<meta charset="utf-8">
		
		<title>[笔记]-代理等 | 一个放笔记的地方而已</title>
		
		<meta name="author" content="Huangzhike">
		
		
		<meta name="description" content="用手记笔记，用心记笔记，用脑记笔记">
		
		
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
		
		<meta property="og:title" content="[笔记]-代理等"/>
		
		<meta property="og:site_name" content="一个放笔记的地方而已"/>
		
		
		<!-- favicon -->
		<link rel="icon" type="image/ico" href="/favicon.ico" sizes="32x32">
		<link rel="manifest" href="/manifest.json">
		<meta name="msapplication-TileColor" content="#009688">
		<meta name="msapplication-TileImage" content="/mstile-144x144.ico">
		<meta name="theme-color" content="#009688">
		<script>var timeStart = new Date();</script>
		<!-- favicon end -->
		<!-- <link href="//favicon.ico" rel="icon"> -->
		
		<!-- toc -->
		<!-- <link rel="stylesheet" href="/libs/tocify/jquery.tocify.css" media="screen" type="text/css"> -->
		<!-- <link rel="stylesheet" href="/libs/bs/css/bootstrap.min.css" media="screen" type="text/css"> -->
		<!--<link rel="stylesheet" href="//apps.bdimg.com/libs/bootstrap/3.3.4/css/bootstrap.min.css" media="screen" type="text/css">-->
		<!-- material design -->
		<!-- <link rel="stylesheet" href="/libs/bs-material/css/ripples.min.css" media="screen" type="text/css"> -->
		<!-- <link rel="stylesheet" href="//apps.bdimg.com/libs/bootstrap-material/0.3.0/css/ripples.min.css" media="screen" type="text/css"> -->
		<!-- <link rel="stylesheet" href="/libs/bs-material/css/material.min.css" media="screen" type="text/css"> -->
		<!--<link rel="stylesheet" href="//apps.bdimg.com/libs/bootstrap-material/0.3.0/css/material.min.css" media="screen" type="text/css"> -->
		<!--<link rel="stylesheet" href="/css/highlight.light.css" media="screen" type="text/css">-->
		<link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
		
		
		<!-- <script src="//apps.bdimg.com/libs/jquery/2.0.3/jquery.min.js"></script>-->
		<!-- <script>window.jQuery || document.write('<script src="/libs/jquery-3.1.1.slim.min.js" type="text/javascript"><\/script>')</script>-->
	</head>

<body>
	<nav class="navbar navbar-default">
	<div class="container">
		<div class="navbar-header">
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
				<span class="sr-only">菜单</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			<a class="navbar-brand" href="/">一个放笔记的地方而已</a>
           
		</div>
		<div id="navbar" class="collapse navbar-collapse">
			<ul class="nav navbar-nav navbar-right">
				
				<li>
					<a href="https://huangzhike.github.io/" title="">
						<i class="fa fa-home"></i>首页
					</a>
				</li>
				
				<li>
					<a href="https://huangzhike.github.io/archives" title="">
						<i class="fa fa-list"></i>存档
					</a>
				</li>
				
				<li>
					<a href="https://github.com/huangzhike" title="我的主页">
						<i class="fa fa-github"></i>GitHub
					</a>
				</li>
				
			</ul>
		</div>
	</div>
</nav>

	<div class="container" >
		<div class="row">
	
		<div class="col-md-9 center-content">
			
			<div class="content">
				<!-- index -->
				
				<h2>[笔记]-代理等</h2>
				
				<div>
					<span class="post-time">2017-11-27 9:23</span>
				</div>	
				
				<div class="article-content">
				<p>静态代理是指，代理类在程序运行前就已经定义好，其与目标类的关系在程序运行前就已经确立。<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title">IAccountService</span> &#123;</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">transfer</span>(<span class="params"></span>)</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountServiceImpl</span> <span class="keyword">implements</span> <span class="title">IAccountService</span> </span>&#123;</div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">transfer</span><span class="params">()</span> </span>&#123;</div><div class="line"></div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountServiceImplProxy</span> <span class="keyword">implements</span> <span class="title">IAccountService</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="keyword">private</span> IAccountService <span class="keyword">target</span>;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">AccountServiceImplProxy</span><span class="params">()</span> </span>&#123;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">// 业务接口对象作为构造器参数，接收目标对象</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">AccountServiceImplProxy</span><span class="params">(IAccountService <span class="keyword">target</span>)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.<span class="keyword">target</span> = <span class="keyword">target</span>;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">transfer</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="comment">// do sth</span></div><div class="line">		<span class="comment">// 此处为对目标类的增强</span></div><div class="line">		<span class="keyword">target</span>.transfer();</div><div class="line"></div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyTest</span> </span>&#123;</div><div class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		IAccountService <span class="keyword">target</span> = <span class="keyword">new</span> AccountServiceImpl();</div><div class="line">		IAccountService service = <span class="keyword">new</span> AccountServiceImplProxy(<span class="keyword">target</span>);</div><div class="line">		service.transfer();</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>JDK 动态代理<br>动态代理：程序在运行过程中不存在目标类的代理类，目标对象的代理对象只是由代理生成工具（如代理工厂类）在程序运行时由 JVM 根据反射等机制动态生成。<br>代理对象与目标对象的代理关系在程序运行时才确立。<br>对比静态代理，静态代理是指在程序运行前就已经定义好了目标类的代理类。代理类与目标类的代理关系在程序运行之前就确立了。<br>动态代理的实现方式常用的有两种：使用 JDK 的 Proxy，与通过 CGLIB 生成代理。</p>
<p>通过 JDK 的 java.lang.reflect.Proxy 类实现动态代理，会使用其静态方法 newProxyInstance()，依据目标对象、业务接口及业务增强逻辑三者，自动生成一个动态代理对象。<br><code>public static newProxyInstance (ClassLoader loader, Class&lt;?&gt;[] interfaces, InvocationHandler handler)</code></p>
<ul>
<li>loader：目标类的类加载器，通过目标对象的反射可获取</li>
<li>interfaces：目标类实现的接口数组，通过目标对象的反射可获取</li>
<li>handler：业务增强逻辑，需要再定义。<ul>
<li>InvocationHandler 是个接口，实现了接口的类用于加强目标类的主业务逻辑。</li>
<li>接口有一个方法 invoke()，具体加强的代码逻辑定义在该方法中。</li>
<li>程序调用主业务逻辑时，会自动调用 invoke()方法，由代理对象自动调用，三个参数的值不用程序员给出。</li>
<li>invoke()方法：<code>public Object invoke (Object proxy, Method method, Object[] args)</code><ul>
<li>proxy：代表生成的代理对象</li>
<li>method：代表目标方法：Method 类对象，该类有一个 invoke()方法，调用目标类的目标方法。<ul>
<li><code>public Object invoke (Object target, Object... args)</code></li>
<li>target：表示目标对象</li>
<li>args：表示目标方法参数，就是其上一层 invoke 方法的第三个参数</li>
<li>该方法的作用是：调用执行 target 对象所属类的方法，这个方法由其调用者 Method 对象确定。</li>
</ul>
</li>
<li>args：代表目标方法的参数</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyExtension</span> <span class="keyword">implements</span> <span class="title">InvocationHandler</span> </span>&#123;</div><div class="line">	<span class="keyword">private</span> Object <span class="keyword">target</span>;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">MyExtension</span><span class="params">()</span> </span>&#123;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">MyExtension</span><span class="params">(Object <span class="keyword">target</span>)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.<span class="keyword">target</span> = <span class="keyword">target</span>;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="keyword">public</span> <span class="function">Object <span class="title">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable </span>&#123;</div><div class="line">		<span class="comment">// 增加主业务逻辑代码</span></div><div class="line">		System.out.println(<span class="string">""</span>);</div><div class="line">		<span class="comment">// 无论主业务方法有无参数，有无返回值，下面的写法ok</span></div><div class="line">		<span class="function"><span class="keyword">return</span> method.<span class="title">invoke</span><span class="params">(<span class="keyword">target</span>, args)</span></span>;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyTest</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		<span class="comment">// 定义目标对象</span></div><div class="line">		IAccountService <span class="keyword">target</span> = <span class="keyword">new</span> AccountServiceImpl();</div><div class="line"></div><div class="line">		<span class="comment">// 代理对象,并使用目标对象初始化它</span></div><div class="line">		IAccountService.service = (IAccountService) Proxy.newProxyInstance(</div><div class="line">				<span class="keyword">target</span>.getClass().getClassLoader(), <span class="comment">// 获取目标对象的类加载器</span></div><div class="line">				<span class="keyword">target</span>.getClass().getInterfaces(), <span class="comment">// 目标对象实现的所有接口</span></div><div class="line">				<span class="keyword">new</span> MyExtension(<span class="keyword">target</span>)); <span class="comment">// 増强业务逻辑</span></div><div class="line"></div><div class="line">		<span class="comment">// 对目标对象增加过的内容</span></div><div class="line">		service.transfer();</div><div class="line"></div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>CGLIB 动态代理<br>JDK 的 Proxy 实现代理，要求目标类与代理类实现相同的接口。<br>若目标类不存在接口，则无法使用该方式实现。<br>对于无接口的类，要为其创建动态代理，就要使用 CGLIB 来实现。<br>CGLIB 代理的生成原理是生成目标类的子类，而子类是增强过的，这个子类对象就是代理对象。<br>使用CGLIB 生成动态代理，要求目标类必须能够被继承，不能是 final 的类。<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 目标类</span></div><div class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">AccountService</span> &#123;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">transfer</span>(<span class="params"></span>) </span>&#123;</div><div class="line">		<span class="comment">//</span></div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 代理工厂</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountServiceCglibProxyFactory</span> <span class="keyword">implements</span> <span class="title">MethodInterceptor</span> </span>&#123;</div><div class="line">	<span class="comment">// 1. 声明目标类的成员变量，并创建以目标类对象为参数的构造器，接收目标对象</span></div><div class="line">	<span class="comment">// 2. 定义代理的生成方法，用于创建代理对象，代理对象即目标类的子类</span></div><div class="line">	<span class="comment">// 3. 定义回调接口方法，对目标类的增强在这里完成</span></div><div class="line"></div><div class="line">	<span class="keyword">private</span> AccountService <span class="keyword">target</span>;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">AccountServiceCgliProxyFactory</span><span class="params">(AccountService <span class="keyword">target</span>)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.<span class="keyword">target</span> = <span class="keyword">target</span>;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function">AccountService <span class="title">createProxy</span><span class="params">()</span> </span>&#123;</div><div class="line">		Enhancer enhancer = <span class="keyword">new</span> Enhancer();</div><div class="line">		enhancer.setSuperClass(AccountService.class);</div><div class="line">		enhancer.setCallback(<span class="keyword">this</span>);</div><div class="line">		<span class="keyword">return</span> (AccountService) enhancer.create();</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="keyword">public</span> <span class="function">Object <span class="title">intercept</span><span class="params">(Object proxy, Method method, Object[] args, MethodProxy methodProxy)</span> </span></div><div class="line">			<span class="keyword">throws</span> Throwable &#123;</div><div class="line">		<span class="comment">// 若为transfer方法，则进行増强</span></div><div class="line">		<span class="keyword">if</span> (<span class="string">"transfer"</span>.equals(method.getName())) &#123;</div><div class="line">			System.out.println(<span class="string">"开始"</span>);</div><div class="line">			<span class="comment">// 调用目标类业务方法方式一：通过调用代理类即目标类的子类的父类方法执行</span></div><div class="line">			<span class="comment">// Object result = methodProxy.invokeSuper(proxy, args);</span></div><div class="line">			<span class="comment">// 调用目标类业务方法方式二：直接调用目标对象的业务方法执行。</span></div><div class="line">			Object result = method.invoke(<span class="keyword">target</span>, args);</div><div class="line">			System.out.println(<span class="string">"结束时"</span>);</div><div class="line">			<span class="keyword">return</span> result;</div><div class="line">		&#125;</div><div class="line">		<span class="comment">// 其它方法不増强，则执行目标类的业务方式，即代理类的父类业务方法</span></div><div class="line">		<span class="comment">// return methodProxy.invokeSuper(proxy, args);</span></div><div class="line">		<span class="function"><span class="keyword">return</span> method.<span class="title">invoke</span><span class="params">(<span class="keyword">target</span>, args)</span></span>;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>在 setCallback()方法中可以写上 this，是因为 MethodIntecepter 接口继承自 Callback，是其子接口。</p>
<p>intercept()方法中各参数的意义：</p>
<ul>
<li>proxy：代理对象</li>
<li>metho：代理对象的方法，即增强过的业务方法</li>
<li>args[]：方法参数</li>
<li>methodProxy：代理对象方法的代理对象</li>
</ul>
<p>回调设计模式<br>类 A 调用类 B 中的某个方法 b，然后类 B 又在某个时候反过来调用类 A 中的某个方法 a。<br>对于 A 来说，这个 a 方法便叫做回调方法。<br>定义一个简单的接口，在接口之中定义一个希望回调的方法。<br>这个接口称为回调接口。<br>前面定义的 AccountServiceCglibProxyFactory 类就相当于前面所说的 A 类，而 Enhancer 类则是 B 类。<br>A 类中调用了 Enhancer 类的 setCallback(this)方法，并将回调对象 this 作为实参传递给了 Enhancer 类。<br>Enhancer 类在后续执行过程中，会调用 A 类中的 intercept()方法，这个 intercept()方法就是回调方法。</p>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">	AccountService <span class="keyword">target</span> = <span class="keyword">new</span> AccountService();</div><div class="line">	AccountService service = <span class="keyword">new</span> AccountServiceCglibProxyFactory(<span class="keyword">target</span>).createProxy();</div><div class="line">	service.transfer();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>完成某件事情需要 n 多个固定步骤。<br>如“在淘宝网进行购物”这件事情的完成一般需要三个步骤：登录网站、挑选商品、付款。<br>但对于登录网站与付款这两步，每个人几乎都是相同的操作。<br>不同的地方是，每个人所挑选的商品是不同的。<br>某类的某个方法的实现，需要几个固定步骤。<br>在这些固定步骤中，对于该类的不同对象，有些步骤的实现是固定不变的，有些步骤的实现是大相径庭的，有些步骤的实现是可变可不变的。<br>这种情况适合使用模板方法设计模式。<br>模板方法设计模式的定义是：定义一个操作中某种算法的框架，而将一些步骤延迟到子类中。</p>
<p>在模板方法设计模式中，存在一个父类。<br>其中包含两类方法：模板方法与步骤方法。</p>
<ul>
<li>模板方法，即实现某种算法的方法步骤。而这些步骤都是调用的步骤方法完成的。</li>
<li>步骤方法，即完成模板方法的每个阶段性方法。每个步骤方法完成某一特定的、完成总算法的一部分功能。</li>
<li>步骤方法有三种类型：<ul>
<li>抽象方法，是要求子类必须实现的方法，是完成模板方法的算法步骤中必须由子类完成的个性化定义。</li>
<li>最终方法，是子类不能重写的方法，是若要完成模板方法的算法步骤，对于所有子类执行都一样的步骤。</li>
<li>钩子方法，是父类给出了默认实现，但子类也可以重写的方法。</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">ShoppingService</span> </span>&#123;</div><div class="line">	<span class="comment">// 模版方法</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">shopping</span><span class="params">()</span> </span>&#123;</div><div class="line">		login();</div><div class="line">		choose();</div><div class="line">		pay();</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">// 子类不能重写</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">login</span><span class="params">()</span> </span>&#123;</div><div class="line"></div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">// 子类必须实现</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">choose</span><span class="params">()</span></span>;</div><div class="line"></div><div class="line">	<span class="comment">// 钩子方法：子类可以重写</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">pay</span><span class="params">()</span> </span>&#123;</div><div class="line"></div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">public <span class="class"><span class="keyword">class</span> <span class="title">ShoseShoppingService</span> <span class="keyword">extends</span> <span class="title">ShoppingService</span> </span>&#123;</div><div class="line">	<span class="meta">@Override</span></div><div class="line">	public void choose() &#123;</div><div class="line"></div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">public <span class="class"><span class="keyword">class</span> <span class="title">DressShoppingService</span> <span class="keyword">extends</span> <span class="title">ShoppingService</span> </span>&#123;</div><div class="line">	<span class="meta">@Override</span></div><div class="line">	public void choose() &#123;</div><div class="line"></div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="meta">@Override</span></div><div class="line">	public void pay() &#123;</div><div class="line"></div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
				</div>
				<!-- about -->
				
			</div>
			<!-- pagination -->
			
			<div class="comment-section">
	
	


</div>
		</div>
		
	</div>


		<footer>
			
<p>Powered by <a href="https://hexo.io">Hexo</a> with <a href="https://github.com/wayou/hexo-theme-material">Material</a> theme modified by <b> Huangzhike </b></p>
<p>&copy; 2017 <a href="https://huangzhike.github.io"><b> Huangzhike </b></a></p>
<a id="gotop" href="#" title="back to top"><i class="mdi-hardware-keyboard-arrow-up"></i></a>

		</footer>
	</div>
	<!-- <script src="/libs/bs/js/bootstrap.min.js"></script> -->
	<!-- <script src="//apps.bdimg.com/libs/bootstrap/3.3.4/js/bootstrap.min.js"></script> -->
	<script src="/js/highlight.js"></script> 
	<script>hljs.initHighlightingOnLoad();var timeEnd = new Date();console.log('耗时：' + (timeEnd - timeStart));</script>
	<!-- <script>(typeof $().modal == 'function')|| document.write('<script src="/libs/bs/js/bootstrap.min.js" type="text/javascript"><\/script>')</script>-->
	<!-- material design -->
	<!-- <script src="/libs/bs-material/js/ripples.min.js"></script> -->
	<!-- <script src="//apps.bdimg.com/libs/bootstrap-material/0.3.0/js/ripples.min.js"></script> -->
	<!-- <script src="/libs/bs-material/js/material.min.js"></script> -->
	<!-- <script src="//apps.bdimg.com/libs/bootstrap-material/0.3.0/js/material.min.js"></script>-->
	<!-- toc -->
	<!-- <script src="/libs/tocify/jquery-ui.min.js"></script> -->
	<!-- <script src="//apps.bdimg.com/libs/jqueryui/1.10.4/jquery-ui.min.js"></script> -->
	<!-- <script src="/libs/tocify/jquery.tocify.custom.js"></script> -->
	<!-- <script src="/js/main.js"></script> -->
</body>
</html>
