<!DOCTYPE HTML>
<html>
	<head><meta name="generator" content="Hexo 3.9.0">
		<meta charset="utf-8">
		<script src="/js/highlight.js"></script>
				<script>hljs.initHighlightingOnLoad();var timeStart = new Date();</script>
		
		<title>[笔记]-Spring-IoC | 一个放笔记的地方而已</title>
		
		<meta name="author" content="Huangzhike">
		
		
		<meta name="description" content="K.I.S.S">
		
		
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
		
		<meta property="og:title" content="[笔记]-Spring-IoC">
		
		<meta property="og:site_name" content="一个放笔记的地方而已">
		
		
		<!-- favicon -->
		<link rel="icon" type="image/ico" href="/ok.ico" sizes="32x32">
 


		<meta name="msapplication-TileColor" content="#009688">
		<meta name="msapplication-TileImage" content="/mstile-144x144.ico">
		<meta name="theme-color" content="#009688">

    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Didact+Gothic"> 

		<!-- favicon end -->
		<!-- <link href="//ok.ico" rel="icon"> -->
		
		<!-- toc -->
		<!-- <link rel="stylesheet" href="/libs/tocify/jquery.tocify.css" media="screen" type="text/css"> -->
		<!-- <link rel="stylesheet" href="/libs/bs/css/bootstrap.min.css" media="screen" type="text/css"> -->
		<!--<link rel="stylesheet" href="//apps.bdimg.com/libs/bootstrap/3.3.4/css/bootstrap.min.css" media="screen" type="text/css">-->
		<!-- material design -->
		<!-- <link rel="stylesheet" href="/libs/bs-material/css/ripples.min.css" media="screen" type="text/css"> -->
		<!-- <link rel="stylesheet" href="//apps.bdimg.com/libs/bootstrap-material/0.3.0/css/ripples.min.css" media="screen" type="text/css"> -->
		<!-- <link rel="stylesheet" href="/libs/bs-material/css/material.min.css" media="screen" type="text/css"> -->
		<!--<link rel="stylesheet" href="//apps.bdimg.com/libs/bootstrap-material/0.3.0/css/material.min.css" media="screen" type="text/css"> -->
		<!--<link rel="stylesheet" href="/css/highlight.light.css" media="screen" type="text/css">-->
		<link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
		 
		 
		<!-- <script src="//apps.bdimg.com/libs/jquery/2.0.3/jquery.min.js"></script>-->
		<!-- <script>window.jQuery || document.write('<script src="/libs/jquery-3.1.1.slim.min.js" type="text/javascript"><\/script>')</script>-->
	</head>
</html>
<body>
	<nav class="navbar navbar-default">
	<div class="container">
		<div class="navbar-header">
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
				<span class="sr-only">菜单</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			<a class="navbar-brand" href="/">一个放笔记的地方而已</a>
           
		</div>
		<div id="navbar" class="collapse navbar-collapse">
			<ul class="nav navbar-nav navbar-right">
				
				<li>
					<a href="https://huangzhike.github.io/" title="">
						<i class="fa fa-home"></i>Index
					</a>
				</li>
				
				<li>
					<a href="https://huangzhike.github.io/archives" title="">
						<i class="fa fa-list"></i>Archives
					</a>
				</li>
				
				<li>
					<a href="https://github.com/huangzhike" title="">
						<i class="fa fa-github"></i>GitHub
					</a>
				</li>
				
			</ul>
		</div>
	</div>
</nav>

	<div class="container" >
		<div class="row">
	
		<div class="col-md-9 center-content">
			
			<div class="content">
				<!-- index -->
				
				<h2>[笔记]-Spring-IoC</h2>
				
				<div>
					<div class="post-time">2017-11-25</div>
				</div>
				
				<div class="article-content">
				<p><strong>12-27重新整理更新Spring笔记</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 空字符串 --&gt;</span><br><span class="line">&lt;bean id=&quot;...&quot; class=&quot;exampleBean&quot;&gt;</span><br><span class="line">	&lt;property name=&quot;email&quot; value=&quot;&quot;/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- NULL值，相当于：exampleBean.setEmail(null) --&gt;</span><br><span class="line">&lt;bean id=&quot;...&quot; class=&quot;exampleBean&quot;&gt;</span><br><span class="line">	&lt;property name=&quot;email&quot;&gt;&lt;null/&gt;&lt;/property&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">package mmp.common;</span><br><span class="line"></span><br><span class="line">public class Customer &#123;</span><br><span class="line">	private Person person;</span><br><span class="line"></span><br><span class="line">	public Customer(Person person) &#123;</span><br><span class="line">		this.person = person;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	public void setPerson(Person person) &#123;</span><br><span class="line">		this.person = person;</span><br><span class="line">	&#125;</span><br><span class="line">	// ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">package mmp.common;</span><br><span class="line"></span><br><span class="line">public class Person &#123;</span><br><span class="line">	// ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id=&quot;customer&quot; class=&quot;mmp.common.Customer&quot;&gt;</span><br><span class="line">	&lt;property name=&quot;person&quot; ref=&quot;person&quot;/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">&lt;bean id=&quot;person&quot; class=&quot;mmp.common.Person&quot;/&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 启用autowire ，自动装配Bean --&gt;</span><br><span class="line">&lt;!-- 自动通过setter方法 --&gt;</span><br><span class="line">&lt;bean id=&quot;customer&quot; class=&quot;mmp.common.Customer&quot; autowire=&quot;byName&quot;/&gt;</span><br><span class="line">&lt;bean id=&quot;person&quot; class=&quot;mmp.common.Person&quot;/&gt;</span><br></pre></td></tr></table></figure>
<p>自动装配</p>
<ul>
<li>no：缺省情况下，通过<code>ref</code>属性手动设定</li>
<li>byName：略</li>
<li>byType：略</li>
<li>constructor：在构造函数参数的byType方式</li>
<li>autodetect：如果找到默认的构造函数，用构造自动装配，否则按类型自动装配</li>
</ul>
<p>setter注入<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id=&quot;bean&quot; class=&quot;mmp.SomeClass&quot;&gt;</span><br><span class="line">	&lt;property name=&quot;message&quot; value=&quot;Hello World!&quot;/&gt;</span><br><span class="line">	&lt;property name=&quot;index&quot;&gt;</span><br><span class="line">		&lt;value&gt;1&lt;/value&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure></p>
<p>构造器注入<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--默认构造参数--&gt;</span><br><span class="line">&lt;bean name=&quot;default&quot; class=&quot;mmp.SomeClass&quot;/&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--有参数构造参数--&gt;</span><br><span class="line">&lt;!-- 构造器参数索引 --&gt;</span><br><span class="line">&lt;bean id=&quot;byIndexI&quot; class=&quot;mmp.SomeClass&quot;&gt;</span><br><span class="line">	&lt;constructor-arg index=&quot;0&quot; value=&quot;Hello World!&quot;/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br><span class="line">&lt;!-- 构造器参数类型 --&gt;</span><br><span class="line">&lt;bean id=&quot;byTypeI&quot; class=&quot;mmp.SomeClass&quot;&gt;</span><br><span class="line">	&lt;constructor-arg type=&quot;java.lang.String&quot; value=&quot;Hello World!&quot;/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br><span class="line">&lt;!-- 构造器参数名 --&gt;</span><br><span class="line">&lt;bean id=&quot;byNameI&quot; class=&quot;mmp.SomeClass&quot;&gt;</span><br><span class="line">	&lt;constructor-arg name=&quot;message&quot; value=&quot;Hello World!&quot;/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure></p>
<p>正常<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id=&quot;textEditor&quot; class=&quot;mmp.TextEditor&quot;&gt;</span><br><span class="line">	&lt;constructor-arg ref=&quot;spellChecker&quot;/&gt;</span><br><span class="line">	&lt;constructor-arg value=&quot;Generic Text Editor&quot;/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">&lt;bean id=&quot;spellChecker&quot; class=&quot;mmp.SpellChecker&quot;/&gt;</span><br></pre></td></tr></table></figure></p>
<p>自动装配<code>by constructor</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id=&quot;textEditor&quot; class=&quot;mmp.TextEditor&quot; autowire=&quot;constructor&quot;&gt;</span><br><span class="line">	&lt;constructor-arg value=&quot;Generic Text Editor&quot;/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">&lt;bean id=&quot;SpellChecker&quot; class=&quot;mmp.SpellChecker&quot;&gt;&lt;/bean&gt;</span><br></pre></td></tr></table></figure></p>
<p>构造方法注入类型歧义</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">package mmp.common;</span><br><span class="line"></span><br><span class="line">public class Customer &#123;</span><br><span class="line">	// ...</span><br><span class="line">	public Customer(String name, String address, int age) &#123;&#125;</span><br><span class="line">	public Customer(String name, int age, String address) &#123;&#125;</span><br><span class="line">	// ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 第一个构造器不执行，第二构造函数运行 --&gt;</span><br><span class="line">&lt;bean id=&quot;CustomerBean&quot; class=&quot;mmp.common.Customer&quot;&gt;</span><br><span class="line">	&lt;constructor-arg value=&quot;mdzz&quot;/&gt;</span><br><span class="line">	&lt;constructor-arg value=&quot;188&quot;/&gt;</span><br><span class="line">	&lt;constructor-arg value=&quot;28&quot;/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 应该指定类型 --&gt;</span><br><span class="line">&lt;bean id=&quot;CustomerBean&quot; class=&quot;mmp.common.Customer&quot;&gt;</span><br><span class="line">	&lt;constructor-arg type=&quot;java.lang.String&quot;&gt;</span><br><span class="line">		&lt;value&gt;mdzz&lt;/value&gt;</span><br><span class="line">	&lt;/constructor-arg&gt;</span><br><span class="line">	&lt;constructor-arg type=&quot;java.lang.String&quot;&gt;</span><br><span class="line">		&lt;value&gt;188&lt;/value&gt;</span><br><span class="line">	&lt;/constructor-arg&gt;</span><br><span class="line">	&lt;constructor-arg type=&quot;int&quot;&gt;</span><br><span class="line">		&lt;value&gt;28&lt;/value&gt;</span><br><span class="line">	&lt;/constructor-arg&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>
<p>boolean类型除了可以用<code>true/false</code>注入，还能用<code>yes/no</code>、<code>on/off</code>、<code>1/0</code>代表真/假。</p>
<p>内部bean支持setter注入<code>&lt;property&gt;</code>和构造器注入<code>&lt;constructor-arg&gt;</code>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id=&quot;customerA&quot; class=&quot;mmp.common.Customer&quot;&gt;</span><br><span class="line">	&lt;property name=&quot;person&quot;&gt;</span><br><span class="line">		&lt;bean class=&quot;mmp.common.Person&quot;&gt;</span><br><span class="line">			&lt;property name=&quot;name&quot; value=&quot;mdzz&quot;/&gt;</span><br><span class="line">		&lt;/bean&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line">&lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">&lt;bean id=&quot;customerB&quot; class=&quot;mmp.common.Customer&quot;&gt;</span><br><span class="line">	&lt;constructor-arg&gt;</span><br><span class="line">		&lt;bean class=&quot;mmp.common.Person&quot;&gt;</span><br><span class="line">			&lt;property name=&quot;name&quot; value=&quot;mdzz&quot;/&gt;</span><br><span class="line">		&lt;/bean&gt;</span><br><span class="line">	&lt;/constructor-arg&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>
<p>SPEL注入</p>
<p>Spring Expression Language，SpringEL表达式语言。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 引用另一个bean，指定school的值为另一个Bean实例mySchool --&gt;</span><br><span class="line">&lt;property name=&quot;school&quot; value=&quot;#&#123;mySchool&#125;&quot;/&gt;</span><br><span class="line"></span><br><span class="line">&lt;property name=&quot;schoolName&quot; value=&quot;#&#123;mySchool.name.toUpperCase()&#125;&quot;/&gt;</span><br></pre></td></tr></table></figure></p>
<p>在不同XML文件中的bean，用<code>ref</code>标签，<code>bean</code>属性引用它。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id=&quot;OutputHelper&quot; class=&quot;mmp.output.OutputHelper&quot;&gt;</span><br><span class="line">	&lt;property name=&quot;outputGenerator&quot;&gt;</span><br><span class="line">		&lt;ref bean=&quot;CsvOutputGenerator&quot;/&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure></p>
<p>在同一个XML文件中的bean，用<code>ref</code>标签，<code>local</code>属性引用它。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id=&quot;OutputHelper&quot; class=&quot;mmp.output.OutputHelper&quot;&gt;</span><br><span class="line">	&lt;property name=&quot;outputGenerator&quot;&gt;</span><br><span class="line">		&lt;ref local=&quot;CsvOutputGenerator&quot;/&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure></p>
<p>三种方式注入值到 bean 属性。</p>
<ul>
<li>正常的方式</li>
<li>快捷方式</li>
<li>“p”模式</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id=&quot;john-classic&quot; class=&quot;mmp.Person&quot;&gt;</span><br><span class="line">	&lt;property name=&quot;name&quot; value=&quot;John Doe&quot;/&gt;</span><br><span class="line">	&lt;property name=&quot;spouse&quot; ref=&quot;jane&quot;/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean name=&quot;jane&quot; class=&quot;mmp.Person&quot;&gt;</span><br><span class="line">	&lt;property name=&quot;name&quot;&gt;</span><br><span class="line">		&lt;value&gt;John Doe&lt;/value&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 声明 xmlns:p=”http://www.springframework.org/schema/p&quot; --&gt;</span><br><span class="line">&lt;bean id=&quot;john-classic&quot; class=&quot;mmp.Person&quot; p:name=&quot;John Doe&quot; p:spouse-ref=&quot;jane&quot;/&gt;</span><br><span class="line">&lt;bean name=&quot;jane&quot; class=&quot;mmp.Person&quot; p:name=&quot;John Doe&quot;/&gt;</span><br></pre></td></tr></table></figure>
<p>bean配置继承<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id=&quot;BaseCustomerMalaysia&quot; class=&quot;mmp.common.Customer&quot;&gt;</span><br><span class="line">	&lt;property name=&quot;country&quot; value=&quot;Malaysia&quot;/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">&lt;bean id=&quot;CustomerBean&quot; parent=&quot;BaseCustomerMalaysia&quot;&gt;</span><br><span class="line">	&lt;property name=&quot;action&quot; value=&quot;buy&quot;/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure></p>
<p>CustomerBean继承其父BaseCustomerMalaysia country属性。</p>
<p>上例父bean仍能实例化：<code>Customer cust = (Customer)context.getBean(&quot;BaseCustomerMalaysia&quot;);</code></p>
<p>如果不允许实例化：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id=&quot;BaseCustomerMalaysia&quot; class=&quot;mmp.common.Customer&quot; abstract=&quot;true&quot;&gt;</span><br><span class="line">	&lt;property name=&quot;country&quot; value=&quot;Malaysia&quot;/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">&lt;bean id=&quot;CustomerBean&quot; parent=&quot;BaseCustomerMalaysia&quot;&gt;</span><br><span class="line">	&lt;property name=&quot;action&quot; value=&quot;buy&quot;/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>
<p>纯继承模板：父bean不需要定义类的属性，可能只需要一个共同的属性共享。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id=&quot;BaseCustomerMalaysia&quot; abstract=&quot;true&quot;&gt;</span><br><span class="line">	&lt;property name=&quot;country&quot; value=&quot;Malaysia&quot;/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">&lt;bean id=&quot;CustomerBean&quot; parent=&quot;BaseCustomerMalaysia&quot; class=&quot;mmp.common.Customer&quot;&gt;</span><br><span class="line">	&lt;property name=&quot;action&quot; value=&quot;buy&quot;/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>
<p>子bean的新值覆盖继承的值。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id=&quot;BaseCustomerMalaysia&quot; class=&quot;mmp.common.Customer&quot; abstract=&quot;true&quot;&gt;</span><br><span class="line">	&lt;property name=&quot;country&quot; value=&quot;Malaysia&quot;/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">&lt;bean id=&quot;CustomerBean&quot; parent=&quot;BaseCustomerMalaysia&quot;&gt;</span><br><span class="line">	&lt;property name=&quot;country&quot; value=&quot;Japan&quot;/&gt;</span><br><span class="line">	&lt;property name=&quot;action&quot; value=&quot;buy&quot;/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>
<p>一个Customer对象，有四个集合属性。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">package mmp.common;</span><br><span class="line"></span><br><span class="line">public class Customer &#123;</span><br><span class="line">	private List&lt;Object&gt; lists;</span><br><span class="line">	private Set&lt;Object&gt; sets;</span><br><span class="line">	private Map&lt;Object, Object&gt; maps;</span><br><span class="line">	private Properties pros;</span><br><span class="line"></span><br><span class="line">	// ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id=&quot;PersonBean&quot; class=&quot;mmp.common.Person&quot;&gt;</span><br><span class="line">	&lt;property name=&quot;name&quot; value=&quot;mdzz1&quot;/&gt;</span><br><span class="line">	&lt;property name=&quot;address&quot; value=&quot;Hainan Haikou 1&quot;/&gt;</span><br><span class="line"></span><br><span class="line">&lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">&lt;bean id=&quot;CustomerBean&quot; class=&quot;mmp.common.Customer&quot;&gt;</span><br><span class="line">	&lt;!-- java.util.List --&gt;</span><br><span class="line">	&lt;property name=&quot;lists&quot;&gt;</span><br><span class="line">		&lt;list&gt;</span><br><span class="line">			&lt;value&gt;1&lt;/value&gt;</span><br><span class="line">			&lt;ref bean=&quot;PersonBean&quot;/&gt;</span><br><span class="line">			&lt;bean class=&quot;mmp.common.Person&quot;&gt;</span><br><span class="line">				&lt;property name=&quot;name&quot; value=&quot;mdzzList&quot;/&gt;</span><br><span class="line">				&lt;property name=&quot;address&quot; value=&quot;Hainan Haikou&quot;/&gt;</span><br><span class="line">			&lt;/bean&gt;</span><br><span class="line">		&lt;/list&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line"></span><br><span class="line">	&lt;!-- java.util.Set --&gt;</span><br><span class="line">	&lt;property name=&quot;sets&quot;&gt;</span><br><span class="line">		&lt;set&gt;</span><br><span class="line">			&lt;value&gt;1&lt;/value&gt;</span><br><span class="line">			&lt;ref bean=&quot;PersonBean&quot;/&gt;</span><br><span class="line">			&lt;bean class=&quot;mmp.common.Person&quot;&gt;</span><br><span class="line">				&lt;property name=&quot;name&quot; value=&quot;mdzzSet&quot;/&gt;</span><br><span class="line">				&lt;property name=&quot;address&quot; value=&quot;Hainan Haikou&quot;/&gt;</span><br><span class="line">			&lt;/bean&gt;</span><br><span class="line">		&lt;/set&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line"></span><br><span class="line">	&lt;!-- java.util.Map --&gt;</span><br><span class="line">	&lt;property name=&quot;maps&quot;&gt;</span><br><span class="line">		&lt;map&gt;</span><br><span class="line">			&lt;entry key=&quot;Key 1&quot; value=&quot;1&quot;/&gt;</span><br><span class="line">			&lt;entry key=&quot;Key 2&quot; value-ref=&quot;PersonBean&quot;/&gt;</span><br><span class="line">			&lt;entry key=&quot;Key 3&quot;&gt;</span><br><span class="line">				&lt;bean class=&quot;mmp.common.Person&quot;&gt;</span><br><span class="line">					&lt;property name=&quot;name&quot; value=&quot;mdzzMap&quot;/&gt;</span><br><span class="line">					&lt;property name=&quot;address&quot; value=&quot;Hainan Haikou&quot;/&gt;</span><br><span class="line">				&lt;/bean&gt;</span><br><span class="line">			&lt;/entry&gt;</span><br><span class="line">		&lt;/map&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line"></span><br><span class="line">	&lt;!-- java.util.Properties --&gt;</span><br><span class="line">	&lt;property name=&quot;pros&quot;&gt;</span><br><span class="line">		&lt;props&gt;</span><br><span class="line">			&lt;prop key=&quot;admin&quot;&gt;admin@mdzz.com&lt;/prop&gt;</span><br><span class="line">			&lt;prop key=&quot;support&quot;&gt;support@mdzz.com&lt;/prop&gt;</span><br><span class="line">		&lt;/props&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>
<p>ListFactoryBean<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">package mmp.common;</span><br><span class="line"></span><br><span class="line">public class Customer &#123;</span><br><span class="line">	private List lists;</span><br><span class="line">	private Map maps;</span><br><span class="line">	// ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id=&quot;CustomerBean&quot; class=&quot;mmp.common.Customer&quot;&gt;</span><br><span class="line">	&lt;property name=&quot;lists&quot;&gt;</span><br><span class="line">		&lt;bean class=&quot;org.springframework.beans.factory.config.ListFactoryBean&quot;&gt;</span><br><span class="line">			&lt;property name=&quot;targetListClass&quot;&gt;</span><br><span class="line">				&lt;value&gt;java.util.ArrayList&lt;/value&gt;</span><br><span class="line">			&lt;/property&gt;</span><br><span class="line">			&lt;property name=&quot;sourceList&quot;&gt;</span><br><span class="line">				&lt;list&gt;</span><br><span class="line">					&lt;value&gt;one&lt;/value&gt;</span><br><span class="line">					&lt;value&gt;2&lt;/value&gt;</span><br><span class="line">					&lt;value&gt;three&lt;/value&gt;</span><br><span class="line">				&lt;/list&gt;</span><br><span class="line">			&lt;/property&gt;</span><br><span class="line">		&lt;/bean&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>
<p><code>&lt;util:list&gt;</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;</span><br><span class="line">	xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; </span><br><span class="line">	xmlns:util=&quot;http://www.springframework.org/schema/util&quot;</span><br><span class="line">	xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans</span><br><span class="line">		http://www.springframework.org/schema/beans/spring-beans-2.5.xsd</span><br><span class="line">		http://www.springframework.org/schema/util</span><br><span class="line">		http://www.springframework.org/schema/util/spring-util-2.5.xsd&quot;&gt;</span><br><span class="line"></span><br><span class="line">	&lt;bean id=&quot;CustomerBean&quot; class=&quot;mmp.common.Customer&quot;&gt;</span><br><span class="line">		&lt;property name=&quot;lists&quot;&gt;</span><br><span class="line">			&lt;util:list list-class=&quot;java.util.ArrayList&quot;&gt;</span><br><span class="line">				&lt;value&gt;one&lt;/value&gt;</span><br><span class="line">				&lt;value&gt;2&lt;/value&gt;</span><br><span class="line">				&lt;value&gt;three&lt;/value&gt;</span><br><span class="line">			&lt;/util:list&gt;</span><br><span class="line">		&lt;/property&gt;</span><br><span class="line">	&lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">&lt;/beans&gt;</span><br></pre></td></tr></table></figure>
<p>SetFactoryBean（略）</p>
<p>MapFactoryBean<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id=&quot;CustomerBean&quot; class=&quot;mmp.common.Customer&quot;&gt;</span><br><span class="line">	&lt;property name=&quot;maps&quot;&gt;</span><br><span class="line">		&lt;bean class=&quot;org.springframework.beans.factory.config.MapFactoryBean&quot;&gt;</span><br><span class="line">			&lt;property name=&quot;targetMapClass&quot;&gt;</span><br><span class="line">				&lt;value&gt;java.util.HashMap&lt;/value&gt;</span><br><span class="line">			&lt;/property&gt;</span><br><span class="line">			&lt;property name=&quot;sourceMap&quot;&gt;</span><br><span class="line">				&lt;map&gt;</span><br><span class="line">					&lt;entry key=&quot;Key1&quot; value=&quot;one&quot;/&gt;</span><br><span class="line">					&lt;entry key=&quot;Key2&quot; value=&quot;two&quot;/&gt;</span><br><span class="line">					&lt;entry key=&quot;Key3&quot; value=&quot;three&quot;/&gt;</span><br><span class="line">				&lt;/map&gt;</span><br><span class="line">			&lt;/property&gt;</span><br><span class="line">		&lt;/bean&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure></p>
<p><code>&lt;util:map&gt;</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id=&quot;CustomerBean&quot; class=&quot;mmp.common.Customer&quot;&gt;</span><br><span class="line">	&lt;property name=&quot;maps&quot;&gt;</span><br><span class="line">		&lt;util:map map-class=&quot;java.util.HashMap&quot;&gt;</span><br><span class="line">			&lt;entry key=&quot;Key1&quot; value=&quot;1&quot;/&gt;</span><br><span class="line">			&lt;entry key=&quot;Key2&quot; value=&quot;2&quot;/&gt;</span><br><span class="line">			&lt;entry key=&quot;Key3&quot; value=&quot;3&quot;/&gt;</span><br><span class="line">		&lt;/util:map&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure></p>
<p>数组、集合、字典类型的ByType自动装配和普通类型是有区别的：</p>
<ul>
<li><p>数组类型、集合（Set、Collection、List）接口类型：</p>
<ul>
<li>根据泛型获取匹配的所有候选者并注入到数组或集合中<ul>
<li>如<code>List&lt;HelloApi&gt; list</code>将选择所有的HelloApi类型Bean并注入到list中</li>
</ul>
</li>
<li>而对于集合的具体类型将只选择一个候选者<ul>
<li>如 <code>ArrayList&lt;HelloApi&gt; list</code>将选择一个类型为ArrayList的Bean注入，而不是选择所有的HelloApi类型Bean注入</li>
</ul>
</li>
</ul>
</li>
<li><p>字典（Map）接口类型：</p>
<ul>
<li>同样根据泛型信息注入，键必须为String类型的Bean名字，值根据泛型信息获取<ul>
<li>如<code>Map&lt;String, HelloApi&gt; map</code> 将选择所有的HelloApi类型Bean并注入到map中</li>
</ul>
</li>
<li>而对于具体字典类型<ul>
<li>如<code>HashMap&lt;String, HelloApi&gt; map</code>将只选择类型为HashMap的Bean注入，而不是选择所有的HelloApi类型Bean注入</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>注入日期到bean属性</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">package mmp.common;</span><br><span class="line"></span><br><span class="line">public class Customer &#123;</span><br><span class="line">	Date date;</span><br><span class="line">	// ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id=&quot;customer&quot; class=&quot;mmp.common.Customer&quot;&gt;</span><br><span class="line">	&lt;!-- 错误 --&gt;</span><br><span class="line">	&lt;property name=&quot;date&quot; value=&quot;2018-12-31&quot;/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>
<p>两种方式注入日期：</p>
<ul>
<li>CustomDateEditor</li>
<li>Factory bean<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 声明一个dateFormat bean --&gt;</span><br><span class="line">&lt;bean id=&quot;dateFormat&quot; class=&quot;java.text.SimpleDateFormat&quot;&gt;</span><br><span class="line">	&lt;constructor-arg value=&quot;yyyy-MM-dd&quot;/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">&lt;bean id=&quot;customer&quot; class=&quot;mmp.common.Customer&quot;&gt;</span><br><span class="line">	&lt;property name=&quot;date&quot;&gt;</span><br><span class="line">		&lt;!-- 引用dateFormat bean作为工厂bean，调用SimpleDateFormat.parse()自动转换成字符串Date对象 --&gt;</span><br><span class="line">		&lt;bean factory-bean=&quot;dateFormat&quot; factory-method=&quot;parse&quot;&gt;</span><br><span class="line">			&lt;constructor-arg value=&quot;2018-12-31&quot;/&gt;</span><br><span class="line">		&lt;/bean&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>两种方式启用<code>@Autowired</code>：</p>
<ul>
<li><p>添加Spring上下文和<code>&lt;context:annotation-config/&gt;</code></p>
</li>
<li><p>直接包含<code>AutowiredAnnotationBeanPostProcessor</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean class=&quot;org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor&quot;/&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><code>@Autowired</code>自动装配bean，可以在setter方法，构造函数或字段中使用。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">package mmp.common;</span><br><span class="line"></span><br><span class="line">public class Customer &#123;</span><br><span class="line">	@Autowired</span><br><span class="line">	private Person person;</span><br><span class="line"></span><br><span class="line">	@Autowired</span><br><span class="line">	public Customer(Person person) &#123;</span><br><span class="line">		this.person = person;</span><br><span class="line">	&#125;</span><br><span class="line">	// ...</span><br><span class="line"></span><br><span class="line">	@Autowired</span><br><span class="line">	public void setPerson(Person person) &#123;</span><br><span class="line">		this.person = person;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>依赖检查：无法找到匹配的Bean装配，会抛出异常。<code>@Autowired</code>的<code>required = false</code>禁用。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">package mmp.common;</span><br><span class="line"></span><br><span class="line">public class Customer &#123;</span><br><span class="line">	@Autowired(required = false)</span><br><span class="line">	private Person person;</span><br><span class="line"></span><br><span class="line">	// getter and setter</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">package mmp.common;</span><br><span class="line"></span><br><span class="line">public class Customer &#123;</span><br><span class="line">	private Person person;</span><br><span class="line"></span><br><span class="line">	public Person getPerson() &#123;</span><br><span class="line">		return person;</span><br><span class="line">	&#125;</span><br><span class="line">	@Required</span><br><span class="line">	// 确保person属性已设置</span><br><span class="line">	public void setPerson(Person person) &#123;</span><br><span class="line">		this.person = person;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>两种方式启用<code>@Required</code>：</p>
<ul>
<li><p>添加Spring上下文和 <code>&lt;context:annotation-config/&gt;</code></p>
</li>
<li><p>直接注册一个<code>RequiredAnnotationBeanPostProcessor</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean class=&quot;org.springframework.beans.factory.annotation.RequiredAnnotationBeanPostProcessor&quot;/&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><code>@Required</code>比依赖检查XML文件中更灵活。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 已废弃 --&gt;</span><br><span class="line">&lt;bean id=&quot;&quot; class=&quot;&quot; dependency-check=&quot;&quot;&gt;</span><br></pre></td></tr></table></figure></p>
<p><code>@Qualifier</code>注解控制bean应在字段上自动装配。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;</span><br><span class="line">	xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">	xmlns:context=&quot;http://www.springframework.org/schema/context&quot;</span><br><span class="line">	xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans</span><br><span class="line">		http://www.springframework.org/schema/beans/spring-beans-2.5.xsd</span><br><span class="line">		http://www.springframework.org/schema/context</span><br><span class="line">		http://www.springframework.org/schema/context/spring-context-2.5.xsd&quot;&gt;</span><br><span class="line"></span><br><span class="line">	&lt;context:annotation-config/&gt;</span><br><span class="line"></span><br><span class="line">	&lt;bean id=&quot;CustomerBean&quot; class=&quot;mmp.common.Customer&quot;&gt;</span><br><span class="line">		&lt;property name=&quot;action&quot; value=&quot;buy&quot;/&gt;</span><br><span class="line">		&lt;property name=&quot;type&quot; value=&quot;1&quot;/&gt;</span><br><span class="line">	&lt;/bean&gt;</span><br><span class="line">	&lt;!-- 两个类似的 bean，应当装配哪个？ --&gt;</span><br><span class="line">	&lt;bean id=&quot;PersonBean1&quot; class=&quot;mmp.common.Person&quot;&gt;</span><br><span class="line">		&lt;property name=&quot;name&quot; value=&quot;mdzz-1&quot;/&gt;</span><br><span class="line">	&lt;/bean&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;bean id=&quot;PersonBean2&quot; class=&quot;mmp.common.Person&quot;&gt;</span><br><span class="line">		&lt;property name=&quot;name&quot; value=&quot;mdzz-2&quot;/&gt;</span><br><span class="line">	&lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">&lt;/beans&gt;</span><br></pre></td></tr></table></figure></p>
<p><code>@Qualifier</code>自动装配特定的bean<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">package mmp.common;</span><br><span class="line"></span><br><span class="line">public class Customer &#123;</span><br><span class="line">	@Autowired</span><br><span class="line">	@Qualifier(&quot;PersonBean1&quot;)</span><br><span class="line">	private Person person;</span><br><span class="line"></span><br><span class="line">	// getter and setter</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><code>@Autowired</code>默认按类型装配，<code>@Resource</code>默认是按照名称装配</p>
<p><code>@Resource</code>是JavaEE中的包，<code>@Autowired</code>是Spring的注解包</p>
<p>若注解与XML同用，XML优先级高于注解。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- Bean 的配置文件 applicationContext.xml --&gt;</span><br><span class="line">&lt;!-- 一般命名&lt;bean/&gt;用id，不用 name，但name可以包含各种字符 --&gt;</span><br><span class="line">&lt;bean id=&quot;c&quot; class=&quot;mmp.pojo.Category&quot;&gt;</span><br><span class="line">	&lt;property name=&quot;name&quot; value=&quot;category 1&quot;/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br><span class="line">&lt;bean id=&quot;p&quot; class=&quot;mmp.pojo.Product&quot;&gt;</span><br><span class="line">	&lt;property name=&quot;name&quot; value=&quot;product1&quot;/&gt;</span><br><span class="line">	&lt;property name=&quot;category&quot; ref=&quot;c&quot;/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ApplicationContext context = new ClassPathXmlApplicationContext(new String[] &#123; &quot;applicationContext.xml&quot; &#125;);</span><br><span class="line">// ApplicationContext context = new FileSystemXmlApplicationContext(&quot;C:/Users/xxx/xxx.xml&quot;);</span><br><span class="line">Category c = (Category) context.getBean(&quot;c&quot;);</span><br><span class="line">c.getName();</span><br></pre></td></tr></table></figure>
<p><code>ApplicationContext</code>加载Spring配置文件，充当容器，其实现类有两个。</p>
<ul>
<li>在项目的类路径下，用<code>ClassPathXmlApplicationContext</code></li>
<li>在项目的根路径下或在本地磁盘目录中，用<code>FileSystemXmlApplicationContext</code></li>
</ul>
<p><code>BeanFactory</code>接口是<code>ApplicationContext</code>接口的父类，<code>XmlBeanFactory</code>是<code>BeanFactory</code>的实现。</p>
<p><code>ApplicationContext</code>容器包括<code>BeanFactory</code>容器的所有功能，会在容器对象初始化时，将其中对象一次性全部装配好。<br><code>BeanFactory</code>容器延迟加载，在第一次调用<code>getBean()</code>时，才真正装配该对象。</p>
<ul>
<li>每次需要时都产生一个新的bean实例，应该声明bean的作用域的属性为<code>prototype</code>。</li>
<li>每次需要时都返回同一个bean实例，应该声明bean的作用域的属性为<code>singleton</code>。</li>
<li><code>scope</code>为<code>singleton</code>，Bean在容器被创建时即被装配好了。</li>
<li><code>scope</code>为<code>prototype</code>，Bean实例是在代码中使用该Bean实例时才装配。</li>
<li>默认为<code>singleton</code>。</li>
<li>在类上使用注解<code>@Scope</code>，<code>value</code>属性指定作用域。</li>
</ul>
<p>静态工厂方式实例化Bean</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">package mmp;</span><br><span class="line"></span><br><span class="line">public class HelloApiStaticFactory &#123;</span><br><span class="line">	// 工厂方法</span><br><span class="line">	public static HelloApi newInstance(String message) &#123;</span><br><span class="line">		// 返回需要的Bean实例</span><br><span class="line">		return new HelloImpl(message);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 静态工厂方法 --&gt;</span><br><span class="line">&lt;!-- 指定必须的class属性，factory-method属性指定实例化Bean的方法 --&gt;</span><br><span class="line">&lt;bean id=&quot;bean1&quot; class=&quot;mmp.HelloApiStaticFactory&quot; factory-method=&quot;newInstance&quot;&gt;</span><br><span class="line">	&lt;constructor-arg index=&quot;0&quot; value=&quot;Hello Spring!&quot;/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 使用静态工厂方法</span><br><span class="line">BeanFactory beanFactory = new ClassPathXmlApplicationContext(&quot;mmp/instantiatingBean.xml&quot;);</span><br><span class="line">HelloApi bean1 = beanFactory.getBean(&quot;bean1&quot;, HelloApi.class);</span><br><span class="line">bean1.sayHello();</span><br></pre></td></tr></table></figure>
<p>实例工厂方法实例化Bean<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">package mmp;</span><br><span class="line"></span><br><span class="line">public class HelloApiInstanceFactory &#123;</span><br><span class="line">	public HelloApi newInstance(String message) &#123;</span><br><span class="line">		return new HelloImpl(message);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 实例工厂Bean --&gt;</span><br><span class="line">&lt;bean id=&quot;beanInstanceFactory&quot; class=&quot;mmp.HelloApiInstanceFactory&quot;/&gt;</span><br><span class="line">&lt;!-- 实例工厂Bean创建Bean --&gt;</span><br><span class="line">&lt;!-- 不能指定class属性，factory-bean指定工厂Bean，factory-method属性指定实例化Bean的方法 --&gt;</span><br><span class="line">&lt;bean id=&quot;bean4&quot; factory-bean=&quot;beanInstanceFactory&quot; factory-method=&quot;newInstance&quot;&gt;</span><br><span class="line">	&lt;constructor-arg index=&quot;0&quot; value=&quot;Hello Spring!&quot;&gt;&lt;/constructor-arg&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 使用实例工厂方法</span><br><span class="line">BeanFactory beanFactory = new ClassPathXmlApplicationContext(&quot;instantiatingBean.xml&quot;);</span><br><span class="line">HelloApi bean2 = beanFactory.getBean(&quot;bean2&quot;, HelloApi.class);</span><br><span class="line">bean2.sayHello();</span><br></pre></td></tr></table></figure>
<p>可以将Spring配置文件分解成多个配置文件。</p>
<ul>
<li>平等关系的配置文件：将所有配置文件的路径定义为一个String 数组。</li>
<li>包含关系的配置文件：有一个总文件，子文件通过<code>&lt;import/&gt;</code>引入，只需用总配置文件初始化。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;import resource=&quot;services.xml&quot;/&gt;</span><br><span class="line">&lt;import resource=&quot;resources/messageSource.xml&quot;/&gt;</span><br><span class="line">&lt;import resource=&quot;/resources/themeSource.xml&quot;/&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>在Spring3，替代解决方案是JavaConfig<code>@Import</code>。</p>
<p>手动声明组件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">package mmp.customer.dao;</span><br><span class="line"></span><br><span class="line">public class CustomerDAO &#123;&#125;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">package mmp.customer.services;</span><br><span class="line"></span><br><span class="line">public class CustomerService &#123;</span><br><span class="line">	CustomerDAO customerDAO;</span><br><span class="line">	// setter</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id=&quot;customerService&quot; class=&quot;mmp.customer.services.CustomerService&quot;&gt;</span><br><span class="line">	&lt;property name=&quot;customerDAO&quot; ref=&quot;customerDAO&quot;/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">&lt;bean id=&quot;customerDAO&quot; class=&quot;mmp.customer.dao.CustomerDAO&quot;/&gt;</span><br></pre></td></tr></table></figure>
<p>自动组件扫描</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">package mmp.customer.dao;</span><br><span class="line">// @Component注释表示这个类是一个自动扫描组件</span><br><span class="line">@Component</span><br><span class="line">public class CustomerDAO &#123;&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">package mmp.customer.services;</span><br><span class="line"></span><br><span class="line">@Component</span><br><span class="line">public class CustomerService &#123;</span><br><span class="line">	@Autowired</span><br><span class="line">	CustomerDAO customerDAO;</span><br><span class="line">	// setter</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 启用自动扫描 --&gt;</span><br><span class="line">&lt;context:component-scan base-package=&quot;mmp.customer&quot;/&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ApplicationContext context = new ClassPathXmlApplicationContext(new String[] &#123; &quot;applicationContext.xml&quot; &#125;);</span><br><span class="line">// 默认小写第一字符</span><br><span class="line">CustomerService cust = (CustomerService)context.getBean(&quot;customerService&quot;);</span><br></pre></td></tr></table></figure>
<p>自定义名称：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// 在类上使用注解@Component，value指定该bean的id</span><br><span class="line">@Service(&quot;cnm&quot;)</span><br><span class="line">public class CustomerService &#123;&#125;</span><br><span class="line"></span><br><span class="line">// CustomerService cust = (CustomerService)context.getBean(&quot;cnm&quot;)</span><br></pre></td></tr></table></figure></p>
<p>自动组件扫描注释类型</p>
<p><code>@Component</code>：指示自动扫描组件。<br><code>@Repository</code>：表示在持久层DAO组件。<br><code>@Service</code>：表示在业务层服务组件。<br><code>@Controller</code>：表示在表示层控制器组件。</p>
<p>过滤扫描并注册匹配定义regex，即使未标注<code>@Component</code>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">package mmp.customer.dao;</span><br><span class="line"></span><br><span class="line">public class CustomerDAO &#123;&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">package mmp.customer.services;</span><br><span class="line"></span><br><span class="line">public class CustomerService &#123;</span><br><span class="line">	@Autowired</span><br><span class="line">	CustomerDAO customerDAO;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;context:component-scan base-package=&quot;mmp&quot; use-default-filters=&quot;false&quot;&gt;</span><br><span class="line">	&lt;context:include-filter type=&quot;regex&quot; expression=&quot;mmp.customer.dao.*DAO.*&quot;/&gt;</span><br><span class="line">	&lt;context:exclude-filter type=&quot;regex&quot; expression=&quot;mmp.customer.services.*Service.*&quot;/&gt;</span><br><span class="line">&lt;/context:component-scan&gt;</span><br><span class="line"></span><br><span class="line">&lt;context:component-scan base-package=&quot;mmp.customer&quot;&gt;</span><br><span class="line">	&lt;!-- 不包括标注有@Service --&gt;</span><br><span class="line">	&lt;context:exclude-filter type=&quot;annotation&quot; expression=&quot;org.springframework.stereotype.Service&quot;/&gt;</span><br><span class="line">&lt;/context:component-scan&gt;</span><br></pre></td></tr></table></figure>
<p>简单的Bean<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">package mmp.hello;</span><br><span class="line"></span><br><span class="line">public interface HelloWorld &#123;</span><br><span class="line">	void printHelloWorld(String msg);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">package mmp.hello.impl;</span><br><span class="line"></span><br><span class="line">public class HelloWorldImpl implements HelloWorld &#123;</span><br><span class="line">	@Override</span><br><span class="line">	public void printHelloWorld(String msg) &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">package mmp.config;</span><br><span class="line"></span><br><span class="line">@Configuration</span><br><span class="line">public class AppConfig &#123;</span><br><span class="line">	@Bean(name = &quot;helloBean&quot;)</span><br><span class="line">	public HelloWorld helloWorld() &#123;</span><br><span class="line">		return new HelloWorldImpl();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">// 等于&lt;bean id=&quot;helloBean&quot; class=&quot;mmp.hello.impl.HelloWorldImpl&quot;&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// AnnotationConfigApplicationContext加载JavaConfig类</span><br><span class="line">ApplicationContext context = new AnnotationConfigApplicationContext(AppConfig.class);</span><br><span class="line">HelloWorld obj = (HelloWorld) context.getBean(&quot;helloBean&quot;);</span><br></pre></td></tr></table></figure>
<p>分割Spring XML bean文件，更容易维护和模块化。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;import resource=&quot;config/customer.xml&quot;/&gt;</span><br><span class="line">&lt;import resource=&quot;config/scheduler.xml&quot;/&gt;</span><br></pre></td></tr></table></figure></p>
<p>Spring3 JavaConfig它等效于<code>@Import</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">package mmp.core;</span><br><span class="line"></span><br><span class="line">public class CustomerBo &#123;&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">package mmp.core;</span><br><span class="line"></span><br><span class="line">public class SchedulerBo &#123;&#125;</span><br></pre></td></tr></table></figure>
<p><code>@Configuration</code>声明上述Bean类</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">package mmp.config;</span><br><span class="line"></span><br><span class="line">@Configuration</span><br><span class="line">public class CustomerConfig &#123;</span><br><span class="line">	@Bean(name = &quot;customer&quot;)</span><br><span class="line">	public CustomerBo customerBo() &#123;</span><br><span class="line">		return new CustomerBo();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">package mmp.config;</span><br><span class="line"></span><br><span class="line">@Configuration</span><br><span class="line">public class SchedulerConfig &#123;</span><br><span class="line">	@Bean(name = &quot;scheduler&quot;)</span><br><span class="line">	public SchedulerBo suchedulerBo() &#123;</span><br><span class="line">		return new SchedulerBo();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">package mmp.config;</span><br><span class="line"></span><br><span class="line">@Configuration</span><br><span class="line">@Import(&#123; CustomerConfig.class, SchedulerConfig.class &#125;)</span><br><span class="line">public class AppConfig &#123;&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ApplicationContext context = new AnnotationConfigApplicationContext(AppConfig.class);</span><br><span class="line"></span><br><span class="line">CustomerBo customer = (CustomerBo) context.getBean(&quot;customer&quot;);</span><br><span class="line">customer.printMsg(&quot;Hello 11&quot;);</span><br><span class="line"></span><br><span class="line">SchedulerBo scheduler = (SchedulerBo) context.getBean(&quot;scheduler&quot;);</span><br><span class="line">scheduler.printMsg(&quot;Hello 22&quot;);</span><br></pre></td></tr></table></figure>

				</div>
				<!-- about -->
				
			</div>
			<!-- pagination -->
			
			<div class="comment-section">
	
	


</div>
		</div>
		
	</div>


		<footer>
			 
<a id="gotop" href="#" title="back to top"><i class="mdi-hardware-keyboard-arrow-up"></i></a>

		</footer>
	</div>
	<!-- <script src="/libs/bs/js/bootstrap.min.js"></script> -->
	<!-- <script src="//apps.bdimg.com/libs/bootstrap/3.3.4/js/bootstrap.min.js"></script> -->

	<script>var timeEnd = new Date();console.log('耗时：' + (timeEnd - timeStart));</script>
	<!-- <script>(typeof $().modal == 'function')|| document.write('<script src="/libs/bs/js/bootstrap.min.js" type="text/javascript"><\/script>')</script>-->
	<!-- material design -->
	<!-- <script src="/libs/bs-material/js/ripples.min.js"></script> -->
	<!-- <script src="//apps.bdimg.com/libs/bootstrap-material/0.3.0/js/ripples.min.js"></script> -->
	<!-- <script src="/libs/bs-material/js/material.min.js"></script> -->
	<!-- <script src="//apps.bdimg.com/libs/bootstrap-material/0.3.0/js/material.min.js"></script>-->
	<!-- toc -->
	<!-- <script src="/libs/tocify/jquery-ui.min.js"></script> -->
	<!-- <script src="//apps.bdimg.com/libs/jqueryui/1.10.4/jquery-ui.min.js"></script> -->
	<!-- <script src="/libs/tocify/jquery.tocify.custom.js"></script> -->
	<!-- <script src="/js/main.js"></script> -->
</body>
</html>
