<!DOCTYPE HTML>
<html>
	<head>
		<meta charset="utf-8">
		
		<title>[笔记]-SSH | 一个放笔记的地方而已</title>
		
		<meta name="author" content="Huangzhike">
		
		
		<meta name="description" content="用手记笔记，用心记笔记，用脑记笔记">
		
		
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
		
		<meta property="og:title" content="[笔记]-SSH"/>
		
		<meta property="og:site_name" content="一个放笔记的地方而已"/>
		
		
		<!-- favicon -->
		<link rel="icon" type="image/ico" href="/favicon.ico" sizes="32x32">
		<link rel="manifest" href="/manifest.json">
		<meta name="msapplication-TileColor" content="#009688">
		<meta name="msapplication-TileImage" content="/mstile-144x144.ico">
		<meta name="theme-color" content="#009688">
		<script>var timeStart = new Date();</script>
		<!-- favicon end -->
		<!-- <link href="//favicon.ico" rel="icon"> -->
		
		<!-- toc -->
		<!-- <link rel="stylesheet" href="/libs/tocify/jquery.tocify.css" media="screen" type="text/css"> -->
		<!-- <link rel="stylesheet" href="/libs/bs/css/bootstrap.min.css" media="screen" type="text/css"> -->
		<!--<link rel="stylesheet" href="//apps.bdimg.com/libs/bootstrap/3.3.4/css/bootstrap.min.css" media="screen" type="text/css">-->
		<!-- material design -->
		<!-- <link rel="stylesheet" href="/libs/bs-material/css/ripples.min.css" media="screen" type="text/css"> -->
		<!-- <link rel="stylesheet" href="//apps.bdimg.com/libs/bootstrap-material/0.3.0/css/ripples.min.css" media="screen" type="text/css"> -->
		<!-- <link rel="stylesheet" href="/libs/bs-material/css/material.min.css" media="screen" type="text/css"> -->
		<!--<link rel="stylesheet" href="//apps.bdimg.com/libs/bootstrap-material/0.3.0/css/material.min.css" media="screen" type="text/css"> -->
		<!--<link rel="stylesheet" href="/css/highlight.light.css" media="screen" type="text/css">-->
		<link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
		
		
		<!-- <script src="//apps.bdimg.com/libs/jquery/2.0.3/jquery.min.js"></script>-->
		<!-- <script>window.jQuery || document.write('<script src="/libs/jquery-3.1.1.slim.min.js" type="text/javascript"><\/script>')</script>-->
	</head>

<body>
	<nav class="navbar navbar-default">
	<div class="container">
		<div class="navbar-header">
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
				<span class="sr-only">菜单</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			<a class="navbar-brand" href="/">一个放笔记的地方而已</a>
           
		</div>
		<div id="navbar" class="collapse navbar-collapse">
			<ul class="nav navbar-nav navbar-right">
				
				<li>
					<a href="https://huangzhike.github.io/" title="">
						<i class="fa fa-home"></i>首页
					</a>
				</li>
				
				<li>
					<a href="https://huangzhike.github.io/archives" title="">
						<i class="fa fa-list"></i>存档
					</a>
				</li>
				
				<li>
					<a href="https://github.com/huangzhike" title="我的主页">
						<i class="fa fa-github"></i>GitHub
					</a>
				</li>
				
			</ul>
		</div>
	</div>
</nav>

	<div class="container" >
		<div class="row">
	
		<div class="col-md-9 center-content">
			
			<div class="content">
				<!-- index -->
				
				<h2>[笔记]-SSH</h2>
				
				<div>
					<span class="post-time">2017-12-21 9:55</span>
				</div>	
				
				<div class="article-content">
				<p>web.xml<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span><span class="meta">?&gt;</span></span></div><div class="line"><span class="tag">&lt;<span class="name">web-app</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">display-name</span>&gt;</span>SSH<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">welcome-file-list</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>xxx.jsp<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">welcome-file-list</span>&gt;</span></div><div class="line">	<span class="comment">&lt;!-- Spring监听器，初始化ApplicationContext对象，提供实例 --&gt;</span></div><div class="line">	<span class="comment">&lt;!-- web.xml中监听器的启动优先级高于过滤器，配在哪无所谓 --&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">listener</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>org.springframework.web.context.ContextLoaderListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">listener</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">context-param</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></div><div class="line">		<span class="comment">&lt;!-- /WEB-INF/classes/applicationContext.xml --&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:applicationContext*.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></div><div class="line">	<span class="comment">&lt;!-- Struts过滤器 --&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">filter</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>struts2<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">init-param</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">param-name</span>&gt;</span>filterConfig<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:struts.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></div><div class="line">		<span class="comment">&lt;!-- 自动扫描action，如果用注解配置Struts --&gt;</span></div><div class="line">		<span class="comment">&lt;!-- 据说某些版本会忽略此配置，只扫描指定的文件夹命名：struts, struts2, action 或 actions --&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">init-param</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">param-name</span>&gt;</span>actionPackages<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">param-value</span>&gt;</span>mmp.action<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">filter</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>struts2<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">dispatcher</span>&gt;</span>FORWARD<span class="tag">&lt;/<span class="name">dispatcher</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">dispatcher</span>&gt;</span>REQUEST<span class="tag">&lt;/<span class="name">dispatcher</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>Spring：所有的 Bean 均由 Spring 容器统一管理。</p>
<p>WEB-INF/applicationContext.xml<br><figure class="highlight dust"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div></pre></td><td class="code"><pre><div class="line"><span class="xml"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span><span class="meta">?&gt;</span></span></span></div><div class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></div><div class="line">	<span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></div><div class="line">	<span class="attr">xmlns:p</span>=<span class="string">"http://www.springframework.org/schema/p"</span></div><div class="line">	<span class="attr">xmlns:aop</span>=<span class="string">"http://www.springframework.org/schema/aop"</span></div><div class="line">	<span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></div><div class="line">	<span class="attr">xmlns:jee</span>=<span class="string">"http://www.springframework.org/schema/jee"</span></div><div class="line">	<span class="attr">xmlns:tx</span>=<span class="string">"http://www.springframework.org/schema/tx"</span></div><div class="line">	<span class="attr">xsi:schemaLocation</span>=<span class="string">"</span></div><div class="line">		http://www.springframework.org/schema/aop </div><div class="line">		http://www.springframework.org/schema/aop/spring-aop-4.2.xsd</div><div class="line">		http://www.springframework.org/schema/beans</div><div class="line">		http://www.springframework.org/schema/beans/spring-beans-4.2.xsd</div><div class="line">		http://www.springframework.org/schema/context</div><div class="line">		http://www.springframework.org/schema/context/spring-context-4.2.xsd</div><div class="line">		http://www.springframework.org/schema/jee </div><div class="line">		http://www.springframework.org/schema/jee/spring-jee-4.2.xsd</div><div class="line">		http://www.springframework.org/schema/tx </div><div class="line">		http://www.springframework.org/schema/tx/spring-tx-4.2.xsd"&gt;</div><div class="line"></div><div class="line">	<span class="comment">&lt;!-- 也可以分成几个文件 import，或者在web.xml直接导入 --&gt;</span></div><div class="line">	<span class="comment">&lt;!-- &lt;import resource="config/spring/HibernateSessionFactory.xml"/&gt; --&gt;</span></div><div class="line"></div><div class="line">	<span class="comment">&lt;!-- 注解配置 --&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">context:annotation-config</span>/&gt;</span></div><div class="line"></div><div class="line">	<span class="comment">&lt;!-- 自动扫描与装配bean（注解方式） --&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"mmp.."</span>/&gt;</span></div><div class="line"></div><div class="line">	<span class="comment">&lt;!-- Spring和Hibernate整合 --&gt;</span></div><div class="line"></div><div class="line">	<span class="comment">&lt;!-- Spring支持两种方式 --&gt;</span></div><div class="line">	<span class="comment">&lt;!-- 第一种方式：property-placeholder，仅在xml中使用，在beans.xml中获取properties文件中的对应的value --&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">"classpath:jdbc.properties"</span>/&gt;</span></div><div class="line"></div><div class="line">	<span class="comment">&lt;!-- 与下面配置等价 --&gt;</span></div><div class="line">	<span class="comment">&lt;!-- </span></div><div class="line">		&lt;bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer"&gt;</div><div class="line">			&lt;property name="locations"&gt;</div><div class="line">				&lt;array&gt;</div><div class="line">					&lt;value&gt;classpath:xxx.properties&lt;/value&gt;</div><div class="line">					&lt;value&gt;classpath:xxx.properties&lt;/value&gt;</div><div class="line">				&lt;/array&gt;</div><div class="line">			&lt;/property&gt;</div><div class="line">		&lt;/bean&gt;</div><div class="line">	 --&gt;</div><div class="line"></div><div class="line">	<span class="comment">&lt;!-- 第二种方式是使用注解方式注入，主要用在Java代码中使用注解注入properties文件中相应的value值 --&gt;</span></div><div class="line">	<span class="comment">&lt;!-- </span></div><div class="line">		&lt;bean id="prop" class="org.springframework.beans.factory.config.PropertiesFactoryBean"&gt;</div><div class="line">			&lt;property name="locations"&gt;</div><div class="line">				&lt;array&gt;</div><div class="line">					&lt;value&gt;classpath:xxx.properties&lt;/value&gt;</div><div class="line">					&lt;value&gt;classpath:xxx.properties&lt;/value&gt;</div><div class="line">				&lt;/array&gt;</div><div class="line">			&lt;/property&gt;</div><div class="line">		&lt;/bean&gt;</div><div class="line">	 --&gt;</div><div class="line"></div><div class="line">	<span class="comment">&lt;!-- </span></div><div class="line">		&lt;bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource"&gt;</div><div class="line">			&lt;property name="driverClassName" value="$<span class="template-variable">&#123;jdbc.driverClassName&#125;</span><span class="xml"><span class="comment">"/&gt;</span></span></div><div class="line">			&lt;property name="url" value="$<span class="template-variable">&#123;jdbc.url&#125;</span><span class="xml"><span class="comment">"/&gt;</span></span></div><div class="line">			&lt;property name="username" value="$<span class="template-variable">&#123;jdbc.username&#125;</span><span class="xml"><span class="comment">"/&gt;</span></span></div><div class="line">			&lt;property name="password" value="$<span class="template-variable">&#123;jdbc.password&#125;</span><span class="xml"><span class="comment">"/&gt;</span></span></div><div class="line">		&lt;/bean&gt;</div><div class="line">	 --&gt;</div><div class="line"></div><div class="line">	<span class="comment">&lt;!-- 配置c3p0数据库连接池 --&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"dataSource"</span> <span class="attr">class</span>=<span class="string">"com.mchange.v2.c3p0.ComboPooledDataSource"</span>&gt;</span></div><div class="line">		<span class="comment">&lt;!-- 数据连接信息，属性名和上面不一样 --&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClass"</span> <span class="attr">value</span>=<span class="string">"com.mysql.jdbc.Driver"</span>/&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jdbcUrl"</span> <span class="attr">value</span>=<span class="string">"jdbc:mysql://127.0.0.1:3307/mmp"</span>/&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"user"</span> <span class="attr">value</span>=<span class="string">"root"</span>/&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"123456"</span>/&gt;</span></div><div class="line">		<span class="comment">&lt;!-- 初始化时获取三个连接，在minPoolSize与maxPoolSize之间，默认值: 3 --&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"initialPoolSize"</span> <span class="attr">value</span>=<span class="string">"3"</span>/&gt;</span></div><div class="line">		<span class="comment">&lt;!-- 连接池中保留的最小连接数，默认值：3 --&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"minPoolSize"</span> <span class="attr">value</span>=<span class="string">"3"</span>/&gt;</span></div><div class="line">		<span class="comment">&lt;!-- 连接池中保留的最大连接数，默认值：15 --&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxPoolSize"</span> <span class="attr">value</span>=<span class="string">"5"</span>/&gt;</span></div><div class="line">		<span class="comment">&lt;!-- 当连接池中的连接数耗尽的时候，c3p0一次同时获取的连接数，默认值：3 --&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"acquireIncrement"</span> <span class="attr">value</span>=<span class="string">"3"</span>/&gt;</span></div><div class="line">		<span class="comment">&lt;!-- 数据源内加载的PreparedStatements数量，如果maxStatements与maxStatementsPerConnection均为0，缓存被关闭，默认值：0 --&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxStatements"</span> <span class="attr">value</span>=<span class="string">"8"</span>/&gt;</span></div><div class="line">		<span class="comment">&lt;!--maxStatementsPerConnection定义了连接池内单个连接所拥有的最大缓存statements数，默认值：0 --&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxStatementsPerConnection"</span> <span class="attr">value</span>=<span class="string">"5"</span>/&gt;</span></div><div class="line">		<span class="comment">&lt;!--最大空闲时间,1800秒内未使用则连接被丢弃，若为0则永不丢弃，默认值：0 --&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxIdleTime"</span> <span class="attr">value</span>=<span class="string">"1800"</span>/&gt;</span></div><div class="line">		<span class="comment">&lt;!--从数据库获取新连接失败后重复尝试的次数，默认值：30 --&gt;</span> </div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"acquireRetryAttempts"</span> <span class="attr">value</span>=<span class="string">"30"</span>/&gt;</span></div><div class="line">		<span class="comment">&lt;!--每隔60秒发一次心跳信号到数据库，以保持连接的活性 --&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"idleConnectionTestPeriod"</span> <span class="attr">value</span>=<span class="string">"60"</span>/&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line"></div><div class="line">	<span class="comment">&lt;!-- 使用注释，用AnnotationSessionFactoryBean 代替 LocalSessionFactoryBean --&gt;</span></div><div class="line">	<span class="comment">&lt;!-- &lt;bean id="sessionFactory" class="org.springframework.orm.hibernate4.annotation.AnnotationSessionFactoryBean"&gt; --&gt;</span></div><div class="line">	<span class="comment">&lt;!-- 并注明注解模型类在'annotatedClasses'属性，而不是'mappingResources'属性 --&gt;</span></div><div class="line"></div><div class="line">	<span class="comment">&lt;!-- 配置 SessionFactory 的 Bean，将 SessionFactory 交由 Spring 来管理，替换掉 hibernate.cfg.xml --&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"sessionFactory"</span> <span class="attr">class</span>=<span class="string">"org.springframework.orm.hibernate4.LocalSessionFactoryBean"</span>&gt;</span></div><div class="line">		<span class="comment">&lt;!-- 指定hibernate配置文件的位置，没有就注释掉 --&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"configLocation"</span> <span class="attr">value</span>=<span class="string">"classpath:hibernate.cfg.xml"</span>/&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>/&gt;</span></div><div class="line">		<span class="comment">&lt;!-- 映射文件的注册，使用注释可以删去，用packagesToScan代替 --&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"mappingResources"</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">list</span>&gt;</span></div><div class="line">				<span class="tag">&lt;<span class="name">value</span>&gt;</span>mmp/model/Product.hbm.xml<span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line">			<span class="tag">&lt;/<span class="name">list</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">		<span class="comment">&lt;!--自动扫描实体(如果使用Hibernate注解) --&gt;</span></div><div class="line">		<span class="comment">&lt;!-- &lt;property name="packagesToScan" value="mmp.model.*"/&gt; --&gt;</span></div><div class="line">		<span class="comment">&lt;!-- </span></div><div class="line">			&lt;property name="packagesToScan"&gt;</div><div class="line">				&lt;list&gt;</div><div class="line">					&lt;value&gt;mmp.model.*&lt;/value&gt;</div><div class="line">				&lt;/list&gt;</div><div class="line">			&lt;/property&gt;</div><div class="line">		 --&gt;</div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernateProperties"</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">props</span>&gt;</span></div><div class="line">				<span class="comment">&lt;!--配置Hibernate的方言--&gt;</span></div><div class="line">				<span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">"hibernate.dialect"</span>&gt;</span>org.hibernate.dialect.MySQLDialect<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></div><div class="line">				<span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">"hibernate.hbm2ddl.auto"</span>&gt;</span>update<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></div><div class="line">				<span class="comment">&lt;!--格式化输出sql语句--&gt;</span></div><div class="line">				<span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">"hibernate.show_sql"</span>&gt;</span>true<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></div><div class="line">				<span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">"hibernate.format_sql"</span>&gt;</span>true<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></div><div class="line">				<span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">"hibernate.use_sql_comments"</span>&gt;</span>false<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></div><div class="line">				<span class="comment">&lt;!-- 指定当前 Session 所执行的上下文环境，不是 thread 而是 SpringSessionContext，表示 Session 交由 Spring 容器来管理 --&gt;</span></div><div class="line">				<span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">"hibernate.current_session_context_class"</span>&gt;</span>org.springframework.orm.hibernate4.SpringSessionContext<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></div><div class="line">			<span class="tag">&lt;/<span class="name">props</span>&gt;</span></div><div class="line">			<span class="comment">&lt;!-- 有时候hbm2ddl.auto会失效，不能够自动生成表结构，加上下面 --&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"schemaUpdate"</span> <span class="attr">value</span>=<span class="string">"ture"</span>/&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line"></div><div class="line">	<span class="comment">&lt;!-- sessionFactory取代HibernateTemplate，HibernateTemplate是Spring的，sessionFactory是Hibernate的 --&gt;</span></div><div class="line"></div><div class="line">	<span class="comment">&lt;!-- Hibernate 的 Session 要求在事务环境下，必须配置事务管理器 --&gt;</span></div><div class="line">	<span class="comment">&lt;!-- 如果使用 Jdbc 的事务管理器，需要注入数据源 dataSource --&gt;</span></div><div class="line">	<span class="comment">&lt;!-- 而使用 Hibernate 的事务管理器，则需要注入 sessionFactory --&gt;</span></div><div class="line"></div><div class="line">	<span class="comment">&lt;!-- 配置事务管理器，管理sessionFactory，这样所有session将会有声明式事务管理 --&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"txManager"</span> <span class="attr">class</span>=<span class="string">"org.springframework.orm.hibernate4.HibernateTransactionManager"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"sessionFactory"</span> <span class="attr">ref</span>=<span class="string">"sessionFactory"</span>/&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line">	<span class="comment">&lt;!-- 第一种配置事务的方式，采用注解的方式 --&gt;</span></div><div class="line">	<span class="comment">&lt;!-- 如果用注解实现事务管理，添加下面一句，扫描注解，并去掉&lt;tx:advice&gt;和&lt;aop:config&gt; 配置 --&gt;</span></div><div class="line">	<span class="comment">&lt;!-- &lt;tx:annotation-driven transaction-manager="txManager"/&gt; --&gt;</span></div><div class="line"></div><div class="line">	<span class="comment">&lt;!-- 第二种配置事务的方式，使用tx标签 --&gt;</span></div><div class="line">	<span class="comment">&lt;!-- 事务通知 --&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">tx:advice</span> <span class="attr">id</span>=<span class="string">"advice"</span> <span class="attr">transaction-manager</span>=<span class="string">"txManager"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">tx:attributes</span>&gt;</span></div><div class="line">			<span class="comment">&lt;!-- save*等等，表示对于这些开头的方法，进行事务管理 --&gt;</span></div><div class="line">			<span class="comment">&lt;!-- REQUIRED：支持当前事务，如果当前没有事务，就新建一个事务 --&gt;</span></div><div class="line">			<span class="comment">&lt;!-- 事务传播 --&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"save*"</span> <span class="attr">propagation</span>=<span class="string">"REQUIRED"</span> <span class="attr">rollback-for</span>=<span class="string">"Exception"</span>/&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"*"</span> <span class="attr">propagation</span>=<span class="string">"SUPPORTS"</span> <span class="attr">rollback-for</span>=<span class="string">"Exception"</span>/&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">tx:attributes</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">tx:advice</span>&gt;</span></div><div class="line"></div><div class="line">	<span class="comment">&lt;!-- AspectJ AOP --&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></div><div class="line">		<span class="comment">&lt;!-- 配置哪些包的类要切入事务 --&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">"pointcut"</span> <span class="attr">expression</span>=<span class="string">"execution(* mmp.service.impl.*.*(..))"</span>/&gt;</span></div><div class="line">		<span class="comment">&lt;!-- 第一个*代表返回值，第二个*代表子包，第三个个*代表方法名，“（..）”代表方法参数 --&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">"advice"</span> <span class="attr">pointcut-ref</span>=<span class="string">"pointcut"</span>/&gt;</span></div><div class="line">		<span class="comment">&lt;!-- aop:pointcut要写在aop:advisor上面，否则会报错？ --&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></div><div class="line"></div><div class="line">	<span class="comment">&lt;!-- 第三种配置事务的方式 ，代理 --&gt;</span></div><div class="line">	<span class="comment">&lt;!-- </span></div><div class="line">		&lt;bean id="transactionProxy" class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean" abstract="true"&gt;</div><div class="line">			&lt;property name="transactionManager" ref="txManager"/&gt;</div><div class="line">			&lt;property name="transactionAttributes"&gt;</div><div class="line">			&lt;props&gt;</div><div class="line">				&lt;prop key="save*"&gt;PROPAGATION_REQUIRED, -Exception&lt;/prop&gt;</div><div class="line">				&lt;prop key="*"&gt;PROPAGATION_REQUIRED, readOnly&lt;/prop&gt;</div><div class="line">			&lt;/props&gt;</div><div class="line">			&lt;/property&gt;</div><div class="line">		&lt;/bean&gt;</div><div class="line">	 --&gt;</div><div class="line">	<span class="comment">&lt;!-- &lt;bean id="productServiceImpl" parent="transactionProxy"&gt; --&gt;</span></div><div class="line">		<span class="comment">&lt;!-- &lt;property name="target"&gt; --&gt;</span></div><div class="line">			<span class="comment">&lt;!-- 用bean代替ref的方式 --&gt;</span></div><div class="line">			<span class="comment">&lt;!-- &lt;bean class="mmp.service.impl.ProductServiceImpl"&gt; --&gt;</span></div><div class="line">				<span class="comment">&lt;!-- &lt;property name="sessionFactory" ref="sessionFactory"/&gt; --&gt;</span></div><div class="line">			<span class="comment">&lt;!-- &lt;/bean&gt; --&gt;</span></div><div class="line">		<span class="comment">&lt;!-- &lt;/property&gt; --&gt;</span></div><div class="line">	<span class="comment">&lt;!-- &lt;/bean&gt; --&gt;</span></div><div class="line"></div><div class="line">	<span class="comment">&lt;!-- 第四种配置事务的方式，拦截器 (老旧) --&gt;</span></div><div class="line">	<span class="comment">&lt;!-- </span></div><div class="line">		&lt;bean id="transactionInterceptor" class="org.springframework.transaction.interceptor.TransactionInterceptor"&gt;</div><div class="line">			&lt;property name="transactionManager" ref="txManager"/&gt;</div><div class="line">			&lt;property name="transactionAttributes"&gt;</div><div class="line">				&lt;props&gt;</div><div class="line">					&lt;prop key="save*"&gt;PROPAGATION_REQUIRED, -Exception&lt;/prop&gt;</div><div class="line">					&lt;prop key="*"&gt;PROPAGATION_REQUIRED, readOnly&lt;/prop&gt;</div><div class="line">				&lt;/props&gt;</div><div class="line">			&lt;/property&gt;</div><div class="line">		&lt;/bean&gt;</div><div class="line">		&lt;bean id="proxyFactory" class="org.springframework.aop.framework.autoproxy.BeanNameAutoProxyCreator"&gt;</div><div class="line">			&lt;property name="interceptorNames"&gt;</div><div class="line">				&lt;list&gt;</div><div class="line">					&lt;value&gt;transactionInterceptor&lt;/value&gt;</div><div class="line">				&lt;/list&gt;</div><div class="line">			&lt;/property&gt;</div><div class="line">			&lt;property name="beanNames"&gt;</div><div class="line">				&lt;list&gt;</div><div class="line">					&lt;value&gt;*Dao&lt;/value&gt;</div><div class="line">				&lt;/list&gt;</div><div class="line">			&lt;/property&gt;</div><div class="line">		&lt;/bean&gt;</div><div class="line">	 --&gt;</div><div class="line"></div><div class="line">	<span class="comment">&lt;!-- MYSQL服务器本身要支持INNODB，MYSQL表的类型必须是INNODB才支持事务 --&gt;</span></div><div class="line">	<span class="comment">&lt;!-- 修改表的类型为INNODB的SQL：alter table xxx ENGINE = innodb; --&gt;</span></div><div class="line"></div><div class="line">	<span class="comment">&lt;!-- 如果使用注解，注释掉下面 action, service, dao 的 bean，交给自动扫描 --&gt;</span></div><div class="line"></div><div class="line">	<span class="comment">&lt;!-- Spring和Struts2整合 --&gt;</span></div><div class="line"></div><div class="line">	<span class="comment">&lt;!-- Action默认是多实例的，每次访问都会创建新的Action实例 --&gt;</span></div><div class="line">	<span class="comment">&lt;!-- Struts的Action交由Spring管理后，Action默认是单例的，增加scope="prototype"，使用非单例模式 --&gt;</span></div><div class="line"></div><div class="line">	<span class="comment">&lt;!-- 将Action生命周期交给Spring  --&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">"productActionBean"</span> <span class="attr">class</span>=<span class="string">"mmp.action.ProductAction"</span> <span class="attr">scope</span>=<span class="string">"prototype"</span>&gt;</span></div><div class="line">		<span class="comment">&lt;!-- 注入 --&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"productService"</span> <span class="attr">ref</span>=<span class="string">"productServiceImpl"</span>/&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line">	<span class="comment">&lt;!-- 注册 service对象 --&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">"productServiceImpl"</span> <span class="attr">class</span>=<span class="string">"mmp.service.impl.ProductServiceImpl"</span>&gt;</span></div><div class="line">		<span class="comment">&lt;!-- 注入 --&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"productDAO"</span> <span class="attr">ref</span>=<span class="string">"productDAOImpl"</span>/&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line">	<span class="comment">&lt;!-- 注册 dao对象，将 sessionFactory 注入给 Dao --&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">"productDAOImpl"</span> <span class="attr">class</span>=<span class="string">"mmp.dao.impl.ProductDAOImpl"</span>&gt;</span></div><div class="line">		<span class="comment">&lt;!-- 注入 --&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"sessionFactory"</span> <span class="attr">ref</span>=<span class="string">"sessionFactory"</span>/&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></div></pre></td></tr></table></figure></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> mmp.model;</div><div class="line"></div><div class="line"><span class="meta">@Entity</span></div><div class="line"><span class="meta">@Table</span>(name = <span class="string">"product_table"</span>)</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Product</span> </span>&#123;</div><div class="line">	<span class="keyword">int</span> id;</div><div class="line">	String name;</div><div class="line"></div><div class="line">	<span class="meta">@Id</span></div><div class="line">	<span class="meta">@GeneratedValue</span>(strategy = GenerationType.IDENTITY)</div><div class="line">	<span class="meta">@Column</span>(name = <span class="string">"id"</span>)</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getId</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> id;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.id = id;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="meta">@Column</span>(name = <span class="string">"name"</span>)</div><div class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> name;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.name = name;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Dao 实现类要获取到 SessionFactory，最终获取到 Session 对象操作 DB。<br>SessionFactory 对象的创建是由 Spring 容器管理的。<br>所以要在 Dao 实现类中添加 SessionFactory 属性，以便 Spring 容器通过 setter 将 SessionFactory 注入。<br>SSH 中，Dao 获取 Hibernate 的 Session，还可以通过 HibernateTemplate 获取（一般不用）。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> mmp.dao;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ProductDAO</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> List&lt;Product&gt; <span class="title">list</span><span class="params">()</span></span>;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(Product p)</span></span>;</div><div class="line">	<span class="function"><span class="keyword">public</span> Product <span class="title">get</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">(Product p)</span></span>;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">(Product p)</span></span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> mmp.dao.impl;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProductDAOImpl</span> <span class="keyword">implements</span> <span class="title">ProductDAO</span> </span>&#123;</div><div class="line">	<span class="comment">// SessionFactory是hibernate的内置对象</span></div><div class="line">	<span class="keyword">private</span> SessionFactory sessionFactory;</div><div class="line">	<span class="comment">// setter方法，注入</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSessionFactory</span><span class="params">(SessionFactory sessionFactory)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.sessionFactory = sessionFactory;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">public</span> List&lt;Product&gt; <span class="title">list</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="comment">// sessionFactory 实例可以按常规写法创建也可以交给Spring托管</span></div><div class="line">		<span class="comment">// sessionFactory = new Configuration().configure().buildSessionFactory();</span></div><div class="line"></div><div class="line">		Session session = sessionFactory.openSession();</div><div class="line">		<span class="comment">// Session session = sessionFactory.getCurrentSession();</span></div><div class="line">		<span class="comment">// ...</span></div><div class="line">	&#125;</div><div class="line">	<span class="comment">// ...</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>如果使用注解，要重写setSessionFactory方法，<code>@Resource(name = &quot;sessionFactory&quot;)</code>注入sessionFactory。<br>虽然继承了 HibernateTemplate ，有 setSessionFactory 方法，但这个继承的方法没有被注解，不会被注入，需要重写。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> mmp.dao.impl;</div><div class="line"></div><div class="line"><span class="meta">@Repository</span>(<span class="string">"productDAO"</span>)</div><div class="line"><span class="meta">@Transactional</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProductDAOImpl</span> <span class="keyword">extends</span> <span class="title">HibernateTemplate</span> <span class="keyword">implements</span> <span class="title">ProductDAO</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="meta">@Resource</span>(name = <span class="string">"sessionFactory"</span>) <span class="comment">// sessionFactory 的 bean id 是 sessionFactory</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSessionFactory</span><span class="params">(SessionFactory sessionFactory)</span> </span>&#123;</div><div class="line">		<span class="keyword">super</span>.setSessionFactory(sessionFactory);</div><div class="line">	&#125;;</div><div class="line"></div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="meta">@Transactional</span>(readOnly = <span class="keyword">true</span>)</div><div class="line">	<span class="comment">// @Transactional(propagation = Propagation.REQUIRED, rollbackForClassName = "Exception")</span></div><div class="line">	<span class="comment">// 这个方法使用事务，举个栗子</span></div><div class="line">	<span class="function"><span class="keyword">public</span> List&lt;Product&gt; <span class="title">list</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="comment">// 继承了HibernateTemplate，可以直接使用find</span></div><div class="line">		<span class="keyword">return</span> find(<span class="string">"from Product"</span>);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(Product p)</span> </span>&#123;</div><div class="line">		save(p);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">public</span> Product <span class="title">get</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> (Product)get(Product.class, id);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">(Product p)</span> </span>&#123;</div><div class="line">		<span class="keyword">super</span>.update(p);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">(Product p)</span> </span>&#123;</div><div class="line">		<span class="keyword">super</span>.delete(p);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> mmp.service;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ProductService</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> List&lt;Product&gt; <span class="title">list</span><span class="params">()</span></span>;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(Product p)</span></span>;</div><div class="line">	<span class="function"><span class="keyword">public</span> Product <span class="title">get</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">(Product p)</span></span>;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">(Product p)</span></span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> mmp.service.impl;</div><div class="line"></div><div class="line"><span class="meta">@Service</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProductServiceImpl</span> <span class="keyword">implements</span> <span class="title">ProductService</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="meta">@Autowired</span> <span class="comment">// 自动装配注入DAO</span></div><div class="line">	ProductDAO productDAO;</div><div class="line"></div><div class="line">	<span class="comment">// getters setters</span></div><div class="line"></div><div class="line">	<span class="meta">@Transactional</span>(propagation = Propagation.REQUIRED, rollbackForClassName = <span class="string">"Exception"</span>)</div><div class="line">	<span class="comment">// 表示这个方法要进行事务管理</span></div><div class="line">	<span class="function"><span class="keyword">public</span> List&lt;Product&gt; <span class="title">list</span><span class="params">()</span> </span>&#123;</div><div class="line">		List&lt;Product&gt; products = productDAO.list();</div><div class="line">		<span class="keyword">if</span> (products.isEmpty()) &#123;</div><div class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</div><div class="line">				Product p = <span class="keyword">new</span> Product();</div><div class="line">				p.setName(<span class="string">"product "</span> + i);</div><div class="line">				productDAO.add(p);</div><div class="line">				products.add(p);</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">return</span> products;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(Product p)</span> </span>&#123;</div><div class="line">		productDAO.add(p);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">(Product p)</span> </span>&#123;</div><div class="line">		productDAO.update(p);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">(Product p)</span> </span>&#123;</div><div class="line">		productDAO.delete(p);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">public</span> Product <span class="title">get</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> productDAO.get(id);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>struts.xml<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span> <span class="meta">?&gt;</span></span></div><div class="line"><span class="meta">&lt;!DOCTYPE struts PUBLIC</span></div><div class="line">	"-//Apache Software Foundation//DTD Struts Configuration 2.5//EN"</div><div class="line">	"http://struts.apache.org/dtds/struts-2.5.dtd"&gt;</div><div class="line"><span class="tag">&lt;<span class="name">struts</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">constant</span> <span class="attr">name</span>=<span class="string">"struts.devMode"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></div><div class="line">	<span class="comment">&lt;!-- 将action对象交给spring管理 --&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">constant</span> <span class="attr">name</span>=<span class="string">"struts.objectFactory"</span> <span class="attr">value</span>=<span class="string">"spring"</span>/&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">constant</span> <span class="attr">name</span>=<span class="string">"struts.i18n.encoding"</span> <span class="attr">value</span>=<span class="string">"UTF-8"</span>/&gt;</span></div><div class="line">	<span class="comment">&lt;!-- 指定每次请求到达，重新加载资源文件 --&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">constant</span> <span class="attr">name</span>=<span class="string">"struts.i18n.reload"</span> <span class="attr">value</span>=<span class="string">"false"</span>/&gt;</span></div><div class="line">	<span class="comment">&lt;!-- 指定每次配置文件更改后，自动重新加载 --&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">constant</span> <span class="attr">name</span>=<span class="string">"struts.configuration.xml.reload"</span> <span class="attr">value</span>=<span class="string">"false"</span>/&gt;</span></div><div class="line">	<span class="comment">&lt;!-- 默认后缀名 --&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">constant</span> <span class="attr">name</span>=<span class="string">"struts.action.extension"</span> <span class="attr">value</span>=<span class="string">"action,"</span>/&gt;</span></div><div class="line">	<span class="comment">&lt;!-- 注释掉下面配置，如果使用注解 --&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">"helloworld"</span> <span class="attr">extends</span>=<span class="string">"struts-default"</span>&gt;</span></div><div class="line">		<span class="comment">&lt;!-- 使用 bean id productActionBean 来引用类，依赖注入 --&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">action</span> <span class="attr">name</span>=<span class="string">"listProduct"</span> <span class="attr">class</span>=<span class="string">"productActionBean"</span> <span class="attr">method</span>=<span class="string">"list"</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">result</span> <span class="attr">name</span>=<span class="string">"listJsp"</span>&gt;</span>list.jsp<span class="tag">&lt;/<span class="name">result</span>&gt;</span> --&gt;</div><div class="line">			<span class="tag">&lt;<span class="name">result</span> <span class="attr">name</span>=<span class="string">"home"</span>&gt;</span>/index.jsp<span class="tag">&lt;/<span class="name">result</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">action</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">package</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">struts</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>使用了 Struts2 注解后，无需 struts.xml 了。<br>然而 Strut2 在<code>&lt;action/&gt;</code>中使用伪类（bean id），在 Spring 中定义 Action 的 Bean，将 Service 对象注入给了 Action。<br>一旦删除了 struts.xml，在 Spring 中定义的 Action 的 Bean，将与 Struts2 无关，通过 Spring 的注解可以再次建立。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> mmp.action;</div><div class="line"></div><div class="line"><span class="meta">@Namespace(<span class="meta-string">"/"</span>)</span></div><div class="line"><span class="meta">@ParentPackage(<span class="meta-string">"struts-default"</span>)</span> <span class="comment">// 表示使用默认的一套拦截器</span></div><div class="line"><span class="meta">@Results(&#123; </span></div><div class="line">	@Result(name = <span class="meta-string">"listJsp"</span>, location = <span class="meta-string">"/list.jsp"</span>), </div><div class="line">	<span class="meta">@Result(name = <span class="meta-string">"home"</span>, location = <span class="meta-string">"/index.jsp"</span>)</span> </div><div class="line">&#125;)</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProductAction</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="meta">@Autowired</span> <span class="comment">// 自动装配注入productService</span></div><div class="line">	ProductService productService;</div><div class="line">	List&lt;Product&gt; products;</div><div class="line">	Product product;</div><div class="line"></div><div class="line">	<span class="comment">// getters setters</span></div><div class="line"></div><div class="line">	<span class="meta">@Action(<span class="meta-string">"listProduct"</span>)</span></div><div class="line">	<span class="keyword">public</span> String list() &#123;</div><div class="line">		products = productService.list();</div><div class="line">		<span class="keyword">return</span> <span class="string">"listProduct"</span>;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="keyword">public</span> String add()&#123;</div><div class="line">		productService.add(product);</div><div class="line">		<span class="keyword">return</span> <span class="string">"listProductAction"</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">public</span> String edit()&#123;</div><div class="line">		product = productService.<span class="keyword">get</span>(product.getId());</div><div class="line">		<span class="keyword">return</span> <span class="string">"editProduct"</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">public</span> String delete()&#123;</div><div class="line">		productService.delete(product);</div><div class="line">		<span class="keyword">return</span> <span class="string">"listProductAction"</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">public</span> String update()&#123;</div><div class="line">		productService.update(product);</div><div class="line">		<span class="keyword">return</span> <span class="string">"listProductAction"</span>;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Namespace</span>(<span class="string">"/User"</span>)</div><div class="line"><span class="meta">@Result</span>(name=<span class="string">"success"</span>, location=<span class="string">"pages/login.jsp"</span>)</div><div class="line">public <span class="class"><span class="keyword">class</span> <span class="title">LoginAction</span> <span class="keyword">extends</span> <span class="title">ActionSupport</span> </span>&#123;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight dts"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">http:</span><span class="comment">//localhost:8080/struts2example/User/login.action</span></div><div class="line"><span class="comment">// 默认在 WEB-INF/content/下</span></div><div class="line"><span class="meta-keyword">/struts2example/</span>WEB-INF<span class="meta-keyword">/content/</span>User<span class="meta-keyword">/pages/</span>login.jsp</div></pre></td></tr></table></figure>
<p>如果JSP页面存储在其他位置，可以使用 @ResultPath注释改变。<br><figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">@Namespace</span>(<span class="string">"/User"</span>)</div><div class="line"><span class="variable">@ResultPath</span>(value=<span class="string">"/"</span>)</div><div class="line"><span class="variable">@Result</span>(name=<span class="string">"success"</span>, location=<span class="string">"pages/login.jsp"</span>)</div><div class="line">public class LoginAction extends ActionSupport&#123;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="string">http:</span><span class="comment">//localhost:8080/struts2example/User/login.action</span></div><div class="line"><span class="comment">// now</span></div><div class="line"><span class="regexp">/Struts2Example/</span>User<span class="regexp">/pages/</span>login.jsp</div></pre></td></tr></table></figure>
<p>全局@ResultPath<br><figure class="highlight applescript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;<span class="built_in">constant</span> <span class="built_in">name</span>=<span class="string">"struts.convention.result.path"</span> value=<span class="string">"/"</span>/&gt;</div></pre></td></tr></table></figure></p>
<p>OpenSessionInView</p>
<p>当将事务织入到 Service 层后，在 Dao 层通过 load()等具有延迟加载功能的方法加载实体时，会出现异常：<br><code>org.hibernate.LazyInitializationException: could not initialize proxy - no Session</code>。</p>
<p>解决办法：<br>问题原因是事务应用在业务层，而延迟加载使得对 Hibernate 的 Session 的连续使用放在了 View 层。<br>若要 Session 不自动关闭，必须使其所在的事务环境不在 Service 层就结束，可以将 Session 的开启放在 View 层。<br>在 web.xml 中注册 OpenSessionInViewFilter （开启 Session 在 View），只要用户提交请求，就会先执行该过滤器，将 Session 开启。<br>该过滤器自动从 Spring 配置文件中查找名为 sessionFactory 的 Bean，若定义的不是这个名称，需通过<code>&lt;init-param/&gt;</code>指定。<br>该过滤器应注册在 StrutsPrepareAndExecuteFilter 前面，即在进入 Struts2 前先过滤。</p>

				</div>
				<!-- about -->
				
			</div>
			<!-- pagination -->
			
			<div class="comment-section">
	
	


</div>
		</div>
		
	</div>


		<footer>
			
<p>Powered by <a href="https://hexo.io">Hexo</a> with <a href="https://github.com/wayou/hexo-theme-material">Material</a> theme modified by <b> Huangzhike </b></p>
<p>&copy; 2017 <a href="https://huangzhike.github.io"><b> Huangzhike </b></a></p>
<a id="gotop" href="#" title="back to top"><i class="mdi-hardware-keyboard-arrow-up"></i></a>

		</footer>
	</div>
	<!-- <script src="/libs/bs/js/bootstrap.min.js"></script> -->
	<!-- <script src="//apps.bdimg.com/libs/bootstrap/3.3.4/js/bootstrap.min.js"></script> -->
	<script src="/js/highlight.js"></script> 
	<script>hljs.initHighlightingOnLoad();var timeEnd = new Date();console.log('耗时：' + (timeEnd - timeStart));</script>
	<!-- <script>(typeof $().modal == 'function')|| document.write('<script src="/libs/bs/js/bootstrap.min.js" type="text/javascript"><\/script>')</script>-->
	<!-- material design -->
	<!-- <script src="/libs/bs-material/js/ripples.min.js"></script> -->
	<!-- <script src="//apps.bdimg.com/libs/bootstrap-material/0.3.0/js/ripples.min.js"></script> -->
	<!-- <script src="/libs/bs-material/js/material.min.js"></script> -->
	<!-- <script src="//apps.bdimg.com/libs/bootstrap-material/0.3.0/js/material.min.js"></script>-->
	<!-- toc -->
	<!-- <script src="/libs/tocify/jquery-ui.min.js"></script> -->
	<!-- <script src="//apps.bdimg.com/libs/jqueryui/1.10.4/jquery-ui.min.js"></script> -->
	<!-- <script src="/libs/tocify/jquery.tocify.custom.js"></script> -->
	<!-- <script src="/js/main.js"></script> -->
</body>
</html>
