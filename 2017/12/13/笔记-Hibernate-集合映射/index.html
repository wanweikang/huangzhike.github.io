<!DOCTYPE HTML>
<html>
	<head><meta name="generator" content="Hexo 3.9.0">
		<meta charset="utf-8">
		<script src="/js/highlight.js"></script>
				<script>hljs.initHighlightingOnLoad();var timeStart = new Date();</script>
		
		<title>[笔记]-Hibernate-集合映射 | 学而时习之</title>
		
		<meta name="author" content="Huangzhike">
		
		
		<meta name="description" content="K.I.S.S">
		
		
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
		
		<meta property="og:title" content="[笔记]-Hibernate-集合映射">
		
		<meta property="og:site_name" content="学而时习之">
		
		
		<!-- favicon -->
		<link rel="icon" type="image/ico" href="/ok.ico" sizes="32x32">
 


		<meta name="msapplication-TileColor" content="#009688">
		<meta name="msapplication-TileImage" content="/mstile-144x144.ico">
		<meta name="theme-color" content="#009688">

    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Didact+Gothic"> 

		<!-- favicon end -->
		<!-- <link href="//ok.ico" rel="icon"> -->
		
		<!-- toc -->
		<!-- <link rel="stylesheet" href="/libs/tocify/jquery.tocify.css" media="screen" type="text/css"> -->
		<!-- <link rel="stylesheet" href="/libs/bs/css/bootstrap.min.css" media="screen" type="text/css"> -->
		<!--<link rel="stylesheet" href="//apps.bdimg.com/libs/bootstrap/3.3.4/css/bootstrap.min.css" media="screen" type="text/css">-->
		<!-- material design -->
		<!-- <link rel="stylesheet" href="/libs/bs-material/css/ripples.min.css" media="screen" type="text/css"> -->
		<!-- <link rel="stylesheet" href="//apps.bdimg.com/libs/bootstrap-material/0.3.0/css/ripples.min.css" media="screen" type="text/css"> -->
		<!-- <link rel="stylesheet" href="/libs/bs-material/css/material.min.css" media="screen" type="text/css"> -->
		<!--<link rel="stylesheet" href="//apps.bdimg.com/libs/bootstrap-material/0.3.0/css/material.min.css" media="screen" type="text/css"> -->
		<!--<link rel="stylesheet" href="/css/highlight.light.css" media="screen" type="text/css">-->
		<link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
		 
		 
		<!-- <script src="//apps.bdimg.com/libs/jquery/2.0.3/jquery.min.js"></script>-->
		<!-- <script>window.jQuery || document.write('<script src="/libs/jquery-3.1.1.slim.min.js" type="text/javascript"><\/script>')</script>-->
	</head>
</html>
<body>
	<nav class="navbar navbar-default">
	<div class="container">
		<div class="navbar-header">
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
				<span class="sr-only">菜单</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			<a class="navbar-brand" href="/">学而时习之</a>
           
		</div>
		<div id="navbar" class="collapse navbar-collapse">
			<ul class="nav navbar-nav navbar-right">
				
				<li>
					<a href="https://huangzhike.github.io/" title="">
						<i class="fa fa-home"></i>Index
					</a>
				</li>
				
				<li>
					<a href="https://huangzhike.github.io/archives" title="">
						<i class="fa fa-list"></i>Archives
					</a>
				</li>
				
				<li>
					<a href="https://github.com/huangzhike" title="">
						<i class="fa fa-github"></i>GitHub
					</a>
				</li>
				
			</ul>
		</div>
	</div>
</nav>

	<div class="container" >
		<div class="row">
	
		<div class="col-md-9 center-content">
			
			<div class="content">
				<!-- index -->
				
				<h2>[笔记]-Hibernate-集合映射</h2>
				
				<div>
					<div class="post-time">2017-12-13</div>
				</div>
				
				<div class="article-content">
				<p><strong>12-28重新整理更新Hibernate笔记</strong></p>
<p>集合映射：映射持久类的集合元素。</p>
<p>从以下类型之一声明持久类中的集合接口类型：</p>
<ul>
<li><code>java.util.List</code>：和<code>&lt;list&gt;</code>匹配并用<code>java.util.ArrayList</code>初始化。</li>
<li><code>java.util.Set</code>：和<code>&lt;set&gt;</code>匹配并用<code>java.util.HashSet</code>初始化。</li>
<li><code>java.util.SortedSet</code>：和<code>&lt;set&gt;</code>匹配并用<code>java.util.TreeSet</code>初始化。</li>
<li><code>java.util.Map</code>：和<code>&lt;map&gt;</code>匹配并用<code>java.util.HashMap</code>初始化。</li>
<li><code>java.util.SortedMap</code>：和<code>&lt;map&gt;</code>匹配并用<code>java.util.TreeMap</code>初始化。</li>
<li><code>java.util.Collection</code>：和<code>&lt;bag&gt;</code>匹配并用<code>java.util.ArrayList</code>初始化。</li>
</ul>
<p>集合元素可以具有值或实体引用(另一个对象)：</p>
<ul>
<li>普通值，如String<ul>
<li>element</li>
<li>component-element</li>
</ul>
</li>
<li>实体引用<ul>
<li>one-to-many</li>
<li>many-to-many</li>
</ul>
</li>
</ul>
<p>如果持久类有<code>List</code>对象，通过<code>&lt;list&gt;</code>或<code>&lt;bag&gt;</code>元素映射。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">public class Question &#123;</span><br><span class="line">	private int id;</span><br><span class="line">	private List&lt;String&gt; ans;</span><br><span class="line">	private List&lt;Answer&gt; answers;</span><br><span class="line">	// getters and setters</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public class Answer &#123;</span><br><span class="line">	private int id;</span><br><span class="line">	// ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>使用<code>&lt;list&gt;</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;class name=&quot;mmp.Question&quot; table=&quot;q100&quot;&gt;</span><br><span class="line">	&lt;id name=&quot;id&quot;&gt;</span><br><span class="line">		&lt;generator class=&quot;increment&quot;/&gt;</span><br><span class="line">	&lt;/id&gt;</span><br><span class="line">	&lt;!-- 集合存储字符串对象 --&gt;</span><br><span class="line">	&lt;list name=&quot;ans&quot; table=&quot;ans100&quot;&gt;</span><br><span class="line">		&lt;!-- key：集合外键的列名，被连接表中定义了一个外键引用原表的主键 --&gt;</span><br><span class="line">		&lt;!-- 外键元素默认为空，对于不可空的外键，需要指定 not-null=&quot;true&quot; --&gt;</span><br><span class="line">		&lt;key column=&quot;qid&quot;/&gt;</span><br><span class="line">		&lt;!-- 集合可分为两种：索引，非索引 --&gt;</span><br><span class="line">		&lt;!-- List和Map都可被索引，需要额外的&lt;index&gt; --&gt;</span><br><span class="line">		&lt;!-- 用于存放索引的列 --&gt;</span><br><span class="line">		&lt;index column=&quot;type&quot;/&gt;</span><br><span class="line">		&lt;!-- 集合的元素 --&gt;</span><br><span class="line">		&lt;element column=&quot;answer&quot; type=&quot;string&quot;/&gt;</span><br><span class="line">	&lt;/list&gt;</span><br><span class="line">	&lt;!-- 集合存储实体对象 --&gt;</span><br><span class="line">	&lt;list name=&quot;answers&quot; cascade=&quot;all&quot;&gt;</span><br><span class="line">		&lt;key column=&quot;qid&quot;/&gt;</span><br><span class="line">		&lt;index column=&quot;type&quot;/&gt;</span><br><span class="line">		&lt;!-- 一对多关系映射，一个问题有很多答案 --&gt;</span><br><span class="line">		&lt;one-to-many class=&quot;mmp.Answer&quot;/&gt;</span><br><span class="line">	&lt;/list&gt;</span><br><span class="line">&lt;/class&gt;</span><br><span class="line"></span><br><span class="line">&lt;class name=&quot;mmp.Answer&quot; table=&quot;ans501&quot;&gt;</span><br><span class="line">	&lt;id name=&quot;id&quot;&gt;</span><br><span class="line">		&lt;generator class=&quot;increment&quot;/&gt;</span><br><span class="line">	&lt;/id&gt;</span><br><span class="line">&lt;/class&gt;</span><br></pre></td></tr></table></figure></p>
<p>使用<code>&lt;bag&gt;</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;class name=&quot;mmp.Question&quot; table=&quot;q101&quot;&gt;</span><br><span class="line">	&lt;id name=&quot;id&quot;&gt;</span><br><span class="line">		&lt;generator class=&quot;increment&quot;/&gt;</span><br><span class="line">	&lt;/id&gt;</span><br><span class="line">	&lt;bag name=&quot;ans&quot; table=&quot;ans101&quot;&gt;</span><br><span class="line">		&lt;key column=&quot;qid&quot;/&gt;</span><br><span class="line">		&lt;!-- bag不需要&lt;index&gt; --&gt;</span><br><span class="line">		&lt;element column=&quot;answer&quot; type=&quot;string&quot;/&gt;</span><br><span class="line">	&lt;/bag&gt;</span><br><span class="line">	&lt;!-- 略 --&gt;</span><br><span class="line">&lt;/class&gt;</span><br></pre></td></tr></table></figure></p>
<p>如果持久类有数组对象，通过<code>&lt;array&gt;</code>元素映射，基本是把<code>&lt;list&gt;</code>标签改成<code>&lt;array&gt;</code>就行了。</p>
<p>如果持久类具有<code>Set</code>对象，用<code>&lt;set&gt;</code>元素映射<code>Set</code>集合。</p>
<ul>
<li><code>&lt;set&gt;</code>元素不需要索引元素。</li>
<li><code>Set</code>只存储唯一的值。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public class Question &#123;</span><br><span class="line">	private int id;</span><br><span class="line">	private String qname;</span><br><span class="line">	private Set&lt;Answer&gt; answers;</span><br><span class="line">	// ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">public class Answer &#123;</span><br><span class="line">	private int id;</span><br><span class="line">	private String answer;</span><br><span class="line">	private int qid;</span><br><span class="line">	private Question question;</span><br><span class="line">	// ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;class name=&quot;mmp.Question&quot; table=&quot;q1002&quot;&gt;</span><br><span class="line">	&lt;id name=&quot;id&quot;&gt;</span><br><span class="line">		&lt;generator class=&quot;increment&quot;/&gt;</span><br><span class="line">	&lt;/id&gt;</span><br><span class="line">	&lt;property name=&quot;qname&quot;/&gt;</span><br><span class="line">	&lt;set name=&quot;answers&quot; table=&quot;a1002&quot; inverse=&quot;true&quot; lazy=&quot;true&quot; fetch=&quot;select&quot;&gt;</span><br><span class="line">		&lt;key column=&quot;qid&quot; not-null=&quot;true&quot;/&gt;</span><br><span class="line">		&lt;one-to-many class=&quot;mmp.Answer&quot;/&gt;</span><br><span class="line">	&lt;/set&gt;</span><br><span class="line">&lt;/class&gt;</span><br><span class="line"></span><br><span class="line">&lt;class name=&quot;mmp.Answer&quot; table=&quot;a1002&quot;&gt;</span><br><span class="line">	&lt;id name=&quot;id&quot;&gt;</span><br><span class="line">		&lt;generator class=&quot;increment&quot;/&gt;</span><br><span class="line">	&lt;/id&gt;</span><br><span class="line">	&lt;property name=&quot;answer&quot;/&gt;</span><br><span class="line">	&lt;many-to-one name=&quot;question&quot; class=&quot;mmp.Question&quot; fetch=&quot;select&quot; column=&quot;qid&quot; not-null=&quot;true&quot;/&gt;</span><br><span class="line">&lt;/class&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Question question1 = new Question();</span><br><span class="line">question1.setQname(&quot;What is Java?&quot;);</span><br><span class="line">session.save(question1);</span><br><span class="line"></span><br><span class="line">Answer ans1 = new Answer();</span><br><span class="line">ans1.setAnswer(&quot;java is a programming language&quot;);</span><br><span class="line">ans1.setQuestion(question1);</span><br><span class="line">// question1.getAnswers().add(ans1);</span><br><span class="line">session.save(ans1);</span><br><span class="line"></span><br><span class="line">Answer ans2 = new Answer();</span><br><span class="line">ans2.setAnswer(&quot;java is a platform&quot;);</span><br><span class="line">ans2.setQuestion(question1);</span><br><span class="line">session.save(ans2);</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Question&gt; list = session.createQuery(&quot;from Question&quot;).list();</span><br><span class="line"></span><br><span class="line">Iterator&lt;Question&gt; itr = list.iterator();</span><br><span class="line"></span><br><span class="line">while (itr.hasNext()) &#123;</span><br><span class="line">	Question q = itr.next();</span><br><span class="line"></span><br><span class="line">	Set&lt;Answer&gt; set = q.getAnswers();</span><br><span class="line">	Iterator&lt;Answer&gt; itr2 = set.iterator();</span><br><span class="line"></span><br><span class="line">	while (itr2.hasNext()) &#123;</span><br><span class="line">		System.out.println(itr2.next());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>List</code>和<code>Map</code>是基于索引的集合。<code>Map</code>索引列作键，元素列作值。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public class Question &#123;</span><br><span class="line">	private int id;</span><br><span class="line">	private String name;</span><br><span class="line">	private Map&lt;String, String&gt; answers;</span><br><span class="line">	//</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;hibernate-mapping&gt;</span><br><span class="line">	&lt;class name=&quot;mmp.Question&quot; table=&quot;question_736&quot;&gt;</span><br><span class="line">		&lt;id name=&quot;id&quot;&gt;</span><br><span class="line">			&lt;generator class=&quot;native&quot;/&gt;</span><br><span class="line">		&lt;/id&gt;</span><br><span class="line">		&lt;property name=&quot;name&quot;/&gt;</span><br><span class="line">		&lt;map name=&quot;answers&quot; table=&quot;answer736&quot; cascade=&quot;all&quot;&gt;</span><br><span class="line">			&lt;key column=&quot;questionid&quot;/&gt;</span><br><span class="line">			&lt;index column=&quot;answer&quot; type=&quot;string&quot;/&gt;</span><br><span class="line">			&lt;element column=&quot;username&quot; type=&quot;string&quot;/&gt;</span><br><span class="line">		&lt;/map&gt;</span><br><span class="line">	&lt;/class&gt;</span><br><span class="line">&lt;/hibernate-mapping&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">HashMap&lt;String, String&gt; map1 = new HashMap&lt;&gt;();</span><br><span class="line">map1.put(&quot;java is a programming language&quot;, &quot;John Lee&quot;);</span><br><span class="line">map1.put(&quot;java is a platform&quot;, &quot;Ashok Su&quot;);</span><br><span class="line"></span><br><span class="line">HashMap&lt;String, String&gt; map2 = new HashMap&lt;&gt;();</span><br><span class="line">map2.put(&quot;Servlet is an Interface&quot;, &quot;Ashok Lee&quot;);</span><br><span class="line">map2.put(&quot;Servlet is a package&quot;, &quot;Rahul Su&quot;);</span><br><span class="line"></span><br><span class="line">Question question1 = new Question(&quot;What is java?&quot;, map1);</span><br><span class="line">Question question2 = new Question(&quot;What is servlet?&quot;, map2);</span><br><span class="line"></span><br><span class="line">session.persist(question1);</span><br><span class="line">session.persist(question2);</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Question&gt; list = session.createQuery(&quot;from Question&quot;).list();</span><br><span class="line"></span><br><span class="line">Iterator&lt;Question&gt; iterator = list.iterator();</span><br><span class="line"></span><br><span class="line">while (iterator.hasNext()) &#123;</span><br><span class="line">	Question question = iterator.next();</span><br><span class="line"></span><br><span class="line">	Map&lt;String, String&gt; map = question.getAnswers();</span><br><span class="line"></span><br><span class="line">	Set&lt;Map.Entry&lt;String, String&gt;&gt; set = map.entrySet();</span><br><span class="line"></span><br><span class="line">	Iterator&lt;Map.Entry&lt;String, String&gt;&gt; iteratoranswer = set.iterator();</span><br><span class="line"></span><br><span class="line">	while (iteratoranswer.hasNext()) &#123;</span><br><span class="line">		Map.Entry&lt;String, String&gt; entry = (Map.Entry&lt;String, String&gt;) iteratoranswer.next();</span><br><span class="line">		System.out.println(&quot;answer:&quot; + entry.getKey());</span><br><span class="line">		System.out.println(&quot;answer posted by: &quot; + entry.getValue());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>使用<code>&lt;map&gt;</code>来进行多对多映射。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public class Question &#123;</span><br><span class="line">	private int id;</span><br><span class="line">	private String name;</span><br><span class="line">	private Map&lt;String, User&gt; answers;</span><br><span class="line">	// ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public class User &#123;</span><br><span class="line">	private int id;</span><br><span class="line">	private String username;</span><br><span class="line">	// ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 一共3张表 --&gt;</span><br><span class="line">&lt;class name=&quot;mmp.Question&quot; table=&quot;question_m2m&quot;&gt;</span><br><span class="line">	&lt;id name=&quot;id&quot;&gt;</span><br><span class="line">		&lt;generator class=&quot;native&quot;/&gt;</span><br><span class="line">	&lt;/id&gt;</span><br><span class="line">	&lt;property name=&quot;name&quot;/&gt;</span><br><span class="line">	&lt;map name=&quot;answers&quot; table=&quot;answer_m2m&quot; cascade=&quot;all&quot;&gt;</span><br><span class="line">		&lt;key column=&quot;questionid&quot;/&gt;</span><br><span class="line">		&lt;index column=&quot;answer&quot; type=&quot;string&quot;/&gt;</span><br><span class="line">		&lt;many-to-many class=&quot;mmp.User&quot; column=&quot;userid&quot;/&gt;</span><br><span class="line">	&lt;/map&gt;</span><br><span class="line">&lt;/class&gt;</span><br><span class="line"></span><br><span class="line">&lt;class name=&quot;mmp.User&quot; table=&quot;user_m2m&quot;&gt;</span><br><span class="line">	&lt;id name=&quot;id&quot;&gt;</span><br><span class="line">		&lt;generator class=&quot;native&quot;/&gt;</span><br><span class="line">	&lt;/id&gt;</span><br><span class="line">	&lt;property name=&quot;username&quot;/&gt;</span><br><span class="line">&lt;/class&gt;</span><br></pre></td></tr></table></figure>
<p>组件映射<code>Component Mappings</code></p>
<ul>
<li>作为变量的一员实体类很可能和其它类有相关关系。</li>
<li>组件是存储为值而不是实体引用的对象。</li>
<li>如果从属对象没有主键，则要使用此方法。</li>
<li>它用于组合(HAS-A关系)的情况下。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public class Employee &#123;</span><br><span class="line">	private int id;</span><br><span class="line">	private String name;</span><br><span class="line">	private Address address;</span><br><span class="line">	//</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">public class Address &#123;</span><br><span class="line">	private String country;</span><br><span class="line">	//</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;hibernate-mapping&gt;</span><br><span class="line">	&lt;class name=&quot;mmp.Employee&quot; table=&quot;emp_cpmap&quot;&gt;</span><br><span class="line">		&lt;id name=&quot;id&quot;&gt;</span><br><span class="line">			&lt;generator class=&quot;increment&quot;/&gt;</span><br><span class="line">		&lt;/id&gt;</span><br><span class="line">		&lt;property name=&quot;name&quot;/&gt;</span><br><span class="line">		&lt;component name=&quot;address&quot; class=&quot;mmp.Address&quot;&gt;</span><br><span class="line">			&lt;property name=&quot;country&quot;/&gt;</span><br><span class="line">			&lt;!-- EMPLOYEE表中将包括country字段 --&gt;</span><br><span class="line">		&lt;/component&gt;</span><br><span class="line">	&lt;/class&gt;</span><br><span class="line">&lt;/hibernate-mapping&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Employee e = new Employee(&quot;Mina Sun&quot;, new Address(&quot;China&quot;));</span><br></pre></td></tr></table></figure>
				</div>
				<!-- about -->
				
			</div>
			<!-- pagination -->
			
			<div class="comment-section">
	
	


</div>
		</div>
		
	</div>


		<footer>
			 
<a id="gotop" href="#" title="back to top"><i class="mdi-hardware-keyboard-arrow-up"></i></a>

		</footer>
	</div>
	<!-- <script src="/libs/bs/js/bootstrap.min.js"></script> -->
	<!-- <script src="//apps.bdimg.com/libs/bootstrap/3.3.4/js/bootstrap.min.js"></script> -->

	<script>var timeEnd = new Date();console.log('耗时：' + (timeEnd - timeStart));</script>
	<!-- <script>(typeof $().modal == 'function')|| document.write('<script src="/libs/bs/js/bootstrap.min.js" type="text/javascript"><\/script>')</script>-->
	<!-- material design -->
	<!-- <script src="/libs/bs-material/js/ripples.min.js"></script> -->
	<!-- <script src="//apps.bdimg.com/libs/bootstrap-material/0.3.0/js/ripples.min.js"></script> -->
	<!-- <script src="/libs/bs-material/js/material.min.js"></script> -->
	<!-- <script src="//apps.bdimg.com/libs/bootstrap-material/0.3.0/js/material.min.js"></script>-->
	<!-- toc -->
	<!-- <script src="/libs/tocify/jquery-ui.min.js"></script> -->
	<!-- <script src="//apps.bdimg.com/libs/jqueryui/1.10.4/jquery-ui.min.js"></script> -->
	<!-- <script src="/libs/tocify/jquery.tocify.custom.js"></script> -->
	<!-- <script src="/js/main.js"></script> -->
</body>
</html>
