<!DOCTYPE HTML>
<html>
    <head>
        <meta charset="utf-8">
        <script>
            var timeStart = new Date();
        </script>
        
        <title>[ç¬”è®°]-Hibernate-æŸ¥è¯¢ | ğŸŒ‘ğŸŒ’ğŸŒ“ğŸŒ”ğŸŒ•ğŸŒ–ğŸŒ—ğŸŒ˜</title>
        
        <meta name="author" content="huangzhike">
        
        
        <meta name="description" content="12-28é‡æ–°æ•´ç†æ›´æ–°Hibernateç¬”è®°
Queryå’ŒCriteriaè´Ÿè´£æŸ¥è¯¢ã€‚
Hibernate Query Language ç±»ä¼¼SQLï¼Œä½†ä¸å¯¹è¡¨å’Œåˆ—æ“ä½œï¼Œè€Œæ˜¯é¢å‘å¯¹è±¡å’Œå®ƒçš„å±æ€§ã€‚
HQLä½¿ç”¨ç±»åï¼Œè€Œä¸æ˜¯è¡¨åã€‚
FROM
// åŠ è½½å®Œæ•´å¯¹è±¡
String hql = &#34;FROM Emplo">
        
        
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
        
        <meta property="og:title" content="[ç¬”è®°]-Hibernate-æŸ¥è¯¢"/>
        
        <meta property="og:site_name" content="ğŸŒ‘ğŸŒ’ğŸŒ“ğŸŒ”ğŸŒ•ğŸŒ–ğŸŒ—ğŸŒ˜"/>
        
        
        <!-- favicon -->
        <link rel="icon" type="image/ico" href="/ok.ico" sizes="32x32">
        <meta name="msapplication-TileColor" content="#009688">
        <meta name="msapplication-TileImage" content="/mstile-144x144.ico">
        <meta name="theme-color" content="#009688">
        <!-- favicon end -->
        <!-- <link href="//ok.ico" rel="icon"> -->
        
        <!-- toc -->
        <!-- <link rel="stylesheet" href="/libs/tocify/jquery.tocify.css" media="screen" type="text/css"> -->
        <!-- <link rel="stylesheet" href="/libs/bs/css/bootstrap.min.css" media="screen" type="text/css"> -->
        <!--<link rel="stylesheet" href="//apps.bdimg.com/libs/bootstrap/3.3.4/css/bootstrap.min.css" media="screen" type="text/css">-->
        <!-- material design -->
        <!-- <link rel="stylesheet" href="/libs/bs-material/css/ripples.min.css" media="screen" type="text/css"> -->
        <!-- <link rel="stylesheet" href="//apps.bdimg.com/libs/bootstrap-material/0.3.0/css/ripples.min.css" media="screen" type="text/css"> -->
        <!-- <link rel="stylesheet" href="/libs/bs-material/css/material.min.css" media="screen" type="text/css"> -->
        <!--<link rel="stylesheet" href="//apps.bdimg.com/libs/bootstrap-material/0.3.0/css/material.min.css" media="screen" type="text/css"> -->
        <!--<link rel="stylesheet" href="/css/highlight.light.css" media="screen" type="text/css">-->
        <link rel="stylesheet" href="/css/bootstrap.min.css" media="screen" type="text/css">
        <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
        <link rel="stylesheet" href="/css/prism.css" media="screen" type="text/css">
        
        <!-- <script src="//apps.bdimg.com/libs/jquery/2.0.3/jquery.min.js"></script>-->
        <!-- <script>window.jQuery || document.write('<script src="/libs/jquery-3.1.1.slim.min.js" type="text/javascript"><\/script>')</script>-->
    <meta name="generator" content="Hexo 4.2.1"></head>

<body>
    <nav class="navbar navbar-default">
	<div class="container">
		<div class="navbar-header">
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
				<span class="sr-only">èœå•</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			<a class="navbar-brand" title="ä¸‹ä¸€å¥æ˜¯ï¼šå®¢æœ‰å¯äººæœŸä¸æ¥ã€‚å°æ—¶å€™ï¼Œå–œæ¬¢é åœ¨é˜³å°ä¸Šï¼Œä¸€è¾¹å¹é£ï¼Œä¸€è¾¹çœ‹ä¹¦ï¼Œå–œæ¬¢è¯»ä¹¦å—ï¼Œéªšå¹´ï¼Ÿ" href="/">ä¹¦å½“å¿«æ„è¯»æ˜“å°½</a>
           
		</div>
		<div id="navbar" class="collapse navbar-collapse">
			<ul class="nav navbar-nav navbar-right">
				
				<li>
					<a href="https://huangzhike.github.io/archives" title="">
						<i class="fa fa-list"></i>Archives
					</a>
				</li>
				
				<li>
					<a href="https://github.com/huangzhike" target="_blank" rel="noopener" title="">
						<i class="fa fa-github"></i>GitHub
					</a>
				</li>
				
			</ul>
		</div>
	</div>
</nav>

    <div class="container" >
        <div class="row">
	
		<div class="col-md-9 center-content">
			
			<div class="content">
				<!-- index -->
				
				<h2>[ç¬”è®°]-Hibernate-æŸ¥è¯¢</h2>
				
				<div>
					<div class="post-time">2017-12-13</div>
				</div>
				
				<div class="article-content">
				<p><strong>12-28é‡æ–°æ•´ç†æ›´æ–°Hibernateç¬”è®°</strong></p>
<p><code>Query</code>å’Œ<code>Criteria</code>è´Ÿè´£æŸ¥è¯¢ã€‚</p>
<p>Hibernate Query Language ç±»ä¼¼SQLï¼Œä½†ä¸å¯¹è¡¨å’Œåˆ—æ“ä½œï¼Œè€Œæ˜¯é¢å‘å¯¹è±¡å’Œå®ƒçš„å±æ€§ã€‚</p>
<p>HQLä½¿ç”¨ç±»åï¼Œè€Œä¸æ˜¯è¡¨åã€‚</p>
<p>FROM</p>
<pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// åŠ è½½å®Œæ•´å¯¹è±¡</span>
String hql <span class="token operator">=</span> <span class="token string">"FROM Employee"</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// here persistent class name is Employee</span>

<span class="token comment" spellcheck="true">// å°è£…HQLè¯­å¥</span>
Query query <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">createQuery</span><span class="token punctuation">(</span>hql<span class="token punctuation">)</span><span class="token punctuation">;</span>

List results <span class="token operator">=</span> query<span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// query.uniqueResult(); å•ä¸ªç»“æœï¼Œå¦‚æœæœ‰å¤šä¸ªå°±ä¼šæŠ›å¼‚å¸¸</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span>Object o <span class="token operator">:</span> results<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>Arrays<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">(</span>Object<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

Iterator<span class="token operator">&lt;</span>Object<span class="token operator">></span> itr <span class="token operator">=</span> results<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">while</span> <span class="token punctuation">(</span>itr<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Object o <span class="token operator">=</span> itr<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>AS</p>
<pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// ç»™ç±»åˆ†é…åˆ«å</span>
String hql <span class="token operator">=</span> <span class="token string">"FROM Employee AS E"</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// String hql = "FROM Employee E";</span></code></pre>
<p>SELECT</p>
<pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// Employee.nameæ˜¯Employeeå¯¹è±¡çš„å±æ€§ï¼Œä¸æ˜¯EMPLOYEEè¡¨çš„å­—æ®µ</span>
String hql <span class="token operator">=</span> <span class="token string">"SELECT E.name FROM Employee E"</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// hql = "SELECT e.name FROM Employee e"; // åªæŸ¥è¯¢ä¸€ä¸ªåˆ—ï¼Œè¿”å›çš„é›†åˆçš„å…ƒç´ ç±»å‹å°±æ˜¯è¿™ä¸ªå±æ€§çš„ç±»å‹</span>
<span class="token comment" spellcheck="true">// hql = "SELECT e.id, e.name FROM Employee e"; // æŸ¥è¯¢å¤šä¸ªåˆ—ï¼Œè¿”å›çš„é›†åˆçš„å…ƒç´ ç±»å‹æ˜¯Objectæ•°ç»„</span>
<span class="token comment" spellcheck="true">// hql = "SELECT new Employee(e.id, e.name) FROM Employee e"; // æŒ‡å®šæŠŠæŸ¥è¯¢å‡ºçš„éƒ¨åˆ†å±æ€§å°è£…åˆ°å¯¹è±¡ä¸­</span></code></pre>
<p>WHERE</p>
<pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// è¿”å›ç‰¹å®šå¯¹è±¡</span>
String hql <span class="token operator">=</span> <span class="token string">"FROM Employee E WHERE E.id = 10"</span><span class="token punctuation">;</span></code></pre>
<p>ORDER BY</p>
<pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// æ’åº</span>
String hql <span class="token operator">=</span> <span class="token string">"FROM Employee E WHERE E.id > 10 ORDER BY E.name DESC, E.salary DESC"</span><span class="token punctuation">;</span></code></pre>
<p>GROUP BY</p>
<pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// ç¼–ç»„</span>
String hql <span class="token operator">=</span> <span class="token string">"SELECT SUM(E.salary), E.name FROM Employee E GROUP BY E.name"</span><span class="token punctuation">;</span></code></pre>
<p>å‘½åå‚æ•°</p>
<pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// èƒ½æ¥å—æ¥è‡ªç”¨æˆ·çš„ç®€å•è¾“å…¥ï¼Œåˆæ— éœ€é˜²å¾¡ SQL æ³¨å…¥</span>
String hql <span class="token operator">=</span> <span class="token string">"FROM Employee E WHERE E.id = :employee_id"</span><span class="token punctuation">;</span>
Query query <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">createQuery</span><span class="token punctuation">(</span>hql<span class="token punctuation">)</span><span class="token punctuation">;</span>
query<span class="token punctuation">.</span><span class="token function">setParameter</span><span class="token punctuation">(</span><span class="token string">"employee_id"</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// search with parameters whose type is collection</span>
String hql<span class="token operator">=</span> <span class="token string">"select e.id, e.name from Employee e where id in (:ids)"</span><span class="token punctuation">;</span>
Query query <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">createQuery</span><span class="token punctuation">(</span>hql<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setParameterList</span><span class="token punctuation">(</span><span class="token string">"ids"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// public Query setParameter(String name, Object value) å®ƒå°†è¯¥å€¼è®¾ç½®ä¸ºå‘½åæŸ¥è¯¢å‚æ•°</span></code></pre>
<pre class=" language-java"><code class="language-java">String hql<span class="token operator">=</span> <span class="token string">"select e.id, e.name from Employee e where id >= ? and id &lt;= ?"</span><span class="token punctuation">;</span>
Query query <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">createQuery</span><span class="token punctuation">(</span>hql<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setParameter</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setParameter</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// public Query setParameter(int position, Object value) å®ƒå°†è¯¥å€¼è®¾ç½®ä¸ºJDBCæ ·å¼æŸ¥è¯¢å‚æ•°</span></code></pre>
<p>UPDATE</p>
<pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// æ›´æ–°ä¸€ä¸ªæˆ–å¤šä¸ªå¯¹è±¡çš„ä¸€ä¸ªæˆ–å¤šä¸ªå±æ€§</span>
String hql <span class="token operator">=</span> <span class="token string">"UPDATE Employee set salary = :salary WHERE id = :employee_id"</span><span class="token punctuation">;</span>
Query query <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">createQuery</span><span class="token punctuation">(</span>hql<span class="token punctuation">)</span><span class="token punctuation">;</span>
query<span class="token punctuation">.</span><span class="token function">setParameter</span><span class="token punctuation">(</span><span class="token string">"salary"</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
query<span class="token punctuation">.</span><span class="token function">setParameter</span><span class="token punctuation">(</span><span class="token string">"employee_id"</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// è¡¨ç¤ºå½±å“äº†å¤šå°‘è¡Œ</span>
<span class="token keyword">int</span> result <span class="token operator">=</span> query<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>DELETE</p>
<pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// åˆ é™¤å¯¹è±¡</span>
String hql <span class="token operator">=</span> <span class="token string">"DELETE FROM Employee WHERE id = :employee_id"</span><span class="token punctuation">;</span>
Query query <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">createQuery</span><span class="token punctuation">(</span>hql<span class="token punctuation">)</span><span class="token punctuation">;</span>
query<span class="token punctuation">.</span><span class="token function">setParameter</span><span class="token punctuation">(</span><span class="token string">"employee_id"</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> result <span class="token operator">=</span> query<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>INSERT</p>
<pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// åªæœ‰å½“è®°å½•ä»ä¸€ä¸ªå¯¹è±¡æ’å…¥åˆ°å¦ä¸€ä¸ªå¯¹è±¡æ—¶æ‰æ”¯æŒ INSERT INTO</span>
String hql <span class="token operator">=</span> <span class="token string">"INSERT INTO Employee(name, salary) SELECT name, salary FROM old_employee"</span><span class="token punctuation">;</span>
Query query <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">createQuery</span><span class="token punctuation">(</span>hql<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> result <span class="token operator">=</span> query<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>èšåˆå‡½æ•°</p>
<pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// è·å¾—æ‰€æœ‰å‘˜å·¥æ€»è–ªé…¬</span>
Query q <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">createQuery</span><span class="token punctuation">(</span><span class="token string">"select sum(salary) from Employee"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
List<span class="token operator">&lt;</span>Integer<span class="token operator">></span> list <span class="token operator">=</span> q<span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// è·å¾—å‘˜å·¥æœ€é«˜å·¥èµ„</span>
select <span class="token function">max</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> from Employee

<span class="token comment" spellcheck="true">// è·å¾—å‘˜å·¥æœ€ä½å·¥èµ„</span>
select <span class="token function">min</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> from Employee

<span class="token comment" spellcheck="true">// è·å¾—å‘˜å·¥çš„å¹³å‡å·¥èµ„</span>
select <span class="token function">avg</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> from Employee

<span class="token comment" spellcheck="true">// è®¡ç®—é›‡å‘˜IDæ€»æ•°</span>
select <span class="token function">count</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span> from Employee

<span class="token comment" spellcheck="true">// distinct å…³é”®å­—è¡¨ç¤ºåªè®¡ç®—è¡Œé›†ä¸­çš„å”¯ä¸€å€¼</span>
select <span class="token function">count</span><span class="token punctuation">(</span>distinct E<span class="token punctuation">.</span>name<span class="token punctuation">)</span> FROM Employee E</code></pre>
<p>åˆ†é¡µ</p>
<pre class=" language-java"><code class="language-java">Query query <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">createQuery</span><span class="token punctuation">(</span><span class="token string">"FROM Employee"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
query<span class="token punctuation">.</span><span class="token function">setFirstResult</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
query<span class="token punctuation">.</span><span class="token function">setMaxResult</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// æ£€ç´¢å›ºå®šæ•°é‡</span>
List list <span class="token operator">=</span> query<span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// will return the records from 5 to 10th number</span></code></pre>
<p>DMLè¯­å¥</p>
<pre class=" language-java"><code class="language-java">Employee e <span class="token operator">=</span> <span class="token punctuation">(</span>Employee<span class="token punctuation">)</span> session<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>Employee<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

String hql <span class="token operator">=</span> <span class="token string">"update Employee set name = ? where id > ?"</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> result <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">createQuery</span><span class="token punctuation">(</span>hql<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setParameter</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">"updated"</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setParameter</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// å’ŒåŸº1çš„PreparedStatementä¸ä¸€æ ·ï¼ŒQueryæ˜¯åŸº0çš„</span>
System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"count of update:"</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// updateä¸deleteï¼Œä¸ä¼šé€šçŸ¥Sessionç¼“å­˜ï¼Œéœ€è¦refresh</span>
session<span class="token punctuation">.</span><span class="token function">refresh</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<hr>
<p>Hibernateæ ‡å‡†(Criteria)æŸ¥è¯¢è¯­è¨€HCQLï¼šè¿”å›ä¸€ä¸ªæŒä¹…åŒ–å¯¹è±¡çš„ç±»çš„å®ä¾‹ã€‚</p>
<pre class=" language-java"><code class="language-java">Criteria cr <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">createCriteria</span><span class="token punctuation">(</span>Employee<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// æ·»åŠ ä¸€ä¸ªé™åˆ¶ï¼Œè¿”å›å·¥èµ„ç­‰äº 2000 çš„</span>
cr<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>Restrictions<span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token string">"salary"</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// salary more than 2000</span>
cr<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>Restrictions<span class="token punctuation">.</span><span class="token function">gt</span><span class="token punctuation">(</span><span class="token string">"salary"</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

cr<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>Restrictions<span class="token punctuation">.</span><span class="token function">lt</span><span class="token punctuation">(</span><span class="token string">"salary"</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

cr<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>Restrictions<span class="token punctuation">.</span><span class="token function">between</span><span class="token punctuation">(</span><span class="token string">"salary"</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// Name starting with zara</span>
cr<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>Restrictions<span class="token punctuation">.</span><span class="token function">like</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"zara%"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// Case sensitive form of the above restriction</span>
cr<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>Restrictions<span class="token punctuation">.</span><span class="token function">ilike</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"zara%"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

cr<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>Restrictions<span class="token punctuation">.</span><span class="token function">isNull</span><span class="token punctuation">(</span><span class="token string">"salary"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

cr<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>Restrictions<span class="token punctuation">.</span><span class="token function">isNotNull</span><span class="token punctuation">(</span><span class="token string">"salary"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

cr<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>Restrictions<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token string">"salary"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

cr<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>Restrictions<span class="token punctuation">.</span><span class="token function">isNotEmpty</span><span class="token punctuation">(</span><span class="token string">"salary"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

List results <span class="token operator">=</span> cr<span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>AND OR</p>
<pre class=" language-java"><code class="language-java">Criteria cr <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">createCriteria</span><span class="token punctuation">(</span>Employee<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Criterion salary <span class="token operator">=</span> Restrictions<span class="token punctuation">.</span><span class="token function">gt</span><span class="token punctuation">(</span><span class="token string">"salary"</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Criterion name <span class="token operator">=</span> Restrictions<span class="token punctuation">.</span><span class="token function">ilike</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> `<span class="token string">"zara%"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// To get records matching with OR condistions</span>
LogicalExpression orExp <span class="token operator">=</span> Restrictions<span class="token punctuation">.</span><span class="token function">or</span><span class="token punctuation">(</span>salary<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
cr<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>orExp<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// To get records matching with AND condistions</span>
LogicalExpression andExp <span class="token operator">=</span> Restrictions<span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span>salary<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
cr<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>andExp<span class="token punctuation">)</span><span class="token punctuation">;</span>

List results <span class="token operator">=</span> cr<span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>åˆ†é¡µ</p>
<pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// ä¸€æ¬¡å–å‡º 10 è¡Œ</span>
Criteria cr <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">createCriteria</span><span class="token punctuation">(</span>Employee<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
cr<span class="token punctuation">.</span><span class="token function">setFirstResult</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// ä»ç¬¬1æ¡æ•°æ®å¼€å§‹</span>
cr<span class="token punctuation">.</span><span class="token function">setMaxResults</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// ä¸€å…±æŸ¥è¯¢10æ¡æ•°æ®</span>
List results <span class="token operator">=</span> cr<span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>æ’åºç»“æœ</p>
<pre class=" language-java"><code class="language-java">Criteria cr <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">createCriteria</span><span class="token punctuation">(</span>Employee<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
cr<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>Restrictions<span class="token punctuation">.</span><span class="token function">gt</span><span class="token punctuation">(</span><span class="token string">"salary"</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// æ ¹æ®å¯¹è±¡çš„å±æ€§æ’åˆ—</span>
<span class="token comment" spellcheck="true">// To sort records in descening order</span>
crit<span class="token punctuation">.</span><span class="token function">addOrder</span><span class="token punctuation">(</span>Order<span class="token punctuation">.</span><span class="token function">desc</span><span class="token punctuation">(</span><span class="token string">"salary"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// To sort records in ascending order</span>
crit<span class="token punctuation">.</span><span class="token function">addOrder</span><span class="token punctuation">(</span>Order<span class="token punctuation">.</span><span class="token function">asc</span><span class="token punctuation">(</span><span class="token string">"salary"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

List results <span class="token operator">=</span> cr<span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>æŠ•å½±</p>
<p><code>Projections</code>ç±»ä¸<code>Restrictions</code>ç±»ç›¸ä¼¼ï¼Œå‡æä¾›äº†é™æ€å·¥å‚æ–¹æ³•ã€‚</p>
<pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// ä»…æ‰“å°è¡¨çš„nameåˆ—çš„æ•°æ®</span>
Criteria cr <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">createCriteria</span><span class="token punctuation">(</span>Employee<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
cr<span class="token punctuation">.</span><span class="token function">setProjection</span><span class="token punctuation">(</span>Projections<span class="token punctuation">.</span><span class="token function">property</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
List list <span class="token operator">=</span> cr<span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<pre class=" language-java"><code class="language-java">Criteria cr <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">createCriteria</span><span class="token punctuation">(</span>Employee<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// To get total row count.</span>
cr<span class="token punctuation">.</span><span class="token function">setProjection</span><span class="token punctuation">(</span>Projections<span class="token punctuation">.</span><span class="token function">rowCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
List rowCount <span class="token operator">=</span> cr<span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Total Coint: "</span> <span class="token operator">+</span> rowCount<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// To get average of a property.</span>
cr<span class="token punctuation">.</span><span class="token function">setProjection</span><span class="token punctuation">(</span>Projections<span class="token punctuation">.</span><span class="token function">avg</span><span class="token punctuation">(</span><span class="token string">"salary"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// To get distinct count of a property.</span>
cr<span class="token punctuation">.</span><span class="token function">setProjection</span><span class="token punctuation">(</span>Projections<span class="token punctuation">.</span><span class="token function">countDistinct</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// To get maximum of a property.</span>
cr<span class="token punctuation">.</span><span class="token function">setProjection</span><span class="token punctuation">(</span>Projections<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token string">"salary"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// To get minimum of a property.</span>
cr<span class="token punctuation">.</span><span class="token function">setProjection</span><span class="token punctuation">(</span>Projections<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token string">"salary"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// To get sum of a property.</span>
cr<span class="token punctuation">.</span><span class="token function">setProjection</span><span class="token punctuation">(</span>Projections<span class="token punctuation">.</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token string">"salary"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>å¸¸ç”¨çš„<code>Criteria</code>æ¥å£æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<ul>
<li><code>public Criteria add(Criterion c)</code> ç”¨äºæ·»åŠ é™åˆ¶(æ¡ä»¶)ã€‚</li>
<li><code>public Criteria addOrder(Order o)</code> æŒ‡å®šæ’åºé¡ºåºã€‚</li>
<li><code>public Criteria setFirstResult(int firstResult)</code> æŒ‡å®šè¦æ£€ç´¢çš„ç¬¬ä¸€ä¸ªè®°å½•æ•°ã€‚</li>
<li><code>public Criteria setMaxResult(int totalResult)</code> æŒ‡å®šè¦æ£€ç´¢çš„è®°å½•æ€»æ•°ã€‚</li>
<li><code>public List list()</code> è¿”å›åŒ…å«å¯¹è±¡çš„åˆ—è¡¨ã€‚</li>
<li><code>public Criteria setProjection(Projection projection)</code> æŒ‡å®šæŠ•å½±ã€‚</li>
</ul>
<hr>
<p>åŸç”ŸSQLï¼š<code>createSQLQuery()</code>æ–¹æ³•åˆ›å»ºåŸç”ŸSQLæŸ¥è¯¢</p>
<p>æ ‡å‡†SQLå¯èƒ½è¿”å›å„ç§ç»“æœï¼Œä¸èƒ½ä¿è¯èƒ½è£…è¿›ä¸€ä¸ªå¯¹è±¡ä¸­ï¼Œæ‰€ä»¥è¿”å›çš„é›†åˆé‡Œçš„æ¯ä¸€ä¸ªå…ƒç´ æ˜¯ä¸€ä¸ªå¯¹è±¡æ•°ç»„ï¼Œé€šè¿‡ä¸‹æ ‡å–å‡ºã€‚</p>
<p>æ ‡é‡æŸ¥è¯¢</p>
<pre class=" language-java"><code class="language-java">String sql <span class="token operator">=</span> <span class="token string">"SELECT name, salary FROM EMPLOYEE"</span><span class="token punctuation">;</span>
SQLQuery query <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">createSQLQuery</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// è¿”å›ç»“æœé›†ä¸­çš„åŸå§‹å€¼</span>
query<span class="token punctuation">.</span><span class="token function">setResultTransformer</span><span class="token punctuation">(</span>Criteria<span class="token punctuation">.</span>ALIAS_TO_ENTITY_MAP<span class="token punctuation">)</span><span class="token punctuation">;</span>
List results <span class="token operator">=</span> query<span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span>Object object <span class="token operator">:</span> results<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Map row <span class="token operator">=</span> <span class="token punctuation">(</span>Map<span class="token punctuation">)</span> object<span class="token punctuation">;</span>
    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Salary: "</span> <span class="token operator">+</span> row<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"salary"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>å®ä½“æŸ¥è¯¢</p>
<pre class=" language-java"><code class="language-java">String sql <span class="token operator">=</span> <span class="token string">"SELECT * FROM EMPLOYEE"</span><span class="token punctuation">;</span>
SQLQuery query <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">createSQLQuery</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// è·å–å®ä½“å¯¹è±¡æ•´ä½“</span>
query<span class="token punctuation">.</span><span class="token function">addEntity</span><span class="token punctuation">(</span>Employee<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
List employees <span class="token operator">=</span> query<span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span>Iterator iterator <span class="token operator">=</span> employees<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> iterator<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Employee employee <span class="token operator">=</span> <span class="token punctuation">(</span>Employee<span class="token punctuation">)</span> iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Salary: "</span> <span class="token operator">+</span> employee<span class="token punctuation">.</span><span class="token function">getSalary</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>æŒ‡å®šSQLæŸ¥è¯¢</p>
<pre class=" language-java"><code class="language-java">String sql <span class="token operator">=</span> <span class="token string">"SELECT * FROM EMPLOYEE WHERE id = :employee_id"</span><span class="token punctuation">;</span>
SQLQuery query <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">createSQLQuery</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
query<span class="token punctuation">.</span><span class="token function">addEntity</span><span class="token punctuation">(</span>Employee<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
query<span class="token punctuation">.</span><span class="token function">setParameter</span><span class="token punctuation">(</span><span class="token string">"employee_id"</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
List results <span class="token operator">=</span> query<span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<hr>
<p>å®šä¹‰å‘½åæŸ¥è¯¢æœ‰ä¸¤ç§æ–¹æ³•ï¼š</p>
<ul>
<li>é€šè¿‡æ³¨é‡Š</li>
<li>é€šè¿‡æ˜ å°„æ–‡ä»¶</li>
</ul>
<p>é€šè¿‡æ³¨é‡Šå‘½åæŸ¥è¯¢</p>
<ul>
<li><code>@NameQueries</code>æ³¨é‡Šå®šä¹‰å¤šä¸ªå‘½åæŸ¥è¯¢ã€‚</li>
<li><code>@NameQuery</code>æ³¨é‡Šå®šä¹‰å•ä¸ªå‘½åæŸ¥è¯¢ã€‚</li>
</ul>
<pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> mmp<span class="token punctuation">.</span>model<span class="token punctuation">;</span>

<span class="token keyword">import</span> javax<span class="token punctuation">.</span>persistence<span class="token punctuation">.</span>*<span class="token punctuation">;</span>

<span class="token annotation punctuation">@NamedQueries</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token annotation punctuation">@NamedQuery</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"findEmployeeByName"</span><span class="token punctuation">,</span> query <span class="token operator">=</span> <span class="token string">"from Employee e where e.name = :name"</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Entity</span>
<span class="token annotation punctuation">@Table</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"EMPLOYEE"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Employee</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Id</span>
    <span class="token annotation punctuation">@GeneratedValue</span><span class="token punctuation">(</span>strategy <span class="token operator">=</span> GenerationType<span class="token punctuation">.</span>AUTO<span class="token punctuation">)</span>
    <span class="token keyword">int</span> id<span class="token punctuation">;</span>
    String name<span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">// ...</span>
<span class="token punctuation">}</span></code></pre>
<p>hibernate.cfg.xml</p>
<pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapping</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>mmp.model.Employee<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span></code></pre>
<p>é€šè¿‡XMLæ˜ å°„æ–‡ä»¶å‘½åæŸ¥è¯¢</p>
<p>Employee.hbm.xml</p>
<pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hibernate-mapping</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>class</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>mmp.model.Employee<span class="token punctuation">"</span></span> <span class="token attr-name">table</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>EMPLOYEE<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>generator</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>native<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>generator</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>salary<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>class</span><span class="token punctuation">></span></span>
    <span class="token comment" spellcheck="true">&lt;!-- å®šä¹‰å‘½åæŸ¥è¯¢ --></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>query</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>findEmployeeByName<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>from Employee e where e.name = :name<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>query</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>hibernate-mapping</span><span class="token punctuation">></span></span></code></pre>
<p>hibernate.cfg.xml</p>
<pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapping</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Employee.hbm.xml<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span></code></pre>
<pre class=" language-java"><code class="language-java">Employee e1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Employee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
e1<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"Maxsu"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
session<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>e1<span class="token punctuation">)</span><span class="token punctuation">;</span>

tx<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// getNamedQueryæ–¹æ³•ä½¿ç”¨å‘½åæŸ¥è¯¢å¹¶è¿”å›Queryçš„å®ä¾‹</span>
Query query <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">getNamedQuery</span><span class="token punctuation">(</span><span class="token string">"findEmployeeByName"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
query<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"Maxsu"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

List<span class="token operator">&lt;</span>Employee<span class="token operator">></span> employees <span class="token operator">=</span> query<span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Iterator<span class="token operator">&lt;</span>Employee<span class="token operator">></span> itr <span class="token operator">=</span> employees<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">while</span> <span class="token punctuation">(</span>itr<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Employee e <span class="token operator">=</span> itr<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>

				</div>
				<!-- about -->
				
			</div>
			<!-- pagination -->
			
			<div class="comment-section">
	
	


</div>
		</div>
		
	</div>


        <footer>
             
<a id="gotop" href="#" title="back to top"><i class="mdi-hardware-keyboard-arrow-up"></i></a>

        </footer>
    </div>
    <!-- <script src="/libs/bs/js/bootstrap.min.js"></script> -->
    <!-- <script src="//apps.bdimg.com/libs/bootstrap/3.3.4/js/bootstrap.min.js"></script> -->
    <script>
        var timeEnd = new Date();
        console.log('è€—æ—¶ï¼š' + (timeEnd - timeStart));
        document.addEventListener('DOMContentLoaded', (event) => {
            document.querySelectorAll('pre').forEach((block) => {
                block.classList.add("line-numbers");
            });
        });
    </script>
    <!-- <script>(typeof $().modal == 'function')|| document.write('<script src="/libs/bs/js/bootstrap.min.js" type="text/javascript"><\/script>')</script>-->
    <!-- material design -->
    <!-- <script src="/libs/bs-material/js/ripples.min.js"></script> -->
    <!-- <script src="//apps.bdimg.com/libs/bootstrap-material/0.3.0/js/ripples.min.js"></script> -->
    <!-- <script src="/libs/bs-material/js/material.min.js"></script> -->
    <!-- <script src="//apps.bdimg.com/libs/bootstrap-material/0.3.0/js/material.min.js"></script>-->
    <!-- toc -->
    <!-- <script src="/libs/tocify/jquery-ui.min.js"></script> -->
    <!-- <script src="//apps.bdimg.com/libs/jqueryui/1.10.4/jquery-ui.min.js"></script> -->
    <!-- <script src="/libs/tocify/jquery.tocify.custom.js"></script> -->
    <!-- <script src="/js/main.js"></script> -->
    <script src="/js/prism.js"></script>
</body>
</html>
