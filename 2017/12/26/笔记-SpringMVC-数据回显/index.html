<!DOCTYPE HTML>
<html>
    <head>
        <meta charset="utf-8">
        <script>
            var timeStart = new Date();
        </script>
        
        <title>[ç¬”è®°]-SpringMVC-æ•°æ®å›æ˜¾ | ğŸŒ‘ğŸŒ’ğŸŒ“ğŸŒ”ğŸŒ•ğŸŒ–ğŸŒ—ğŸŒ˜</title>
        
        <meta name="author" content="huangzhike">
        
        
        <meta name="description" content="è¿™ä¸ªæ˜¯ä»åŸæ¥çš„ç¬”è®°ä¸­æ‹†åˆ†å‡ºæ¥çš„ã€‚
12-27é‡æ–°æ•´ç†æ›´æ–°Springç¬”è®°
æ•°æ®å›æ˜¾ï¼šæäº¤åï¼Œå¦‚æœå‡ºç°é”™è¯¯ï¼Œå°†åˆšæ‰æäº¤çš„æ•°æ®å›æ˜¾åˆ°åˆšæ‰çš„æäº¤é¡µé¢ã€‚
å°†æ•°æ®æ”¾åœ¨requeståŸŸä¸­ï¼Œç„¶åè¯·æ±‚è½¬å‘åˆ°è¡¨å•é¡µé¢ï¼ŒELè¡¨è¾¾å¼å°†æ•°æ®å›æ˜¾ã€‚
@RequestMapping(&#34;/editItemSubmit&#34;)
pub">
        
        
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
        
        <meta property="og:title" content="[ç¬”è®°]-SpringMVC-æ•°æ®å›æ˜¾"/>
        
        <meta property="og:site_name" content="ğŸŒ‘ğŸŒ’ğŸŒ“ğŸŒ”ğŸŒ•ğŸŒ–ğŸŒ—ğŸŒ˜"/>
        
        
        <!-- favicon -->
        <link rel="icon" type="image/ico" href="/ok.ico" sizes="32x32">
        <meta name="msapplication-TileColor" content="#009688">
        <meta name="msapplication-TileImage" content="/mstile-144x144.ico">
        <meta name="theme-color" content="#009688">
        <!-- favicon end -->
        <!-- <link href="//ok.ico" rel="icon"> -->
        
        <!-- toc -->
        <!-- <link rel="stylesheet" href="/libs/tocify/jquery.tocify.css" media="screen" type="text/css"> -->
        <!-- <link rel="stylesheet" href="/libs/bs/css/bootstrap.min.css" media="screen" type="text/css"> -->
        <!--<link rel="stylesheet" href="//apps.bdimg.com/libs/bootstrap/3.3.4/css/bootstrap.min.css" media="screen" type="text/css">-->
        <!-- material design -->
        <!-- <link rel="stylesheet" href="/libs/bs-material/css/ripples.min.css" media="screen" type="text/css"> -->
        <!-- <link rel="stylesheet" href="//apps.bdimg.com/libs/bootstrap-material/0.3.0/css/ripples.min.css" media="screen" type="text/css"> -->
        <!-- <link rel="stylesheet" href="/libs/bs-material/css/material.min.css" media="screen" type="text/css"> -->
        <!--<link rel="stylesheet" href="//apps.bdimg.com/libs/bootstrap-material/0.3.0/css/material.min.css" media="screen" type="text/css"> -->
        <!--<link rel="stylesheet" href="/css/highlight.light.css" media="screen" type="text/css">-->
        <link rel="stylesheet" href="/css/bootstrap.min.css" media="screen" type="text/css">
        <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
        <link rel="stylesheet" href="/css/prism.css" media="screen" type="text/css">
        
        <!-- <script src="//apps.bdimg.com/libs/jquery/2.0.3/jquery.min.js"></script>-->
        <!-- <script>window.jQuery || document.write('<script src="/libs/jquery-3.1.1.slim.min.js" type="text/javascript"><\/script>')</script>-->
    <meta name="generator" content="Hexo 4.2.1"></head>

<body>
    <nav class="navbar navbar-default">
	<div class="container">
		<div class="navbar-header">
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
				<span class="sr-only">èœå•</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			<a class="navbar-brand" title="ä¸‹ä¸€å¥æ˜¯ï¼šå®¢æœ‰å¯äººæœŸä¸æ¥ã€‚å°æ—¶å€™ï¼Œå–œæ¬¢é åœ¨é˜³å°ä¸Šï¼Œä¸€è¾¹å¹é£ï¼Œä¸€è¾¹çœ‹ä¹¦ï¼Œå–œæ¬¢è¯»ä¹¦å—ï¼Œéªšå¹´ï¼Ÿ" href="/">ä¹¦å½“å¿«æ„è¯»æ˜“å°½</a>
           
		</div>
		<div id="navbar" class="collapse navbar-collapse">
			<ul class="nav navbar-nav navbar-right">
				
				<li>
					<a href="https://huangzhike.github.io/archives" title="">
						<i class="fa fa-list"></i>Archives
					</a>
				</li>
				
				<li>
					<a href="https://github.com/huangzhike" target="_blank" rel="noopener" title="">
						<i class="fa fa-github"></i>GitHub
					</a>
				</li>
				
			</ul>
		</div>
	</div>
</nav>

    <div class="container" >
        <div class="row">
	
		<div class="col-md-9 center-content">
			
			<div class="content">
				<!-- index -->
				
				<h2>[ç¬”è®°]-SpringMVC-æ•°æ®å›æ˜¾</h2>
				
				<div>
					<div class="post-time">2017-12-26</div>
				</div>
				
				<div class="article-content">
				<p>è¿™ä¸ªæ˜¯ä»åŸæ¥çš„ç¬”è®°ä¸­æ‹†åˆ†å‡ºæ¥çš„ã€‚</p>
<p><strong>12-27é‡æ–°æ•´ç†æ›´æ–°Springç¬”è®°</strong></p>
<p>æ•°æ®å›æ˜¾ï¼šæäº¤åï¼Œå¦‚æœå‡ºç°é”™è¯¯ï¼Œå°†åˆšæ‰æäº¤çš„æ•°æ®å›æ˜¾åˆ°åˆšæ‰çš„æäº¤é¡µé¢ã€‚</p>
<p>å°†æ•°æ®æ”¾åœ¨<code>request</code>åŸŸä¸­ï¼Œç„¶åè¯·æ±‚è½¬å‘åˆ°è¡¨å•é¡µé¢ï¼ŒELè¡¨è¾¾å¼å°†æ•°æ®å›æ˜¾ã€‚</p>
<pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/editItemSubmit"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> String <span class="token function">editItemSubmit</span><span class="token punctuation">(</span>Model model<span class="token punctuation">,</span> Integer id<span class="token punctuation">,</span> ItemsCustom itemsCustom<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">// æ•°æ®å›æ˜¾</span>
    model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// ä¼ å…¥åˆ°requeståŸŸ</span>
    <span class="token comment" spellcheck="true">// POJO</span>
    model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">"item"</span><span class="token punctuation">,</span> itemsCustom<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// ä¼ å…¥åˆ°requeståŸŸ</span>
    <span class="token keyword">return</span> <span class="token string">"editItem"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p><code>@ModelAttribute()</code>ï¼Œæ‹¬å·å†…ä¼ å…¥è¦å›æ˜¾çš„POJOï¼ŒæŒ‡å®šPOJOå›æ˜¾åˆ°é¡µé¢åœ¨<code>request</code>ä¸­çš„keyï¼Œè¿˜å¯ä»¥å°†æ–¹æ³•çš„è¿”å›å€¼ä¼ åˆ°é¡µé¢ã€‚</p>
<pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// è®¿é—®è¯¥Controllerä»»ä½•å¤„ç†æ–¹æ³•å‰è°ƒç”¨ï¼Œå°†è¿”å›å€¼æ”¾å…¥Model</span>
<span class="token comment" spellcheck="true">// æå–çš„å…¬ç”¨æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥å»æ‰ï¼Œä½†æ˜¯è¦åœ¨å¤„ç†å™¨æ–¹æ³•ä¸­å¤„ç†</span>
<span class="token comment" spellcheck="true">// itemsCustomè¡¨ç¤ºæœ€ç»ˆå°†æ–¹æ³•è¿”å›å€¼æ”¾åœ¨requestä¸­çš„key</span>
<span class="token annotation punctuation">@ModelAttribute</span><span class="token punctuation">(</span><span class="token string">"itemsCustom"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> ItemsCustom <span class="token function">getItemsCustom</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">// newä¸€ä¸ª</span>
    ItemsCustom itemsCustom <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ItemsCustom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">// ...</span>
    <span class="token keyword">return</span> itemsCustom<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/editItemSubmit"</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true">// æ ¹æ®è¯·æ±‚å‚æ•°å¡«å……è¦†ç›–itemsCustomå¯¹è±¡</span>
<span class="token keyword">public</span> String <span class="token function">editItemSubmit</span><span class="token punctuation">(</span><span class="token annotation punctuation">@ModelAttribute</span><span class="token punctuation">(</span><span class="token string">"itemsCustom"</span><span class="token punctuation">)</span> ItemsCustom itemsCustom<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">// ä¸ç”¨åœ¨æ¯ä¸ªControlleræ–¹æ³•é€šè¿‡Modelå°†æ•°æ®ä¼ åˆ°é¡µé¢</span>
    <span class="token keyword">return</span> <span class="token string">"editItem"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p><code>@ModleAttribute()</code>ä¹Ÿæ˜¯å°†æ•°æ®å¡«å…¥åˆ°<code>request</code>åŸŸä¸­ï¼Œç„¶åé€šè¿‡ELè¡¨è¾¾å¼å–å‡ºï¼ŒåŒ<code>model.addAttribute()</code>å’Œ<code>modelAndView.addObject()</code>ã€‚</p>
<p>æ•°æ®ç±»å‹è½¬æ¢å‘ç”Ÿå¼‚å¸¸åï¼Œè¿”å›åˆ°è¡¨å•é¡µé¢ï¼Œè®©ç”¨æˆ·é‡å†™ã€‚</p>
<ul>
<li><p>æ­£å¸¸æƒ…å†µä¸‹ï¼Œå‘ç”Ÿ<code>TypeMismatchException</code>ï¼Œç³»ç»Ÿè‡ªåŠ¨è·³è½¬åˆ° 400 é¡µé¢ã€‚</p>
</li>
<li><p>è¦åœ¨å‘ç”Ÿç±»å‹è½¬æ¢å¼‚å¸¸åï¼Œè·³è½¬åˆ°æŒ‡å®šé¡µé¢ï¼Œéœ€è¦æ•è·å¼‚å¸¸ï¼Œç„¶åé€šè¿‡å¼‚å¸¸å¤„ç†å™¨è·³è½¬åˆ°æŒ‡å®šé¡µé¢ã€‚</p>
</li>
<li><p>è‹¥ä»…ä»…æ˜¯è·³è½¬ï¼Œ<code>SimpleMappingExceptionResolver</code>å°±å¯ä»¥ï¼Œå½“è¿”å›åˆ°è¡¨å•é¡µé¢åï¼Œè¿˜å°†æ•°æ®å›æ˜¾ï¼Œè®©ç”¨æˆ·æ›´æ­£ï¼Œéœ€è¦è‡ªå®šä¹‰å¼‚å¸¸å¤„ç†å™¨ã€‚</p>
</li>
</ul>
<p>æ•°æ®å›æ˜¾åŸç†ï¼šåœ¨å¼‚å¸¸å¤„ç†å™¨ä¸­ï¼Œé€šè¿‡<code>request.getParameter()</code>è·å–ç”¨æˆ·è¾“å…¥çš„è¡¨å•åŸå§‹æ•°æ®ï¼Œæ”¾åˆ°<code>ModelAndView</code>çš„<code>Model</code>ä¸­ï¼Œç„¶åä»è¦è½¬å‘çš„é¡µé¢ä¸­é€šè¿‡ EL è¡¨è¾¾å¼å–å‡ºã€‚</p>
<pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Controller</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/test"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyController</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"/register.do"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> String <span class="token function">register</span><span class="token punctuation">(</span><span class="token keyword">int</span> age<span class="token punctuation">,</span> Date birthday<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"age = "</span> <span class="token operator">+</span> age<span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"birthday = "</span> <span class="token operator">+</span> birthday<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">"/WEB-INF/jsp/show.jsp"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@ExceptionHandler</span><span class="token punctuation">(</span>TypeMismatchException<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> ModelAndView <span class="token function">exceptionResolver</span><span class="token punctuation">(</span>Exception ex<span class="token punctuation">,</span> HttpServletRequest request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        ModelAndView mv <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ModelAndView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mv<span class="token punctuation">.</span><span class="token function">addObject</span><span class="token punctuation">(</span><span class="token string">"ex"</span><span class="token punctuation">,</span> ex<span class="token punctuation">)</span><span class="token punctuation">;</span>

        String age <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"age"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        String birthday <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"birthday"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mv<span class="token punctuation">.</span><span class="token function">addObject</span><span class="token punctuation">(</span><span class="token string">"age"</span><span class="token punctuation">,</span> age<span class="token punctuation">)</span><span class="token punctuation">;</span>
        mv<span class="token punctuation">.</span><span class="token function">addObject</span><span class="token punctuation">(</span><span class="token string">"birthday"</span><span class="token punctuation">,</span> birthday<span class="token punctuation">)</span><span class="token punctuation">;</span>

        mv<span class="token punctuation">.</span><span class="token function">setViewName</span><span class="token punctuation">(</span><span class="token string">"/index.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> mv<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>å¹´é¾„æœ‰è¯¯ï¼Œæ—¥æœŸæ­£ç¡®ï¼Œå›æ˜¾æ²¡é—®é¢˜ã€‚</p>
<p>æ—¥æœŸæœ‰è¯¯ï¼Œå¹´é¾„æ­£ç¡®ï¼Œå›æ˜¾æœ‰é—®é¢˜ã€‚</p>
<ul>
<li><p>æ—¥æœŸæœ‰è¯¯æ—¶ï¼Œ<code>SimpleDateFormat.parse()</code>æ–¹æ³•æŠ›å‡º<code>ParseException</code>ï¼Œé<code>TypeMismatchException</code>ã€‚</p>
</li>
<li><p>å®ç°çš„è‡ªå®šä¹‰ç±»å‹è½¬æ¢å™¨çš„ <code>convert()</code>æ–¹æ³•ä¸èƒ½æŠ›å‡ºå¼‚å¸¸ï¼Œå¯¹å¼‚å¸¸çš„å¤„ç†å¿…é¡»ä¸º try-catchã€‚</p>
</li>
<li><p><code>ParseException</code>å‘ç”Ÿæ—¶ï¼Œ<code>convert()</code>æ–¹æ³•è‡ªå·±å¤„ç†äº†å¼‚å¸¸ï¼ŒJVMä¸çŸ¥é“æœ‰å¼‚å¸¸ï¼Œå¼‚å¸¸å¤„ç†å™¨ä¹Ÿæ— æ³•æ•è·åˆ°<code>ParseException</code>ã€‚</p>
</li>
</ul>
<p>è§£å†³ï¼šå½“æ—¥æœŸæ ¼å¼ä¸ç¬¦åˆè¦æ±‚æ—¶ï¼Œæ‰‹åŠ¨ä¸€ä¸ªç±»å‹åŒ¹é…å¼‚å¸¸ã€‚</p>
<pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyConverter</span> <span class="token keyword">implements</span> <span class="token class-name">Converter</span><span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Date<span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> Date <span class="token function">convert</span><span class="token punctuation">(</span>String source<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>source <span class="token operator">!=</span> null <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token string">""</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>source<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                SimpleDateFormat sdf <span class="token operator">=</span> <span class="token function">getSimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> sdf<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ParseException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> null<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> SimpleDateFormat <span class="token function">getSimpleDateFormat</span><span class="token punctuation">(</span>String source<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        SimpleDateFormat sdf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>Pattern<span class="token punctuation">.</span><span class="token function">matches</span><span class="token punctuation">(</span><span class="token string">"^\\d{4}-\\d{2}-\\d{2}$"</span><span class="token punctuation">,</span> source<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            sdf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>Pattern<span class="token punctuation">.</span><span class="token function">matches</span><span class="token punctuation">(</span><span class="token string">"^\\d{4}/\\d{2}/\\d{2}$"</span><span class="token punctuation">,</span> source<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            sdf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">"yyyy/MM/dd"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>Pattern<span class="token punctuation">.</span><span class="token function">matches</span><span class="token punctuation">(</span><span class="token string">"^\\d{4}\\d{2}\\d{2}$"</span><span class="token punctuation">,</span> source<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            sdf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">"yyyyMMdd"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token comment" spellcheck="true">// æŠ›å‡º</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">TypeMismatchException</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">,</span> Date<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> sdf<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p><code>TypeMismatchException</code>ç±»ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºè¦åŒ¹é…çš„å€¼ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºè¦åŒ¹é…çš„ç±»å‹ï¼Œä¸¤ä¸ªå‚æ•°çš„ç±»å‹æ²¡æœ‰<code>is-a</code>å…³ç³»æ—¶ï¼Œè¯¥å¼‚å¸¸å‘ç”Ÿã€‚</p>
<p>ç¬¬ä¸€ä¸ªå‚æ•°ç¡®å®šä¸º<code>String</code>ç±»å‹ï¼Œå°±å†™äº†ä¸ª<code>String</code>å¸¸é‡ï¼Œç›®æ ‡ç±»å‹ç¡®å®šä¸º<code>Date</code>ç±»å‹ã€‚</p>
<p>å¯ä»¥ä»ç³»ç»Ÿæç¤ºä¿¡æ¯ä¸­æŸ¥æ‰¾ç”¨æˆ·è¾“å…¥æ•°æ®ï¼Œç¡®å®šå“ªä¸ªæ•°æ®å‡ºç°äº†ç±»å‹è½¬æ¢å¼‚å¸¸ï¼Œä¸€æ—¦ç¡®å®šé—®é¢˜æ•°æ®ï¼Œå¼‚å¸¸ä¿¡æ¯å°±å¯ä»¥å‡†ç¡®æ›¿æ¢äº†ã€‚</p>
<pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// åœ¨å¤„ç†å™¨ä¸­å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œæ ¹æ®å‘ç”Ÿç±»å‹è½¬æ¢å¼‚å¸¸çš„æ•°æ®çš„ä¸åŒè€Œç”Ÿæˆä¸åŒæç¤ºä¿¡æ¯</span>
<span class="token keyword">public</span> String <span class="token function">changeExceptionMessage</span><span class="token punctuation">(</span>Exception ex<span class="token punctuation">,</span> String arg<span class="token punctuation">,</span> String paramName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    String exMsg <span class="token operator">=</span> ex<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">// String ç±»çš„ contains()æ–¹æ³•åˆ¤æ–­ç³»ç»Ÿå¼‚å¸¸ä¿¡æ¯ä¸­æ˜¯å¦å­˜åœ¨ç”¨æˆ·è¾“å…¥æ•°æ®</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>exMsg<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>arg<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        String newMsg <span class="token operator">=</span> paramName <span class="token operator">+</span> <span class="token string">"ã€"</span> <span class="token operator">+</span> arg <span class="token operator">+</span> <span class="token string">"ã€‘ å¡«å†™æœ‰è¯¯ï¼Œè¯·é‡æ–°å¡«å†™"</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> newMsg<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> null<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">// åœ¨å¼‚å¸¸å¤„ç†æ–¹æ³•ä¸­å°†æ–°ç”Ÿæˆçš„å¼‚å¸¸ä¿¡æ¯å†™å…¥åˆ°ModelAndViewä¸­çš„Modelï¼Œé€šè¿‡ELè¡¨è¾¾å¼æ˜¾ç¤º</span>
<span class="token annotation punctuation">@ExceptionHandler</span><span class="token punctuation">(</span>TypeMismatchException<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> ModelAndView <span class="token function">exceptionResolver</span><span class="token punctuation">(</span>Exception ex<span class="token punctuation">,</span> HttpServletRequest request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    ModelAndView mv <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ModelAndView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    String age <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"age"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    String birthday <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"birthday"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    mv<span class="token punctuation">.</span><span class="token function">addObject</span><span class="token punctuation">(</span><span class="token string">"age"</span><span class="token punctuation">,</span> age<span class="token punctuation">)</span><span class="token punctuation">;</span>
    mv<span class="token punctuation">.</span><span class="token function">addObject</span><span class="token punctuation">(</span><span class="token string">"ageMsg"</span><span class="token punctuation">,</span> ageMsg<span class="token punctuation">)</span><span class="token punctuation">;</span>

    String ageMsg <span class="token operator">=</span> <span class="token function">changeExceptionMessage</span><span class="token punctuation">(</span>ex<span class="token punctuation">,</span> age<span class="token punctuation">,</span> <span class="token string">"å¹´é¾„"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    String birthdayMsg <span class="token operator">=</span> <span class="token function">changeExceptionMessage</span><span class="token punctuation">(</span>ex<span class="token punctuation">,</span> birthday<span class="token punctuation">,</span> <span class="token string">"ç”Ÿæ—¥"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    mv<span class="token punctuation">.</span><span class="token function">addObject</span><span class="token punctuation">(</span><span class="token string">"birthday"</span><span class="token punctuation">,</span> birthday<span class="token punctuation">)</span><span class="token punctuation">;</span>
    mv<span class="token punctuation">.</span><span class="token function">addObject</span><span class="token punctuation">(</span><span class="token string">"birthdayMsg"</span><span class="token punctuation">,</span> birthdayMsg<span class="token punctuation">)</span><span class="token punctuation">;</span>

    mv<span class="token punctuation">.</span><span class="token function">setViewName</span><span class="token punctuation">(</span><span class="token string">"/index.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> mv<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>

				</div>
				<!-- about -->
				
			</div>
			<!-- pagination -->
			
			<div class="comment-section">
	
	


</div>
		</div>
		
	</div>


        <footer>
             
<a id="gotop" href="#" title="back to top"><i class="mdi-hardware-keyboard-arrow-up"></i></a>

        </footer>
    </div>
    <!-- <script src="/libs/bs/js/bootstrap.min.js"></script> -->
    <!-- <script src="//apps.bdimg.com/libs/bootstrap/3.3.4/js/bootstrap.min.js"></script> -->
    <script>
        var timeEnd = new Date();
        console.log('è€—æ—¶ï¼š' + (timeEnd - timeStart));
        document.addEventListener('DOMContentLoaded', (event) => {
            document.querySelectorAll('pre').forEach((block) => {
                block.classList.add("line-numbers");
            });
        });
    </script>
    <!-- <script>(typeof $().modal == 'function')|| document.write('<script src="/libs/bs/js/bootstrap.min.js" type="text/javascript"><\/script>')</script>-->
    <!-- material design -->
    <!-- <script src="/libs/bs-material/js/ripples.min.js"></script> -->
    <!-- <script src="//apps.bdimg.com/libs/bootstrap-material/0.3.0/js/ripples.min.js"></script> -->
    <!-- <script src="/libs/bs-material/js/material.min.js"></script> -->
    <!-- <script src="//apps.bdimg.com/libs/bootstrap-material/0.3.0/js/material.min.js"></script>-->
    <!-- toc -->
    <!-- <script src="/libs/tocify/jquery-ui.min.js"></script> -->
    <!-- <script src="//apps.bdimg.com/libs/jqueryui/1.10.4/jquery-ui.min.js"></script> -->
    <!-- <script src="/libs/tocify/jquery.tocify.custom.js"></script> -->
    <!-- <script src="/js/main.js"></script> -->
    <script src="/js/prism.js"></script>
</body>
</html>
