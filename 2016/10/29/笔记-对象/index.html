<!DOCTYPE HTML>
<html>

<head>
    <script>
        var timeStart = new Date();
    </script>
    <meta charset="utf-8">
    
    <title>[笔记]-对象 | Reunion...</title>
    
    <meta name="author" content="huangzhike">
    
    
    <meta name="description"
        content="2016-11-17更新，整理自，好多地方
对象（object）是无序的数据集合，由“键值对”（key-value）构成。
var o = {
    a: &#34;Hello World&#34;,
    b: 1994
};
键名加不加引号都可以。
var o = {
    &#34;a&#34;: &#34;Hello Wor">
    
    
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta property="og:title" content="[笔记]-对象" />
    
    <meta property="og:site_name" content="Reunion..." />
    
    
    <!-- favicon -->
    <link rel="icon" type="image/ico" href="/logo.ico" sizes="32x32">
    <meta name="msapplication-TileColor" content="#009688">
    <meta name="msapplication-TileImage" content="/mstile-144x144.ico">
    <meta name="theme-color" content="#009688">
    <!-- favicon end -->
    <!-- <link href="//ok.ico" rel="icon"> -->
    

    <!-- <link href="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/4.5.0/css/bootstrap.min.css" rel="stylesheet"> -->
    <link rel="stylesheet" href="/css/bootstrap.min.css" media="screen" type="text/css">
    <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
    <link rel="stylesheet" href="/css/prism.css" media="screen" type="text/css">

<meta name="generator" content="Hexo 4.2.1"></head>
<body>
    <nav class="navbar navbar-default">
	<div class="container">
		<div class="navbar-header">
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
				<span class="sr-only">菜单</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			<a class="navbar-brand" title="早く来い、クラウド" href="/">Reunion...</a>
           
		</div>
		<div id="navbar" class="collapse navbar-collapse">
			<ul class="nav navbar-nav navbar-right">
				
				<li>
					<a href="https://huangzhike.github.io/archives" title="">
						<i class="fa fa-list"></i>Archives
					</a>
				</li>
				
				<li>
					<a href="https://github.com/huangzhike" target="_blank" rel="noopener" title="">
						<i class="fa fa-github"></i>GitHub
					</a>
				</li>
				
			</ul>
		</div>
	</div>
</nav>

    <div class="container" >
        <div class="row">
	
		<div class="col-md-9 center-content">
			
			<div class="content">
				<!-- index -->
				
				<h2>[笔记]-对象</h2>
				
				<div>
					<div class="post-time">2016-10-29</div>
				</div>
				
				<div class="article-content">
				<p><strong>2016-11-17更新，整理自，好多地方</strong></p>
<p>对象（object）是无序的数据集合，由“键值对”（key-value）构成。</p>
<pre class=" language-JavaScript"><code class="language-JavaScript">var o = {
    a: "Hello World",
    b: 1994
};</code></pre>
<p>键名加不加引号都可以。</p>
<pre class=" language-JavaScript"><code class="language-JavaScript">var o = {
    "a": "Hello World"
};</code></pre>
<p>如果键名包含数字、字母、下划线以外字符，或第一个字符为数字，但不是数字，则必须加上””。</p>
<pre class=" language-JavaScript"><code class="language-JavaScript">var o = {
    "1a": "Hello World",
    "a b": "Hello World",
    "a-b": "Hello World",
    "a+b": "Hello World"
};</code></pre>
<p>“键名”又称“属性”（property），“键值”可以是任何数据类型。如果属性的值为函数，通常称为“方法”。</p>
<pre class=" language-JavaScript"><code class="language-JavaScript">var o = {
    a: function(x) {return 2*x;} // 对象o有一个方法a，它是一个函数。
};</code></pre>
<p>两种方式访问对象的属性，点操作符或者中括号操作符。</p>
<pre class=" language-JavaScript"><code class="language-JavaScript">var o = {
    a: "Hello World"
};

o.a // "Hello World"
o["a"] // "Hello World"</code></pre>
<p>属性名a-b不是有效的变量，要用””括起来。访问这个属性也无法用点操作符，必须用[“xxx”]：</p>
<pre class=" language-JavaScript"><code class="language-JavaScript">o["a-b"]; // "Hello World"
o["a"]; // "Hello World"
o.a; // "Hello World"</code></pre>
<p>使用方括号运算符，键名必须在引号里，否则被当作变量。数字键可不加引号，因为会被当作字符串。</p>
<pre class=" language-JavaScript"><code class="language-JavaScript">var o = {
    0.7: "Hello World"
};

o.["0.7"] // "Hello World"
o[0.7] // "Hello World"</code></pre>
<p>方括号运算符内可以使用表达式。</p>
<pre class=" language-JavaScript"><code class="language-JavaScript">o["hello" + " world"]
o[3+3]

var name = "a";
o[name]; // "Hello World"

foo.1234; // SyntaxError
foo["1234"]; // works</code></pre>
<p>使用对象字面量语法时，属性名可以使用字符串。数字属性名会自动转换为字符串：</p>
<pre class=" language-JavaScript"><code class="language-JavaScript">var person = {
    5 : true
}</code></pre>
<p>访问字符串属性名时，必须使用方括号语法。</p>
<pre class=" language-JavaScript"><code class="language-JavaScript">var test = {
    "case": "I am a keyword so I must be notated as a string",
    delete: "I am a keyword too so me" // SyntaxError
    // 对象的属性名可用字符串或普通字符。但上面第二种声明在ES5之前会报错，因为delete是一个关键词
};</code></pre>
<p>JavaScript中所有变量都可以当作对象使用，除了<code>null</code>和<code>undefined</code>。</p>
<pre class=" language-JavaScript"><code class="language-JavaScript">false.toString(); // "false"
[1, 2, 3].toString(); // "1,2,3"</code></pre>
<p>数字的字面值（literal）可以当对象用。因为JavaScript将点操作符解析为浮点数字面值的一部分。</p>
<pre class=" language-JavaScript"><code class="language-JavaScript">2.toString(); // SyntaxError

2..toString(); // 第二个点号可以正常解析
2 .toString(); // 注意点号前面的空格
(2).toString(); // 2先被计算</code></pre>
<p>属性分成两种。一种是对象自身的原生属性，另一种是继承自原型的继承属性。</p>
<p>对象的原生属性：用Object.getOwnPropertyNames方法获得。</p>
<pre class=" language-JavaScript"><code class="language-JavaScript">Object.getOwnPropertyNames(Date)
// ["parse", "arguments", "UTC", "caller", "name", "prototype", "now", "length"]</code></pre>
<p>对象本身的属性之中，有的是可枚举的（enumerable），有的是不可枚举的。只获取可枚举属性，使用Object.keys方法。</p>
<pre class=" language-JavaScript"><code class="language-JavaScript">Object.keys(Date)
// []</code></pre>
<p>判断对象是否具有某个属性，使用hasOwnProperty方法。</p>
<pre class=" language-JavaScript"><code class="language-JavaScript">Date.hasOwnProperty("length") // true
Date.hasOwnProperty("toString") // false</code></pre>
<p>JavaScript不会保护hasOwnProperty被占用，因此如果对象碰巧存在这个属性，要使用外部的hasOwnProperty函数获取正确结果。</p>
<pre class=" language-JavaScript"><code class="language-JavaScript">var foo = {
    hasOwnProperty: function() {
        return false;
    },
    bar: "Here be dragons"
};

foo.hasOwnProperty("bar"); // 总是返回 false
// 使用其它对象的 hasOwnProperty，并将其上下文设置为foo
({}).hasOwnProperty.call(foo, "bar"); // true</code></pre>
<ul>
<li>不要扩展 Object.prototype 或者其他内置类型的原型对象（monkey patching）。虽然它被广泛应用一些JavaScript类库如Prototype。</li>
<li>扩展内置类型的唯一理由是新JavaScript保持一致，如Array.forEach。（Backport，将新的补丁添加到老版本中）。</li>
<li>查找对象的属性，JavaScript 会向上遍历原型链，直到找到给定名称的属性。查找到原型链的顶部，Object.prototype，仍没有就会返回undefined。</li>
<li>虽然可以通过对象实例访问原型中的值，但不能通过对象实例重写原型中的值。</li>
<li>如果在实例中添加了一个属性，而该属性与实例原型中的一个属性同名，那就在实例中创建该属性，该属性屏蔽原型中的那个属性，但不会修改那个属性。</li>
<li>使用delete操作符完全删除实例属性，重新访问原型中的属性。</li>
<li>取得对象上所有可枚举的实例属性，用ECMAScript5的Object.keys()方法。接收一个对象作为参数，返回一个包含所有可枚举属性的字符串数组。</li>
<li>得到所有实例属性，无论是否可枚举，用Object.getOwnPropertyNames()。</li>
<li>读取一个不存在的键，返回undefined，而不报错。利用这一点，检查变量是否被声明。</li>
</ul>
<pre class=" language-JavaScript"><code class="language-JavaScript">// 检查a变量是否被声明
if(a) {...} // 报错
if(window.a) {...} // 不报错
if(window["a"]) {...} // 不报错
// 上面的后二种写法之所以不报错，是因为浏览器环境，所有全局变量都是window对象的属性。
// window.a读取window对象的a属性，如果该属性不存在，返回undefined，不会报错。
// 如果a属性是一个空字符串（或对应的布尔值为false），则无法检查变量是否声明。</code></pre>
<p>使用in运算符，判断对象是否有某个属性，无论该属性在实例中还是原型中（检查的是键名，不是键值）。</p>
<pre class=" language-JavaScript"><code class="language-JavaScript">if("a" in window) {
    ...
}</code></pre>
<p>in也适用数组。</p>
<pre class=" language-JavaScript"><code class="language-JavaScript">var a = ["hello", "world"];
// 数字键0和1都在数组中
0 in a // true
2 in a // false
// 数组是对象，对象的键名都是字符串，字符串的”0“和”1“，也是数组的键名
"0" in a // true
"2" in a // false</code></pre>
<ul>
<li>in运算符的问题是不能识别对象继承的属性。</li>
<li>所有开发人员定义的属性都是可枚举的（除了IE8及更早）。</li>
<li>for-in循环，查找对象属性时遍历原型链上的所有属性，返回所有可枚举属性，包含实例中和原型中的属性。</li>
<li>for-in循环输出的属性名顺序是不可预测的。</li>
<li>如果一个属性在原型链的上端，试图获取一个不存在的属性会遍历整个原型链。</li>
<li>for-in 循环遍历对象的属性时，原型链上的所有属性都被访问。</li>
<li>for-in遍历整个原型链，如果一个对象的继承层次太深会影响性能。</li>
<li>可以新建一个继承null的对象。由于null没有任何属性，新对象也不会有继承的属性。</li>
<li>在for…in循环中获得对象自身的属性，可以采用hasOwnProperty方法判断。</li>
<li>hasOwnProperty是唯一一个处理属性但不查找原型链的函数。</li>
<li>总结：<br>   for-in 实例+原型、可枚举；<br>   Object.keys()实例、可枚举；<br>   Object.getOwnPropertyNames()实例、可枚举+不可枚举</li>
</ul>
<p>获得对象的所有属性（不管是自身的还是继承的，以及是否可枚举）：</p>
<pre class=" language-JavaScript"><code class="language-JavaScript">function inheritedPropertyNames(obj) {
    var props = {};
    while(obj) {
        Object.getOwnPropertyNames(obj).forEach(function(p) {
            props[p] = true;
        });
        obj = Object.getPrototypeOf(obj);
    }
    return Object.getOwnPropertyNames(props);
}</code></pre>
<ul>
<li>JavaScript允许属性“后绑定”，可以在任意时刻新增属性，没必要在定义对象的时，就定义好属性。</li>
<li>删除属性，使用<code>delete</code>操作符；</li>
<li>设置属性为<code>undefined</code>或<code>null</code>并不能真正的删除属性，仅仅是移除了属性和值的关联。</li>
</ul>
<pre class=" language-JavaScript"><code class="language-JavaScript">var obj = {
    bar: 1,
    foo: 2,
    baz: 3
};
obj.bar = undefined;
obj.foo = null;
delete obj.baz;

for(var i in obj) {
    if (obj.hasOwnProperty(i)) {
        console.log(i, "" + obj[i]);
    }
}
// 输出 bar undefined 和 foo null 
// 只有 baz 被真正删除</code></pre>
<ul>
<li>删除一个不存在的属性，delete不报错，而且返回true。</li>
<li>delete命令只删除对象本身的属性，不能删除继承的属性。</li>
<li>delete命令也不能删除var命令声明的变量，只能用来删除属性。</li>
<li>delete命令只能保证某属性值为undefined，无法保证该属性是否存在。</li>
<li>只有一种情况，delete返回false，就是该属性存在，且不得删除。</li>
</ul>
<p>如果不同的变量名指向同一个对象，那么它们都是这个对象的引用，指向同一个内存地址。</p>
<p>JavaScript的引用始终指向最终的对象，而并非引用本身。修改其中一个变量，会影响到其他所有变量。</p>
<pre class=" language-JavaScript"><code class="language-JavaScript">var obj = {}; // 空对象
var ref = obj; // 引用
obj.name = "objectA";
console.log(ref.name); // objectA
obj = ["one", "two", "three"]; // obj指向另一个数组对象
// ref还指向原来的对象
console.log(ref.name); // objectA
console.log(obj.length); // 3
console.log(ref.length); // undefined
// obj 只是对一个匿名对象的引用，所以ref 并非指向它
// 当obj 指向另一个数组对象，引用ref未改变，始终指向后来添加了name属性的"空"对象”{}”</code></pre>
<p>这种引用只限于对象，原始类型的数据是传值引用，都是值的拷贝。</p>
<pre class=" language-JavaScript"><code class="language-JavaScript">var x = 1;
var y = x;

x = 2;
y // 1
// x值变化后，y值并不变，y和x并不是指向同一个内存地址</code></pre>
<p>当函数有多个返回值时，传统的面向对象语言中，需要组织一个对象，然后返回，而JavaScript不需要：</p>
<pre class=" language-JavaScript"><code class="language-JavaScript">function Point(left, top){
    this.left = left;
    this.top = top;
    // 动态构建一个新的匿名对象返回
    return {x: this.left, y:this.top};
}

var pos = new Point(3, 4);
pos.x; // 3
pos.y; // 4</code></pre>
<hr>
<ul>
<li>数据属性和访问器属性。</li>
<li>数据属性</li>
<li>[Configurable]：能否通过<code>delete</code>删除属性从而重新定义属性，能否修改属性的特性，或者能否把属性修改为访问器属性。默认值为<code>true</code>。</li>
<li>[Enumearble]：能否通过<code>for-in</code>循环返回属性。默认值为<code>true</code>。</li>
<li>[Writeable]：能否修改属性的值。默认值为<code>true</code>。</li>
<li>[Value]：包含这个属性的数据值。读取属性值的时候，从这个位置读；写入属性值的时候，把新值保存在这个位置。默认值为<code>undefined</code>。</li>
</ul>
<p>修改属性默认的特性，必须使用<code>Object.defineProperty()</code>方法。这个方法接收三个参数：属性所在的对象、属性的名字和一个描述符对象。</p>
<p>其中描述符对象的属性必须是configurable、enumerable、writable、value。</p>
<pre class=" language-JavaScript"><code class="language-JavaScript">var person = {};
Object.defineProperty(person, "name", {
    writable: false,
    value: "Nicholas"
});</code></pre>
<p>一旦定义为不可配置，不能变回可配置。此时用<code>Object.defineProperty()</code>方法修改除writable之外的特性，都报错。</p>
<pre class=" language-JavaScript"><code class="language-JavaScript">var myObject = {};
Object.defineProperty( myObject, "a", {
    value: 2,
    writable: true,  // writable 决定是否可以修改属性的值。
    configurable: true, // 只要属性是可配置的，就可以使用 defineProperty(..)方法来修改属性描述符
    // 把 configurable 修改成 false 是单向操作，无法撤销。
    // 一个例外：即便configurable:false ， 还可以把writable由true改为false，但无法由false改为true 。
    enumerable: true // 控制属性是否会出现在对象的属性枚举中，如 for..in 循环。
} );

myObject.a; // 2</code></pre>
<ul>
<li>访问器不包含数据，包含一对getter和setter函数（都不是必须的）。</li>
<li>读取访问器属性时，调用getter函数，这个函数负责返回有效的值；</li>
<li>写入访问器属性时，调用setter函数并传入新值，这个函数负责决定如何处理数据。访问器属性有如下4个特性：</li>
<li>[[Configurable]]：表示能否通过delete删除属性从而重新定义属性，能否修改属性的特性，或者能否把属性修改为数据属性。这个特性的默认值为true。</li>
<li>[[Enumearble]]：表示能否通过for-in循环返回属性。这个特性默认值为true。</li>
<li>[[Get]]：在读取属性时调用的函数。这个特性的默认值为undefined。</li>
<li>[[Set]]：在写入属性时调用的函数。这个特性的默认值为undefined。</li>
</ul>
<p>访问器属性不能直接定义，必须用<code>Object.defineProperty()</code>定义：</p>
<pre class=" language-JavaScript"><code class="language-JavaScript">var book = {
    // 创建book对象，并定义了两个默认属性：_year和edition。
    _year:2004, // _year前面的下划线表示只能通过对象方法访问的属性
    edition:1
};

Object.defineProperty(book, "year", {
    get:function() {
        return this._year;
    },
    set:function(newValue) {
        if (newValue>2004) {
            this._year = newValue;
            this.edition += newValue-2004;
        }
    }
});

book.year = 2005;
book.edition; // 2</code></pre>
<p><code>Object.defineProperties()</code>方法可以通过描述符一次定义多个属性。</p>
<p>接收两个对象参数：第一个对象是要添加和修改其属性的对象，第二个对象的属性与第一个对象中要添加或修改的属性一一对应：</p>
<pre class=" language-JavaScript"><code class="language-JavaScript">var book = {};

Object.defineProperties(book, {
    _year: {
        value:2004
    },
    edition: {
        value:1
    },
    year: {
        get:function() {
            return this._year;
        },
        set:function(newValue) {
            if (newValue>2004) {
                this._year = newValue;
                this.edition += newValue-2004;
            }
        }
    }
});</code></pre>
<ul>
<li><code>Object.getOwnPropertyDescriptor()</code>方法取得给定属性的描述符。</li>
<li>接收两个参数：属性所在的对象和要读取其描述符的属性名称。</li>
<li>返回值是一个对象，如果是访问器属性，这个对象的属性有configurable、enumerable、get和set；</li>
<li>如果是数据属性，这个对象的属性有configurable、enumerable、writable和value。</li>
<li>只能用于实例属性，要取得原型属性的描述符，必须直接在原型对象上调用这个方法。</li>
</ul>
<pre class=" language-JavaScript"><code class="language-JavaScript">var descriptor = Object.getOwnpropertyDescriptor(book,"_year");
alert(descriptor.value)   //2005
alert(descriptor.configurable)  //false
alert(descriptor.get)   //undefined</code></pre>
<hr>
<p>对象的创建方法通常有三种。</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">var</span> o1 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 字面量法</span>
<span class="token keyword">var</span> o2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// new命令生成Object实例</span>
<span class="token keyword">var</span> o3 <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 使用Object.create方法</span></code></pre>
<p>Object.create方法创造的对象继承原型对象的属性。</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">var</span> Foo <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">"Jim"</span><span class="token punctuation">,</span>
    sayName<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> copy <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>Foo<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment" spellcheck="true">// 基于Foo原型创建一个新对象:</span>

copy<span class="token punctuation">.</span><span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// Jim</span>
copy<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> Foo<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// true</span>

copy<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// false</span></code></pre>
<p>Object.create的实现：</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> Object<span class="token punctuation">.</span>create <span class="token operator">!==</span> <span class="token string">"function"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Object<span class="token punctuation">.</span>create <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>p<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">// 方法一</span>
        <span class="token keyword">function</span> <span class="token function">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment" spellcheck="true">// 新建一个构造函数F</span>
        F<span class="token punctuation">.</span>prototype <span class="token operator">=</span> p<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//  让 F.prototype指向原型对象p</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 返回F的实例</span>

        <span class="token comment" spellcheck="true">// 方法二</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token string">"__proto__"</span><span class="token punctuation">:</span>p<span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>下面三种方式生成的新对象是等价的。</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">var</span> o <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> o <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span>
<span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>生成一个不继承任何属性（比如toString和valueOf方法）的空对象</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">var</span> o <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
o<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// TypeError: Object [object Object] has no method 'valueOf'</span>
<span class="token comment" spellcheck="true">// Object.create(null)比{}“更空”，不会创建 Object.prototype 这个委托</span>
<span class="token comment" spellcheck="true">// 如果对象o的原型是 null，它就不具备定义在 Object.prototype对象上面的属性，比如valueOf方法。</span>
<span class="token comment" spellcheck="true">// Object.create方法生成的新对象，动态继承了原型。在原型上添加或修改任何方法，会立刻反映在新对象之上。</span></code></pre>
<p>除了对象的原型，<code>Object.create</code>还可接受第二个参数，表示描述属性的对象，类似<code>Object.defineProperties</code>格式。</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">var</span> o <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    p1<span class="token punctuation">:</span> <span class="token punctuation">{</span> value<span class="token punctuation">:</span> <span class="token number">123</span><span class="token punctuation">,</span> enumerable<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    p2<span class="token punctuation">:</span> <span class="token punctuation">{</span> value<span class="token punctuation">:</span> <span class="token string">"abc"</span><span class="token punctuation">,</span> enumerable<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

o<span class="token punctuation">.</span>p1<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 123</span>
o<span class="token punctuation">.</span>p2<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// "abc"</span></code></pre>
<p><code>Object.create</code>方法不使用构造函数，所以不能用<code>instanceof</code>运算符判断对象是哪个构造函数的实例。</p>
<p>可以使用<code>isPrototypeOf</code>方法，判断原型：<code>F.prototype.isPrototypeOf(f)</code>。只要某个对象处在原型链上，isPrototypeOf都返回true。</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">var</span> o1 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> o2 <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>o1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> o3 <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>o2<span class="token punctuation">)</span><span class="token punctuation">;</span>

o2<span class="token punctuation">.</span><span class="token function">isPrototypeOf</span><span class="token punctuation">(</span>o3<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// true</span>
o1<span class="token punctuation">.</span><span class="token function">isPrototypeOf</span><span class="token punctuation">(</span>o3<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// true</span></code></pre>
<p><code>Object.getPrototypeOf()</code>方法返回<code>[[prototype]]</code>的值（返回对象的原型）。</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// 空对象的原型是Object.prototype</span>
Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// Object.prototype</span>

<span class="token comment" spellcheck="true">// 函数的原型是Function.prototype</span>
<span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// Function.prototype </span>

<span class="token comment" spellcheck="true">// 假定F为构造函数，f为F的实例对象</span>
<span class="token comment" spellcheck="true">// 那么，f的原型是F.prototype</span>
<span class="token keyword">var</span> f <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// F.prototype</span></code></pre>
<pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// 本段代码来自github，具体出处找不到了</span>
<span class="token keyword">function</span> <span class="token function">Point</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> x<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> y<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
Point<span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>
    print<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>x<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Point</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
p<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 10,20</span>

<span class="token keyword">var</span> Point <span class="token operator">=</span> <span class="token punctuation">{</span>
    x<span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">,</span>
    y<span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">,</span>
    print<span class="token punctuation">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>x<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> p <span class="token operator">=</span> <span class="token punctuation">{</span>x<span class="token punctuation">:</span><span class="token number">10</span><span class="token punctuation">,</span>y<span class="token punctuation">:</span><span class="token number">20</span><span class="token punctuation">,</span>__proto__<span class="token punctuation">:</span>Point<span class="token punctuation">}</span><span class="token punctuation">;</span>
p<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 10,20</span>

<span class="token keyword">var</span> Point <span class="token operator">=</span> <span class="token punctuation">{</span>
    x<span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">,</span>
    y<span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">,</span>
    print<span class="token punctuation">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>x<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> p <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>Point<span class="token punctuation">)</span><span class="token punctuation">;</span>
p<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
p<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
p<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 10 20</span></code></pre>
<p>对象的拷贝</p>
<ul>
<li>拷贝后的对象，与原对象具有同样的prototype原型对象。</li>
<li>拷贝后的对象，与原对象具有同样的属性。</li>
</ul>
<pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">copyObject</span><span class="token punctuation">(</span>orig<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> copy <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>orig<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">copyOwnPropertiesFrom</span><span class="token punctuation">(</span>copy<span class="token punctuation">,</span> orig<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> copy<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">copyOwnPropertiesFrom</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> source<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Object
    <span class="token punctuation">.</span><span class="token function">getOwnPropertyNames</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>propKey<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> desc <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span>source<span class="token punctuation">,</span> propKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
        Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> propKey<span class="token punctuation">,</span> desc<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> target<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>

				</div>
				<!-- about -->
				
			</div>
			<!-- pagination -->
			
			<div class="comment-section">
	
	


</div>
		</div>
		
	</div>


        <footer>
             
<a id="gotop" href="#" title="back to top"><i class="mdi-hardware-keyboard-arrow-up"></i></a>

        </footer>
    </div>
    <!-- <script src="/libs/bs/js/bootstrap.min.js"></script> -->
    <!-- <script src="//apps.bdimg.com/libs/bootstrap/3.3.4/js/bootstrap.min.js"></script> -->
    <script>
        var timeEnd = new Date();
        console.log('耗时：' + (timeEnd - timeStart));
        document.addEventListener('DOMContentLoaded', (event) => {
            document.querySelectorAll('pre').forEach((block) => {
                block.classList.add("line-numbers");
            });
        });
    </script>

    <script src="/js/prism.js"></script>
</body>
</html>
