<!DOCTYPE HTML>
<html>
	<head><meta name="generator" content="Hexo 3.9.0">
		<meta charset="utf-8">
		<script src="/js/highlight.js"></script>
				<script>hljs.initHighlightingOnLoad();var timeStart = new Date();</script>
		
		<title>[笔记]-对象 | 学而时习之</title>
		
		<meta name="author" content="Huangzhike">
		
		
		<meta name="description" content="K.I.S.S">
		
		
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
		
		<meta property="og:title" content="[笔记]-对象">
		
		<meta property="og:site_name" content="学而时习之">
		
		
		<!-- favicon -->
		<link rel="icon" type="image/ico" href="/ok.ico" sizes="32x32">
 


		<meta name="msapplication-TileColor" content="#009688">
		<meta name="msapplication-TileImage" content="/mstile-144x144.ico">
		<meta name="theme-color" content="#009688">

    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Didact+Gothic"> 

		<!-- favicon end -->
		<!-- <link href="//ok.ico" rel="icon"> -->
		
		<!-- toc -->
		<!-- <link rel="stylesheet" href="/libs/tocify/jquery.tocify.css" media="screen" type="text/css"> -->
		<!-- <link rel="stylesheet" href="/libs/bs/css/bootstrap.min.css" media="screen" type="text/css"> -->
		<!--<link rel="stylesheet" href="//apps.bdimg.com/libs/bootstrap/3.3.4/css/bootstrap.min.css" media="screen" type="text/css">-->
		<!-- material design -->
		<!-- <link rel="stylesheet" href="/libs/bs-material/css/ripples.min.css" media="screen" type="text/css"> -->
		<!-- <link rel="stylesheet" href="//apps.bdimg.com/libs/bootstrap-material/0.3.0/css/ripples.min.css" media="screen" type="text/css"> -->
		<!-- <link rel="stylesheet" href="/libs/bs-material/css/material.min.css" media="screen" type="text/css"> -->
		<!--<link rel="stylesheet" href="//apps.bdimg.com/libs/bootstrap-material/0.3.0/css/material.min.css" media="screen" type="text/css"> -->
		<!--<link rel="stylesheet" href="/css/highlight.light.css" media="screen" type="text/css">-->
		<link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
		 
		 
		<!-- <script src="//apps.bdimg.com/libs/jquery/2.0.3/jquery.min.js"></script>-->
		<!-- <script>window.jQuery || document.write('<script src="/libs/jquery-3.1.1.slim.min.js" type="text/javascript"><\/script>')</script>-->
	</head>
</html>
<body>
	<nav class="navbar navbar-default">
	<div class="container">
		<div class="navbar-header">
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
				<span class="sr-only">菜单</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			<a class="navbar-brand" href="/">学而时习之</a>
           
		</div>
		<div id="navbar" class="collapse navbar-collapse">
			<ul class="nav navbar-nav navbar-right">
				
				<li>
					<a href="https://huangzhike.github.io/" title="">
						<i class="fa fa-home"></i>Index
					</a>
				</li>
				
				<li>
					<a href="https://huangzhike.github.io/archives" title="">
						<i class="fa fa-list"></i>Archives
					</a>
				</li>
				
				<li>
					<a href="https://github.com/huangzhike" title="">
						<i class="fa fa-github"></i>GitHub
					</a>
				</li>
				
			</ul>
		</div>
	</div>
</nav>

	<div class="container" >
		<div class="row">
	
		<div class="col-md-9 center-content">
			
			<div class="content">
				<!-- index -->
				
				<h2>[笔记]-对象</h2>
				
				<div>
					<div class="post-time">2016-10-29</div>
				</div>
				
				<div class="article-content">
				<p><strong>2016-11-17更新，整理自，好多地方</strong></p>
<p>对象（object）是无序的数据集合，由“键值对”（key-value）构成。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = &#123;</span><br><span class="line">    a: <span class="string">"Hello World"</span>,</span><br><span class="line">    b: <span class="number">1994</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>键名加不加引号都可以。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = &#123;</span><br><span class="line">    <span class="string">"a"</span>: <span class="string">"Hello World"</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>如果键名包含数字、字母、下划线以外字符，或第一个字符为数字，但不是数字，则必须加上””。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = &#123;</span><br><span class="line">    <span class="string">"1a"</span>: <span class="string">"Hello World"</span>,</span><br><span class="line">    <span class="string">"a b"</span>: <span class="string">"Hello World"</span>,</span><br><span class="line">    <span class="string">"a-b"</span>: <span class="string">"Hello World"</span>,</span><br><span class="line">    <span class="string">"a+b"</span>: <span class="string">"Hello World"</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>“键名”又称“属性”（property），“键值”可以是任何数据类型。如果属性的值为函数，通常称为“方法”。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = &#123;</span><br><span class="line">    a: <span class="function"><span class="keyword">function</span>(<span class="params">x</span>) </span>&#123;<span class="keyword">return</span> <span class="number">2</span>*x;&#125; <span class="comment">// 对象o有一个方法a，它是一个函数。</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>两种方式访问对象的属性，点操作符或者中括号操作符。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = &#123;</span><br><span class="line">    a: <span class="string">"Hello World"</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">o.a <span class="comment">// "Hello World"</span></span><br><span class="line">o[<span class="string">"a"</span>] <span class="comment">// "Hello World"</span></span><br></pre></td></tr></table></figure>
<p>属性名a-b不是有效的变量，要用””括起来。访问这个属性也无法用点操作符，必须用[“xxx”]：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">o[<span class="string">"a-b"</span>]; <span class="comment">// "Hello World"</span></span><br><span class="line">o[<span class="string">"a"</span>]; <span class="comment">// "Hello World"</span></span><br><span class="line">o.a; <span class="comment">// "Hello World"</span></span><br></pre></td></tr></table></figure>
<p>使用方括号运算符，键名必须在引号里，否则被当作变量。数字键可不加引号，因为会被当作字符串。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = &#123;</span><br><span class="line">    <span class="number">0.7</span>: <span class="string">"Hello World"</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">o.[<span class="string">"0.7"</span>] <span class="comment">// "Hello World"</span></span><br><span class="line">o[<span class="number">0.7</span>] <span class="comment">// "Hello World"</span></span><br></pre></td></tr></table></figure>
<p>方括号运算符内可以使用表达式。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">o[<span class="string">"hello"</span> + <span class="string">" world"</span>]</span><br><span class="line">o[<span class="number">3</span>+<span class="number">3</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> name = <span class="string">"a"</span>;</span><br><span class="line">o[name]; <span class="comment">// "Hello World"</span></span><br><span class="line"></span><br><span class="line">foo<span class="number">.1234</span>; <span class="comment">// SyntaxError</span></span><br><span class="line">foo[<span class="string">"1234"</span>]; <span class="comment">// works</span></span><br></pre></td></tr></table></figure>
<p>使用对象字面量语法时，属性名可以使用字符串。数字属性名会自动转换为字符串：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> person = &#123;</span><br><span class="line">    <span class="number">5</span> : <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>访问字符串属性名时，必须使用方括号语法。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> test = &#123;</span><br><span class="line">    <span class="string">"case"</span>: <span class="string">"I am a keyword so I must be notated as a string"</span>,</span><br><span class="line">    <span class="keyword">delete</span>: <span class="string">"I am a keyword too so me"</span> <span class="comment">// SyntaxError</span></span><br><span class="line">    <span class="comment">// 对象的属性名可用字符串或普通字符。但上面第二种声明在ES5之前会报错，因为delete是一个关键词</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>JavaScript中所有变量都可以当作对象使用，除了<code>null</code>和<code>undefined</code>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">false</span>.toString(); <span class="comment">// "false"</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].toString(); <span class="comment">// "1,2,3"</span></span><br></pre></td></tr></table></figure>
<p>数字的字面值（literal）可以当对象用。因为JavaScript将点操作符解析为浮点数字面值的一部分。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2.</span>toString(); <span class="comment">// SyntaxError</span></span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>.toString(); <span class="comment">// 第二个点号可以正常解析</span></span><br><span class="line"><span class="number">2</span> .toString(); <span class="comment">// 注意点号前面的空格</span></span><br><span class="line">(<span class="number">2</span>).toString(); <span class="comment">// 2先被计算</span></span><br></pre></td></tr></table></figure>
<p>属性分成两种。一种是对象自身的原生属性，另一种是继承自原型的继承属性。</p>
<p>对象的原生属性：用Object.getOwnPropertyNames方法获得。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.getOwnPropertyNames(<span class="built_in">Date</span>)</span><br><span class="line"><span class="comment">// ["parse", "arguments", "UTC", "caller", "name", "prototype", "now", "length"]</span></span><br></pre></td></tr></table></figure>
<p>对象本身的属性之中，有的是可枚举的（enumerable），有的是不可枚举的。只获取可枚举属性，使用Object.keys方法。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.keys(<span class="built_in">Date</span>)</span><br><span class="line"><span class="comment">// []</span></span><br></pre></td></tr></table></figure>
<p>判断对象是否具有某个属性，使用hasOwnProperty方法。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Date</span>.hasOwnProperty(<span class="string">"length"</span>) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">Date</span>.hasOwnProperty(<span class="string">"toString"</span>) <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
<p>JavaScript不会保护hasOwnProperty被占用，因此如果对象碰巧存在这个属性，要使用外部的hasOwnProperty函数获取正确结果。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> foo = &#123;</span><br><span class="line">    hasOwnProperty: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">    bar: <span class="string">"Here be dragons"</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">foo.hasOwnProperty(<span class="string">"bar"</span>); <span class="comment">// 总是返回 false</span></span><br><span class="line"><span class="comment">// 使用其它对象的 hasOwnProperty，并将其上下文设置为foo</span></span><br><span class="line">(&#123;&#125;).hasOwnProperty.call(foo, <span class="string">"bar"</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<ul>
<li>不要扩展 Object.prototype 或者其他内置类型的原型对象（monkey patching）。虽然它被广泛应用一些JavaScript类库如Prototype。</li>
<li>扩展内置类型的唯一理由是新JavaScript保持一致，如Array.forEach。（Backport，将新的补丁添加到老版本中）。</li>
<li>查找对象的属性，JavaScript 会向上遍历原型链，直到找到给定名称的属性。查找到原型链的顶部，Object.prototype，仍没有就会返回undefined。</li>
<li>虽然可以通过对象实例访问原型中的值，但不能通过对象实例重写原型中的值。</li>
<li>如果在实例中添加了一个属性，而该属性与实例原型中的一个属性同名，那就在实例中创建该属性，该属性屏蔽原型中的那个属性，但不会修改那个属性。</li>
<li>使用delete操作符完全删除实例属性，重新访问原型中的属性。</li>
<li>取得对象上所有可枚举的实例属性，用ECMAScript5的Object.keys()方法。接收一个对象作为参数，返回一个包含所有可枚举属性的字符串数组。</li>
<li>得到所有实例属性，无论是否可枚举，用Object.getOwnPropertyNames()。</li>
<li>读取一个不存在的键，返回undefined，而不报错。利用这一点，检查变量是否被声明。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 检查a变量是否被声明</span></span><br><span class="line"><span class="keyword">if</span>(a) &#123;...&#125; <span class="comment">// 报错</span></span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">window</span>.a) &#123;...&#125; <span class="comment">// 不报错</span></span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">window</span>[<span class="string">"a"</span>]) &#123;...&#125; <span class="comment">// 不报错</span></span><br><span class="line"><span class="comment">// 上面的后二种写法之所以不报错，是因为浏览器环境，所有全局变量都是window对象的属性。</span></span><br><span class="line"><span class="comment">// window.a读取window对象的a属性，如果该属性不存在，返回undefined，不会报错。</span></span><br><span class="line"><span class="comment">// 如果a属性是一个空字符串（或对应的布尔值为false），则无法检查变量是否声明。</span></span><br></pre></td></tr></table></figure>
<p>使用in运算符，判断对象是否有某个属性，无论该属性在实例中还是原型中（检查的是键名，不是键值）。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(<span class="string">"a"</span> <span class="keyword">in</span> <span class="built_in">window</span>) &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>in也适用数组。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [<span class="string">"hello"</span>, <span class="string">"world"</span>];</span><br><span class="line"><span class="comment">// 数字键0和1都在数组中</span></span><br><span class="line"><span class="number">0</span> <span class="keyword">in</span> a <span class="comment">// true</span></span><br><span class="line"><span class="number">2</span> <span class="keyword">in</span> a <span class="comment">// false</span></span><br><span class="line"><span class="comment">// 数组是对象，对象的键名都是字符串，字符串的”0“和”1“，也是数组的键名</span></span><br><span class="line"><span class="string">"0"</span> <span class="keyword">in</span> a <span class="comment">// true</span></span><br><span class="line"><span class="string">"2"</span> <span class="keyword">in</span> a <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
<ul>
<li>in运算符的问题是不能识别对象继承的属性。</li>
<li>所有开发人员定义的属性都是可枚举的（除了IE8及更早）。</li>
<li>for-in循环，查找对象属性时遍历原型链上的所有属性，返回所有可枚举属性，包含实例中和原型中的属性。</li>
<li>for-in循环输出的属性名顺序是不可预测的。</li>
<li>如果一个属性在原型链的上端，试图获取一个不存在的属性会遍历整个原型链。</li>
<li>for-in 循环遍历对象的属性时，原型链上的所有属性都被访问。</li>
<li>for-in遍历整个原型链，如果一个对象的继承层次太深会影响性能。</li>
<li>可以新建一个继承null的对象。由于null没有任何属性，新对象也不会有继承的属性。</li>
<li>在for…in循环中获得对象自身的属性，可以采用hasOwnProperty方法判断。</li>
<li>hasOwnProperty是唯一一个处理属性但不查找原型链的函数。</li>
<li>总结：<br>   for-in 实例+原型、可枚举；<br>   Object.keys()实例、可枚举；<br>   Object.getOwnPropertyNames()实例、可枚举+不可枚举</li>
</ul>
<p>获得对象的所有属性（不管是自身的还是继承的，以及是否可枚举）：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">inheritedPropertyNames</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> props = &#123;&#125;;</span><br><span class="line">    <span class="keyword">while</span>(obj) &#123;</span><br><span class="line">        <span class="built_in">Object</span>.getOwnPropertyNames(obj).forEach(<span class="function"><span class="keyword">function</span>(<span class="params">p</span>) </span>&#123;</span><br><span class="line">            props[p] = <span class="literal">true</span>;</span><br><span class="line">        &#125;);</span><br><span class="line">        obj = <span class="built_in">Object</span>.getPrototypeOf(obj);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Object</span>.getOwnPropertyNames(props);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>JavaScript允许属性“后绑定”，可以在任意时刻新增属性，没必要在定义对象的时，就定义好属性。</li>
<li>删除属性，使用<code>delete</code>操作符；</li>
<li>设置属性为<code>undefined</code>或<code>null</code>并不能真正的删除属性，仅仅是移除了属性和值的关联。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    bar: <span class="number">1</span>,</span><br><span class="line">    foo: <span class="number">2</span>,</span><br><span class="line">    baz: <span class="number">3</span></span><br><span class="line">&#125;;</span><br><span class="line">obj.bar = <span class="literal">undefined</span>;</span><br><span class="line">obj.foo = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">delete</span> obj.baz;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i <span class="keyword">in</span> obj) &#123;</span><br><span class="line">    <span class="keyword">if</span> (obj.hasOwnProperty(i)) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(i, <span class="string">""</span> + obj[i]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 输出 bar undefined 和 foo null </span></span><br><span class="line"><span class="comment">// 只有 baz 被真正删除</span></span><br></pre></td></tr></table></figure>
<ul>
<li>删除一个不存在的属性，delete不报错，而且返回true。</li>
<li>delete命令只删除对象本身的属性，不能删除继承的属性。</li>
<li>delete命令也不能删除var命令声明的变量，只能用来删除属性。</li>
<li>delete命令只能保证某属性值为undefined，无法保证该属性是否存在。</li>
<li>只有一种情况，delete返回false，就是该属性存在，且不得删除。</li>
</ul>
<p>如果不同的变量名指向同一个对象，那么它们都是这个对象的引用，指向同一个内存地址。</p>
<p>JavaScript的引用始终指向最终的对象，而并非引用本身。修改其中一个变量，会影响到其他所有变量。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;&#125;; <span class="comment">// 空对象</span></span><br><span class="line"><span class="keyword">var</span> ref = obj; <span class="comment">// 引用</span></span><br><span class="line">obj.name = <span class="string">"objectA"</span>;</span><br><span class="line"><span class="built_in">console</span>.log(ref.name); <span class="comment">// objectA</span></span><br><span class="line">obj = [<span class="string">"one"</span>, <span class="string">"two"</span>, <span class="string">"three"</span>]; <span class="comment">// obj指向另一个数组对象</span></span><br><span class="line"><span class="comment">// ref还指向原来的对象</span></span><br><span class="line"><span class="built_in">console</span>.log(ref.name); <span class="comment">// objectA</span></span><br><span class="line"><span class="built_in">console</span>.log(obj.length); <span class="comment">// 3</span></span><br><span class="line"><span class="built_in">console</span>.log(ref.length); <span class="comment">// undefined</span></span><br><span class="line"><span class="comment">// obj 只是对一个匿名对象的引用，所以ref 并非指向它</span></span><br><span class="line"><span class="comment">// 当obj 指向另一个数组对象，引用ref未改变，始终指向后来添加了name属性的"空"对象”&#123;&#125;”</span></span><br></pre></td></tr></table></figure>
<p>这种引用只限于对象，原始类型的数据是传值引用，都是值的拷贝。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">var</span> y = x;</span><br><span class="line"></span><br><span class="line">x = <span class="number">2</span>;</span><br><span class="line">y <span class="comment">// 1</span></span><br><span class="line"><span class="comment">// x值变化后，y值并不变，y和x并不是指向同一个内存地址</span></span><br></pre></td></tr></table></figure>
<p>当函数有多个返回值时，传统的面向对象语言中，需要组织一个对象，然后返回，而JavaScript不需要：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Point</span>(<span class="params">left, top</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.left = left;</span><br><span class="line">    <span class="keyword">this</span>.top = top;</span><br><span class="line">    <span class="comment">// 动态构建一个新的匿名对象返回</span></span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="attr">x</span>: <span class="keyword">this</span>.left, <span class="attr">y</span>:<span class="keyword">this</span>.top&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> pos = <span class="keyword">new</span> Point(<span class="number">3</span>, <span class="number">4</span>);</span><br><span class="line">pos.x; <span class="comment">// 3</span></span><br><span class="line">pos.y; <span class="comment">// 4</span></span><br></pre></td></tr></table></figure>
<hr>
<ul>
<li>数据属性和访问器属性。</li>
<li>数据属性</li>
<li>[Configurable]：能否通过<code>delete</code>删除属性从而重新定义属性，能否修改属性的特性，或者能否把属性修改为访问器属性。默认值为<code>true</code>。</li>
<li>[Enumearble]：能否通过<code>for-in</code>循环返回属性。默认值为<code>true</code>。</li>
<li>[Writeable]：能否修改属性的值。默认值为<code>true</code>。</li>
<li>[Value]：包含这个属性的数据值。读取属性值的时候，从这个位置读；写入属性值的时候，把新值保存在这个位置。默认值为<code>undefined</code>。</li>
</ul>
<p>修改属性默认的特性，必须使用<code>Object.defineProperty()</code>方法。这个方法接收三个参数：属性所在的对象、属性的名字和一个描述符对象。</p>
<p>其中描述符对象的属性必须是configurable、enumerable、writable、value。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> person = &#123;&#125;;</span><br><span class="line"><span class="built_in">Object</span>.defineProperty(person, <span class="string">"name"</span>, &#123;</span><br><span class="line">    writable: <span class="literal">false</span>,</span><br><span class="line">    value: <span class="string">"Nicholas"</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>一旦定义为不可配置，不能变回可配置。此时用<code>Object.defineProperty()</code>方法修改除writable之外的特性，都报错。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myObject = &#123;&#125;;</span><br><span class="line"><span class="built_in">Object</span>.defineProperty( myObject, <span class="string">"a"</span>, &#123;</span><br><span class="line">    value: <span class="number">2</span>,</span><br><span class="line">    writable: <span class="literal">true</span>,  <span class="comment">// writable 决定是否可以修改属性的值。</span></span><br><span class="line">    configurable: <span class="literal">true</span>, <span class="comment">// 只要属性是可配置的，就可以使用 defineProperty(..)方法来修改属性描述符</span></span><br><span class="line">    <span class="comment">// 把 configurable 修改成 false 是单向操作，无法撤销。</span></span><br><span class="line">    <span class="comment">// 一个例外：即便configurable:false ， 还可以把writable由true改为false，但无法由false改为true 。</span></span><br><span class="line">    enumerable: <span class="literal">true</span> <span class="comment">// 控制属性是否会出现在对象的属性枚举中，如 for..in 循环。</span></span><br><span class="line">&#125; );</span><br><span class="line"></span><br><span class="line">myObject.a; <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>
<ul>
<li>访问器不包含数据，包含一对getter和setter函数（都不是必须的）。</li>
<li>读取访问器属性时，调用getter函数，这个函数负责返回有效的值；</li>
<li>写入访问器属性时，调用setter函数并传入新值，这个函数负责决定如何处理数据。访问器属性有如下4个特性：</li>
<li>[[Configurable]]：表示能否通过delete删除属性从而重新定义属性，能否修改属性的特性，或者能否把属性修改为数据属性。这个特性的默认值为true。</li>
<li>[[Enumearble]]：表示能否通过for-in循环返回属性。这个特性默认值为true。</li>
<li>[[Get]]：在读取属性时调用的函数。这个特性的默认值为undefined。</li>
<li>[[Set]]：在写入属性时调用的函数。这个特性的默认值为undefined。</li>
</ul>
<p>访问器属性不能直接定义，必须用<code>Object.defineProperty()</code>定义：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> book = &#123;</span><br><span class="line">    <span class="comment">// 创建book对象，并定义了两个默认属性：_year和edition。</span></span><br><span class="line">    _year:<span class="number">2004</span>, <span class="comment">// _year前面的下划线表示只能通过对象方法访问的属性</span></span><br><span class="line">    edition:<span class="number">1</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.defineProperty(book, <span class="string">"year"</span>, &#123;</span><br><span class="line">    get:<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>._year;</span><br><span class="line">    &#125;,</span><br><span class="line">    set:<span class="function"><span class="keyword">function</span>(<span class="params">newValue</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (newValue&gt;<span class="number">2004</span>) &#123;</span><br><span class="line">            <span class="keyword">this</span>._year = newValue;</span><br><span class="line">            <span class="keyword">this</span>.edition += newValue<span class="number">-2004</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">book.year = <span class="number">2005</span>;</span><br><span class="line">book.edition; <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>
<p><code>Object.defineProperties()</code>方法可以通过描述符一次定义多个属性。</p>
<p>接收两个对象参数：第一个对象是要添加和修改其属性的对象，第二个对象的属性与第一个对象中要添加或修改的属性一一对应：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> book = &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.defineProperties(book, &#123;</span><br><span class="line">    _year: &#123;</span><br><span class="line">        value:<span class="number">2004</span></span><br><span class="line">    &#125;,</span><br><span class="line">    edition: &#123;</span><br><span class="line">        value:<span class="number">1</span></span><br><span class="line">    &#125;,</span><br><span class="line">    year: &#123;</span><br><span class="line">        get:<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">this</span>._year;</span><br><span class="line">        &#125;,</span><br><span class="line">        set:<span class="function"><span class="keyword">function</span>(<span class="params">newValue</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (newValue&gt;<span class="number">2004</span>) &#123;</span><br><span class="line">                <span class="keyword">this</span>._year = newValue;</span><br><span class="line">                <span class="keyword">this</span>.edition += newValue<span class="number">-2004</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<ul>
<li><code>Object.getOwnPropertyDescriptor()</code>方法取得给定属性的描述符。</li>
<li>接收两个参数：属性所在的对象和要读取其描述符的属性名称。</li>
<li>返回值是一个对象，如果是访问器属性，这个对象的属性有configurable、enumerable、get和set；</li>
<li>如果是数据属性，这个对象的属性有configurable、enumerable、writable和value。</li>
<li>只能用于实例属性，要取得原型属性的描述符，必须直接在原型对象上调用这个方法。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> descriptor = <span class="built_in">Object</span>.getOwnpropertyDescriptor(book,<span class="string">"_year"</span>);</span><br><span class="line">alert(descriptor.value)   <span class="comment">//2005</span></span><br><span class="line">alert(descriptor.configurable)  <span class="comment">//false</span></span><br><span class="line">alert(descriptor.get)   <span class="comment">//undefined</span></span><br></pre></td></tr></table></figure>
<hr>
<p>对象的创建方法通常有三种。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o1 = &#123;&#125;; <span class="comment">// 字面量法</span></span><br><span class="line"><span class="keyword">var</span> o2 = <span class="keyword">new</span> <span class="built_in">Object</span>(); <span class="comment">// new命令生成Object实例</span></span><br><span class="line"><span class="keyword">var</span> o3 = <span class="built_in">Object</span>.create(<span class="literal">null</span>); <span class="comment">// 使用Object.create方法</span></span><br></pre></td></tr></table></figure>
<p>Object.create方法创造的对象继承原型对象的属性。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Foo = &#123;</span><br><span class="line">    name: <span class="string">"Jim"</span>,</span><br><span class="line">    sayName: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> copy = <span class="built_in">Object</span>.create(Foo);   <span class="comment">// 基于Foo原型创建一个新对象:</span></span><br><span class="line"></span><br><span class="line">copy.sayName(); <span class="comment">// Jim</span></span><br><span class="line">copy.__proto__ === Foo; <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line">copy.hasOwnProperty(<span class="string">"name"</span>); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
<p>Object.create的实现：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="built_in">Object</span>.create !== <span class="string">"function"</span>) &#123;</span><br><span class="line">    <span class="built_in">Object</span>.create = <span class="function"><span class="keyword">function</span> (<span class="params">p</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 方法一</span></span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">F</span>(<span class="params"></span>) </span>&#123;&#125; <span class="comment">// 新建一个构造函数F</span></span><br><span class="line">        F.prototype = p; <span class="comment">//  让 F.prototype指向原型对象p</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> F(); <span class="comment">// 返回F的实例</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 方法二</span></span><br><span class="line">        <span class="keyword">return</span> &#123;<span class="string">"__proto__"</span>:p&#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>下面三种方式生成的新对象是等价的。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = <span class="built_in">Object</span>.create(&#123;&#125;)</span><br><span class="line"><span class="keyword">var</span> o = <span class="built_in">Object</span>.create(<span class="built_in">Object</span>.prototype)</span><br><span class="line"><span class="keyword">var</span> o = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br></pre></td></tr></table></figure>
<p>生成一个不继承任何属性（比如toString和valueOf方法）的空对象</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = <span class="built_in">Object</span>.create(<span class="literal">null</span>);</span><br><span class="line">o.valueOf(); <span class="comment">// TypeError: Object [object Object] has no method 'valueOf'</span></span><br><span class="line"><span class="comment">// Object.create(null)比&#123;&#125;“更空”，不会创建 Object.prototype 这个委托</span></span><br><span class="line"><span class="comment">// 如果对象o的原型是 null，它就不具备定义在 Object.prototype对象上面的属性，比如valueOf方法。</span></span><br><span class="line"><span class="comment">// Object.create方法生成的新对象，动态继承了原型。在原型上添加或修改任何方法，会立刻反映在新对象之上。</span></span><br></pre></td></tr></table></figure>
<p>除了对象的原型，<code>Object.create</code>还可接受第二个参数，表示描述属性的对象，类似<code>Object.defineProperties</code>格式。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = <span class="built_in">Object</span>.create(<span class="built_in">Object</span>.prototype, &#123;</span><br><span class="line">    p1: &#123; <span class="attr">value</span>: <span class="number">123</span>, <span class="attr">enumerable</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">    p2: &#123; <span class="attr">value</span>: <span class="string">"abc"</span>, <span class="attr">enumerable</span>: <span class="literal">true</span> &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">o.p1; <span class="comment">// 123</span></span><br><span class="line">o.p2; <span class="comment">// "abc"</span></span><br></pre></td></tr></table></figure>
<p><code>Object.create</code>方法不使用构造函数，所以不能用<code>instanceof</code>运算符判断对象是哪个构造函数的实例。</p>
<p>可以使用<code>isPrototypeOf</code>方法，判断原型：<code>F.prototype.isPrototypeOf(f)</code>。只要某个对象处在原型链上，isPrototypeOf都返回true。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o1 = &#123;&#125;;</span><br><span class="line"><span class="keyword">var</span> o2 = <span class="built_in">Object</span>.create(o1);</span><br><span class="line"><span class="keyword">var</span> o3 = <span class="built_in">Object</span>.create(o2);</span><br><span class="line"></span><br><span class="line">o2.isPrototypeOf(o3) <span class="comment">// true</span></span><br><span class="line">o1.isPrototypeOf(o3) <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<p><code>Object.getPrototypeOf()</code>方法返回<code>[[prototype]]</code>的值（返回对象的原型）。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 空对象的原型是Object.prototype</span></span><br><span class="line"><span class="built_in">Object</span>.getPrototypeOf(&#123;&#125;) <span class="comment">// Object.prototype</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数的原型是Function.prototype</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"><span class="built_in">Object</span>.getPrototypeOf(f) <span class="comment">// Function.prototype </span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 假定F为构造函数，f为F的实例对象</span></span><br><span class="line"><span class="comment">// 那么，f的原型是F.prototype</span></span><br><span class="line"><span class="keyword">var</span> f = <span class="keyword">new</span> F();</span><br><span class="line"><span class="built_in">Object</span>.getPrototypeOf(f) <span class="comment">// F.prototype</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 本段代码来自github，具体出处找不到了</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Point</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.x = x;</span><br><span class="line">    <span class="keyword">this</span>.y = y;</span><br><span class="line">&#125;</span><br><span class="line">Point.prototype = &#123;</span><br><span class="line">    print: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.x,<span class="keyword">this</span>.y);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> p = <span class="keyword">new</span> Point(<span class="number">10</span>,<span class="number">20</span>);</span><br><span class="line">p.print(); <span class="comment">// 10,20</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> Point = &#123;</span><br><span class="line">    x:<span class="number">0</span>,</span><br><span class="line">    y:<span class="number">0</span>,</span><br><span class="line">    print:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.x,<span class="keyword">this</span>.y);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> p = &#123;<span class="attr">x</span>:<span class="number">10</span>,<span class="attr">y</span>:<span class="number">20</span>,<span class="attr">__proto__</span>:Point&#125;;</span><br><span class="line">p.print(); <span class="comment">// 10,20</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> Point = &#123;</span><br><span class="line">    x:<span class="number">0</span>,</span><br><span class="line">    y:<span class="number">0</span>,</span><br><span class="line">    print:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.x,<span class="keyword">this</span>.y);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> p = <span class="built_in">Object</span>.create(Point);</span><br><span class="line">p.x = <span class="number">10</span>;</span><br><span class="line">p.y = <span class="number">20</span>;</span><br><span class="line">p.print(); <span class="comment">// 10 20</span></span><br></pre></td></tr></table></figure>
<p>对象的拷贝</p>
<ul>
<li>拷贝后的对象，与原对象具有同样的prototype原型对象。</li>
<li>拷贝后的对象，与原对象具有同样的属性。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">copyObject</span>(<span class="params">orig</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> copy = <span class="built_in">Object</span>.create(<span class="built_in">Object</span>.getPrototypeOf(orig));</span><br><span class="line">    copyOwnPropertiesFrom(copy, orig);</span><br><span class="line">    <span class="keyword">return</span> copy;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">copyOwnPropertiesFrom</span>(<span class="params">target, source</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">Object</span></span><br><span class="line">    .getOwnPropertyNames(source)</span><br><span class="line">    .forEach(<span class="function"><span class="keyword">function</span>(<span class="params">propKey</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> desc = <span class="built_in">Object</span>.getOwnPropertyDescriptor(source, propKey);</span><br><span class="line">        <span class="built_in">Object</span>.defineProperty(target, propKey, desc);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> target;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

				</div>
				<!-- about -->
				
			</div>
			<!-- pagination -->
			
			<div class="comment-section">
	
	


</div>
		</div>
		
	</div>


		<footer>
			 
<a id="gotop" href="#" title="back to top"><i class="mdi-hardware-keyboard-arrow-up"></i></a>

		</footer>
	</div>
	<!-- <script src="/libs/bs/js/bootstrap.min.js"></script> -->
	<!-- <script src="//apps.bdimg.com/libs/bootstrap/3.3.4/js/bootstrap.min.js"></script> -->

	<script>var timeEnd = new Date();console.log('耗时：' + (timeEnd - timeStart));</script>
	<!-- <script>(typeof $().modal == 'function')|| document.write('<script src="/libs/bs/js/bootstrap.min.js" type="text/javascript"><\/script>')</script>-->
	<!-- material design -->
	<!-- <script src="/libs/bs-material/js/ripples.min.js"></script> -->
	<!-- <script src="//apps.bdimg.com/libs/bootstrap-material/0.3.0/js/ripples.min.js"></script> -->
	<!-- <script src="/libs/bs-material/js/material.min.js"></script> -->
	<!-- <script src="//apps.bdimg.com/libs/bootstrap-material/0.3.0/js/material.min.js"></script>-->
	<!-- toc -->
	<!-- <script src="/libs/tocify/jquery-ui.min.js"></script> -->
	<!-- <script src="//apps.bdimg.com/libs/jqueryui/1.10.4/jquery-ui.min.js"></script> -->
	<!-- <script src="/libs/tocify/jquery.tocify.custom.js"></script> -->
	<!-- <script src="/js/main.js"></script> -->
</body>
</html>
