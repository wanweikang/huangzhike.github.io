<!DOCTYPE HTML>
<html>

<head>
    <script>
        var timeStart = new Date();
    </script>
    <meta charset="utf-8">
    
    <title>[笔记]-运算符 | Reunion...</title>
    
    <meta name="author" content="huangzhike">
    
    
    <meta name="description"
        content="2016-11-18重新整理更新
中括号运算符可用在数组对象和对象上，从数组中按下标取值：array[0]
如果对象的属性本身就包含点 (a.b)，用中括号运算符：obj[“a.b”]
遍历对象时，不知道属性的键 (key)，不能通过点(.)访问，用[]运算符：
for(var key in obj">
    
    
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta property="og:title" content="[笔记]-运算符" />
    
    <meta property="og:site_name" content="Reunion..." />
    
    
    <!-- favicon -->
    <link rel="icon" type="image/ico" href="/logo.ico" sizes="32x32">
    <meta name="msapplication-TileColor" content="#009688">
    <meta name="msapplication-TileImage" content="/mstile-144x144.ico">
    <meta name="theme-color" content="#009688">
    <!-- favicon end -->
    <!-- <link href="//ok.ico" rel="icon"> -->
    

    <!-- <link href="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/4.5.0/css/bootstrap.min.css" rel="stylesheet"> -->
    <link rel="stylesheet" href="/css/bootstrap.min.css" media="screen" type="text/css">
    <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
    <link rel="stylesheet" href="/css/prism.css" media="screen" type="text/css">

<meta name="generator" content="Hexo 4.2.1"></head>
<body>
    <nav class="navbar navbar-default">
	<div class="container">
		<div class="navbar-header">
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
				<span class="sr-only">菜单</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			<a class="navbar-brand" title="早く来い、クラウド" href="/">Reunion...</a>
           
		</div>
		<div id="navbar" class="collapse navbar-collapse">
			<ul class="nav navbar-nav navbar-right">
				
				<li>
					<a href="https://huangzhike.github.io/archives" title="">
						<i class="fa fa-list"></i>Archives
					</a>
				</li>
				
				<li>
					<a href="https://github.com/huangzhike" target="_blank" rel="noopener" title="">
						<i class="fa fa-github"></i>GitHub
					</a>
				</li>
				
			</ul>
		</div>
	</div>
</nav>

    <div class="container" >
        <div class="row">
	
		<div class="col-md-9 center-content">
			
			<div class="content">
				<!-- index -->
				
				<h2>[笔记]-运算符</h2>
				
				<div>
					<div class="post-time">2016-10-27</div>
				</div>
				
				<div class="article-content">
				<p><strong>2016-11-18重新整理更新</strong></p>
<p>中括号运算符可用在数组对象和对象上，从数组中按下标取值：array[0]</p>
<p>如果对象的属性本身就包含点 (a.b)，用中括号运算符：obj[“a.b”]</p>
<p>遍历对象时，不知道属性的键 (key)，不能通过点(.)访问，用[]运算符：</p>
<pre class=" language-JavaScript"><code class="language-JavaScript">for(var key in object) {
    console.log(key + ":" + object[key]);
}</code></pre>
<p>表达式放在圆括号中，作用是求值，返回表达式的值。</p>
<pre class=" language-JavaScript"><code class="language-JavaScript">(1) // 1
("a") // a
(1+2) // 3</code></pre>
<p>对象放在圆括号中，返回对象的值，即对象本身。</p>
<pre class=" language-JavaScript"><code class="language-JavaScript">var o = {p:1};
(o) // Object {p: 1}</code></pre>
<p>函数放在圆括号中，返回函数本身。</p>
<pre class=" language-JavaScript"><code class="language-JavaScript">function f(){return 1;}
(f) // function f(){return 1;}</code></pre>
<p>如果圆括号紧跟在函数的后面，作用是调用函数，即对函数求值。</p>
<pre class=" language-JavaScript"><code class="language-JavaScript">f() // 1</code></pre>
<p>圆括号的作用是求值，如果将语句放在圆括号之中，报错，因为语句没有返回值。</p>
<pre class=" language-JavaScript"><code class="language-JavaScript">(var a =1) // SyntaxError: Unexpected token var</code></pre>
<p>void运算符：执行表达式，然后返回undefined。</p>
<pre class=" language-JavaScript"><code class="language-JavaScript">void 0 // undefined
void (0) // undefined

var x = 3;

void (x = 5) //undefined
x // 5

void 4+7 
// 等价于
(void 4) +7 // 建议使用括号，因为void运算符的优先性很高</code></pre>
<p>主要用于书签工具（bookmarklet）或超链接中插入代码，返回undefined防止网页跳转。</p>
<pre class=" language-JavaScript"><code class="language-JavaScript">javascript:void window.open("http://example.com/")</code></pre>
<p>常用于网页链接的鼠标点击事件写法。</p>
<pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>#<span class="token punctuation">"</span></span> <span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>f();<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span> // 函数f或onclick事件必须返回false，否则浏览器跳转
// 或
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>#<span class="token punctuation">"</span></span> <span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>f();return false;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span></code></pre>
<p>void运算符可以取代上面两种写法。</p>
<pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>javascript:void(0)<span class="token punctuation">"</span></span> <span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>f();<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span></code></pre>
<p>逗号运算符：对两个表达式求值，并返回后一个表达式的值。</p>
<pre class=" language-JavaScript"><code class="language-JavaScript">"a", "b" // "b"

var x = 0;
var y = (x++, 10);

x // 1
y // 10</code></pre>
<p>左结合与右结合：优先级相同的运算符，大多数情况，计算顺序从左到右，叫运算符的“左结合”（left-to-right associativity），<code>x + y + z</code>。</p>
<p>少数运算符计算顺序从右到左，叫“右结合”。</p>
<p>主要是赋值运算符（=）和三元条件运算符（?:）。</p>
<pre class=" language-JavaScript"><code class="language-JavaScript">w = x = y = z; 
// w = (x = (y = z)); 
q = a ? b : c ? d : e ? f : g; 
// q = a ? b : (c ? d : (e ? f : g));</code></pre>
<p>自增运算符</p>
<ul>
<li>a++：先用a的原值，然后a加1</li>
<li>++a：先给a加1，然后用a的新值</li>
</ul>
<pre class=" language-JavaScript"><code class="language-JavaScript">var a = 10;

console.log(a++); // 10，先引用原值，然后加1
// 等价于：
var a= 10;

console.log(a); // 先输出a
a++; // 然后a加1</code></pre>
<pre class=" language-JavaScript"><code class="language-JavaScript">var a = 10;

console.log(++a); // 11，先加1，然后输出</code></pre>
<pre class=" language-JavaScript"><code class="language-JavaScript">var a = 8;

console.log(4 + a++); // 12，先用原来的a的值，4+8，输出12，然后a加1
console.log(a); // 9</code></pre>
<pre class=" language-JavaScript"><code class="language-JavaScript">var a = 9;

console.log(++a % 5); // 0， 先把i加1，然后用i，10%5=0
console.log(a); // 10</code></pre>
<pre class=" language-JavaScript"><code class="language-JavaScript">var a = 1; 
var b = a++; // b值1，a值2 。++写在后面，先用再加 

a += ++b; // 先b加1，b是2，a原来是2，加2，就是4
console.log(a); // 4
console.log(b); // 2</code></pre>
<pre class=" language-JavaScript"><code class="language-JavaScript">var a = 3; 

console.log(a++ + a++); 
// 计算从左到右，第一次a++时用的是3，a变为4。第二次a++，a用的是4，变为5。3 + 4 输出7。
console.log(a); // 输出5</code></pre>
<pre class=" language-JavaScript"><code class="language-JavaScript">var a = 3;

console.log(a++ + ++a); // 8
console.log(a); // 5</code></pre>
<pre class=" language-JavaScript"><code class="language-JavaScript">var num1 = 2, num2 = 5;
num1-- + num2; // 7
num1 + num2; // 6</code></pre>
<pre class=" language-JavaScript"><code class="language-JavaScript">x += y // x = x + y
x -= y // x = x - y
x *= y // x = x * y
x /= y // x = x / y
x %= y // x = x % y
x >>= y // x = x >> y
x <<= y // x = x << y
x >>>= y // x = x >>> y
x &= y // x = x & y
x |= y // x = x | y
x ^= y // x = x ^ y</code></pre>
<pre class=" language-JavaScript"><code class="language-JavaScript">3 > 2 > 1; // false
// 原式=(3>2) >1  = true > 1  = false  </code></pre>
<p>使用连续关系运算，1&lt;2 &amp;&amp; 2&lt;3</p>
<p>逻辑运算符</p>
<p>且运算符（&amp;&amp;）</p>
<ul>
<li>如果第一个为true，返回第二个的值（是值，不是布尔值）；<code>&quot;a&quot; &amp;&amp; (1+2) // 3</code></li>
<li>如果第一个为false，直接返回第一个的值（是值，不是布尔值），不再对第二个运算子求值。</li>
</ul>
<pre class=" language-JavaScript"><code class="language-JavaScript">"" && "b" // ""
var x = 1;
(1-1) && (x+=1) // 0
x // 1

undefined && 呵呵  // undefined，不报错，直接扔出undefined，哈哈不管
呵呵 && undefined  // 报错</code></pre>
<ul>
<li>这种跳过第二个运算子的机制，被称为“短路”。</li>
<li>if结构可以用且运算符改写。</li>
</ul>
<pre class=" language-JavaScript"><code class="language-JavaScript">if (A) {
    Do();
}
// 等于
A && Do();

a === 10 && doSomething(); 
// 等于
if (a === 10) {
    doSomething();    
}</code></pre>
<p>如果属性或函数存在于对象中，也可以这样检测：</p>
<pre class=" language-JavaScript"><code class="language-JavaScript">A && A.Do();</code></pre>
<p>或运算符（||）</p>
<ul>
<li>如果第一个为true，直接返回第一个的值，不再对第二个求值；<code>&quot;a&quot; || &quot;b&quot; // &quot;a&quot;</code>。</li>
<li>如果第一个为false，返回第二个运算子的值。<code>&quot;&quot; || &quot;b&quot; // &quot;b&quot;</code>。</li>
<li>或运算符多个连用，返回第一个布尔值为true的表达式的值。</li>
<li>或运算符可以为一个变量设置默认值。</li>
</ul>
<pre class=" language-JavaScript"><code class="language-JavaScript">false || 0 || '' || null || NaN || undefined || ""|| 4  || 5 // 4</code></pre>
<pre class=" language-JavaScript"><code class="language-JavaScript">function A(arg) { 
    arg = arg || 1; 
}
// 或
A(this.arg || 1)</code></pre>
<pre class=" language-JavaScript"><code class="language-JavaScript">a === 5 || doSomething(); 
// 等于
if (a !== 5) {
    doSomething();
} </code></pre>
<p>总结：</p>
<ul>
<li>a&amp;&amp;b，a真，那么扔b；如果a假，扔a</li>
<li>a||b， a真，那么扔a；如果a假，扔b</li>
</ul>
<pre class=" language-JavaScript"><code class="language-JavaScript">false || true && !!!false // true
false && 8  // false
3 && 4 // 4
0 && 1 // 0
"" && 6 // ""
6 && undefined // undefined
null && undefined // null
3 || 4 // 3
0 || 1 // 1
"" || 18 // 18</code></pre>
<pre class=" language-JavaScript"><code class="language-JavaScript">1 && 2 && 0 // 0
1 && 0 && 1 // 0
1 && 2 && 3 // 3</code></pre>
<p>如果逻辑与和逻辑或混合运算，则逻辑与的优先级高：</p>
<pre class=" language-JavaScript"><code class="language-JavaScript">1 && 2 || 0 // 2
0 || 2 && 1 // 1
0 && 2 || 1 // 1</code></pre>
<pre class=" language-JavaScript"><code class="language-JavaScript">undefined && ("3" != 3) || NaN && null
// = undefined && false || NaN && null
// = undefined || NaN && null
// = undefined || NaN
// = NaN</code></pre>
<pre class=" language-JavaScript"><code class="language-JavaScript">var a = 1 + 2 < 3 + 3 && 3 + 4 < 2 * 7;    
// = 3 < 6 && 7 < 14
// = true && true
// = true</code></pre>
<p>综合顺序：贴身的（++ – !）-&gt;数学-&gt;关系-&gt;逻辑-&gt;赋值</p>
<pre class=" language-JavaScript"><code class="language-JavaScript">var a = 4;
1 && 2 + 3 * a++ % 5 || 6 > 7 == 8 / !false
// = 1 && 2 + 3 * a++ % 5 || 6 > 7 == 8 / !false
// = 1 && 2 + 3 * 4 % 5 || 6 > 7 == 8 / true 先算贴身的
// = 1 && 2 + 2 || 6 > 7 == 8 算数学的
// = 1 && 4 || 6 > 7 == 8 算数学的
// = 1 && 4 || false == 8 算关系的
// = 1 && 4 || false 算关系的
// = 4 || false 算逻辑的
// = 4 算逻辑的</code></pre>
<p>位运算符用于直接对二进制位进行计算，共有7个。</p>
<ul>
<li>或运算（or）：符号为|，表示两个二进制位中有一个为1，则结果为1，否则为0。</li>
<li>与运算（and）：符号为&amp;，表示两个二进制位都为1，则结果为1，否则为0。</li>
<li>否运算（not）：符号为～，表示将一个二进制位变成相反值。</li>
<li>异或运算（xor）：符号为?，表示两个二进制位中有且仅有一个为1时，结果为1，否则为0。</li>
<li>左移运算（left shift）：符号为&lt;&lt;，</li>
<li>右移运算（right shift）：符号为&gt;&gt;，</li>
<li>带符号位的右移运算（zero filled right shift）：符号为&gt;&gt;&gt;，</li>
</ul>
<p>JavaScript内部，数值以64位浮点数的形式储存，但做位运算时，以32位带符号的整数进行，返回值也是32位带符号的整数。</p>
<pre class=" language-JavaScript"><code class="language-JavaScript">i = i|0; // 将i转为32位整数。</code></pre>
<p>位运算符只对整数起作用，如果不是整数，会将小数部分舍去，只保留整数部分，所以，将一个小数与0进行或运算，等同于对该数去除小数部分，即取整数位。</p>
<pre class=" language-JavaScript"><code class="language-JavaScript">2.9 | 0 // 2
-2.9 | 0 // -2</code></pre>
<p>这种取整方法不适用超过32位整数最大值2147483647的数。</p>
<pre class=" language-JavaScript"><code class="language-JavaScript">2147483649.4 | 0; // -2147483647</code></pre>
<ul>
<li>或运算：<code>0 | 3 === 3</code>。</li>
<li>与运算：<code>0 &amp; 3 === 0</code>。</li>
<li>否运算：将每个二进制位都变为相反值（0变1，1变0）。</li>
</ul>
<pre class=" language-JavaScript"><code class="language-JavaScript">~ 3 // -4
// 3是00000000000000000000000000000011
// 否运算后得11111111111111111111111111111100
// 第一位是 1，这个数是负数
// JavaScript内部采用2的补码表示负数，即需要将这个数减去1，再取一次反，再加上负号，才能得到对应的10进制值
// 减去1等于11111111111111111111111111111011，再取反得00000000000000000000000000000100，再加负号就是-4
// 简单记忆成，一个数与自身的取反值相加，等于-1</code></pre>
<pre class=" language-JavaScript"><code class="language-JavaScript">~ -3 // 2
// -3的取反值等于-1减去-3，为 2</code></pre>
<ul>
<li>对一个整数连续两次“否运算”，得到它自身：<code>~~3 === 3</code>。</li>
<li>所有的位运算只对整数有效。否运算遇到小数时，也将小数部分舍去，只保留整数部分。所以，对一个小数连续进行两次否运算，能取整：<code>~~2.9 === 2</code>。</li>
<li>使用否运算取整，是最快的取整方法。</li>
<li>对字符串否运算：先调用Number函数，将字符串转为数值。</li>
</ul>
<pre class=" language-JavaScript"><code class="language-JavaScript">// 以下相当于~Number("011")
~"011"  // -12
~"42 cats" // -1
~"0xcafebabe" // 889275713
~"deadbeef" // -1</code></pre>
<pre class=" language-JavaScript"><code class="language-JavaScript">// 以下相当于~~Number("011")
~~"011";        // 11        
~~"42 cats";    // 0
~~"0xcafebabe"; // -889275714
~~"deadbeef";   // 0</code></pre>
<p>否运算对特殊数值的处理：超出32位的整数被截去超出的位数，NaN和Infinity转为0。</p>
<p>异或运算：两个二进制位不同时返回1，相同时返回0。</p>
<pre class=" language-JavaScript"><code class="language-JavaScript">0^3 // 3
// 0的二进制形式是00，
// 3的二进制形式是11，
// 每一个二进制位都不同，所以得到11（即3）</code></pre>
<p>互换两个变量值的最快方法：连续对两个数a和b进行三次异或运算，<code>a^=b, b^=a, a^=b</code>。使用“异或运算”可以不引入临时变量，互换两个变量的值。</p>
<p>异或运算也可以用来取整：<code>12.9^0 === 12</code>。</p>
<p>左移运算符（&lt;&lt;）：将一个数的二进制形式向前移动，尾部补0。</p>
<pre class=" language-JavaScript"><code class="language-JavaScript">4 << 1 // 8
// 4的二进制形式为100，左移一位为1000（即十进制的8）

-4 << 1 // -8
// -4的二进制形式是11111111111111111111111111111100，
// 左移一位后得11111111111111111111111111111000，
// 该数转为十进制（减去1后取反，再加上负号）即为-8。</code></pre>
<p>如果左移0位，相当于取整，对于正数和负数都有效。</p>
<pre class=" language-JavaScript"><code class="language-JavaScript">13.5 << 0 // 13
-13.5 << 0 // -13</code></pre>
<p>使用左移运算符，将颜色的RGB值转为HEX值。</p>
<pre class=" language-JavaScript"><code class="language-JavaScript">var color = {r: 186, g: 218, b: 85};

// RGB to HEX
var rgb2hex = function(r, g, b) {
    return "#" + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).substr(1);
}

rgb2hex(color.r, color.g, color.b) // "#bada55"</code></pre>
<p>右移运算符（&gt;&gt;）：将一个数的二进制形式向右移动，头部补上最左位的值，即整数补0，负数补1。</p>
<pre class=" language-JavaScript"><code class="language-JavaScript">4 >> 1 // 2
// 4的二进制形式为00000000000000000000000000000100，
// 右移一位得到00000000000000000000000000000010，即十进制的2

-4 >> 1 // -2

// -4的二进制形式为11111111111111111111111111111100，
// 右移一位，头部补1，得11111111111111111111111111111110,即十进制的-2</code></pre>
<p>右移运算可以模拟2的整除运算。</p>
<pre class=" language-JavaScript"><code class="language-JavaScript">5 >> 1 // 相当于 5 / 2 = 2
21 >> 2 // 相当于 21 / 4 = 5
21 >> 3 // 相当于 21 / 8 = 2
21 >> 4 // 相当于 21 / 16 = 1</code></pre>
<p>带符号位的右移运算符（&gt;&gt;&gt;）：将一个数的二进制形式向右移动，不管正数或负数，头部一律补0。</p>
<p>该运算总是得到正值。对于正数，该运算的结果与右移运算符（&gt;&gt;）完全一致，区别主要在于负数。</p>
<pre class=" language-JavaScript"><code class="language-JavaScript">4 >>> 1 // 2
-4 >>> 1 // 2147483646
// -4的二进制形式为11111111111111111111111111111100，
// 带符号位的右移一位，得到01111111111111111111111111111110，即十进制的2147483646</code></pre>

				</div>
				<!-- about -->
				
			</div>
			<!-- pagination -->
			
			<div class="comment-section">
	
	


</div>
		</div>
		
	</div>


        <footer>
             
<a id="gotop" href="#" title="back to top"><i class="mdi-hardware-keyboard-arrow-up"></i></a>

        </footer>
    </div>
    <!-- <script src="/libs/bs/js/bootstrap.min.js"></script> -->
    <!-- <script src="//apps.bdimg.com/libs/bootstrap/3.3.4/js/bootstrap.min.js"></script> -->
    <script>
        var timeEnd = new Date();
        console.log('耗时：' + (timeEnd - timeStart));
        document.addEventListener('DOMContentLoaded', (event) => {
            document.querySelectorAll('pre').forEach((block) => {
                block.classList.add("line-numbers");
            });
        });
    </script>

    <script src="/js/prism.js"></script>
</body>
</html>
