<!DOCTYPE HTML>
<html>
	<head>
		<meta charset="utf-8">
		
		<title>[笔记]-正则方法&amp;字符串方法 | 一切都沉淀为笔记</title>
		
		<meta name="author" content="Huangzhike">
		
		
		<meta name="description" content="一个放笔记的地方">
		
		
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
		
		<meta property="og:title" content="[笔记]-正则方法&amp;字符串方法"/>
		
		<meta property="og:site_name" content="一切都沉淀为笔记"/>
		
		
		<!-- favicon -->
		<link rel="icon" type="image/ico" href="/favicon.ico" sizes="32x32">
		<link rel="manifest" href="/manifest.json">
		<meta name="msapplication-TileColor" content="#009688">
		<meta name="msapplication-TileImage" content="/mstile-144x144.ico">
		<meta name="theme-color" content="#009688">
		<script>var timeStart = new Date();</script>
		<!-- favicon end -->
		<!-- <link href="//favicon.ico" rel="icon"> -->
		
		<!-- toc -->
		<!-- <link rel="stylesheet" href="/libs/tocify/jquery.tocify.css" media="screen" type="text/css"> -->
		<!-- <link rel="stylesheet" href="/libs/bs/css/bootstrap.min.css" media="screen" type="text/css"> -->
		<link rel="stylesheet" href="//apps.bdimg.com/libs/bootstrap/3.3.4/css/bootstrap.min.css" media="screen" type="text/css">
		<!-- material design -->
		<!-- <link rel="stylesheet" href="/libs/bs-material/css/ripples.min.css" media="screen" type="text/css"> -->
		<!-- <link rel="stylesheet" href="//apps.bdimg.com/libs/bootstrap-material/0.3.0/css/ripples.min.css" media="screen" type="text/css"> -->
		<!-- <link rel="stylesheet" href="/libs/bs-material/css/material.min.css" media="screen" type="text/css"> -->
		<link rel="stylesheet" href="//apps.bdimg.com/libs/bootstrap-material/0.3.0/css/material.min.css" media="screen" type="text/css">
		<!--<link rel="stylesheet" href="/css/highlight.light.css" media="screen" type="text/css">-->
		<link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
		
		
		<!-- <script src="//apps.bdimg.com/libs/jquery/2.0.3/jquery.min.js"></script>-->
		<!-- <script>window.jQuery || document.write('<script src="/libs/jquery-3.1.1.slim.min.js" type="text/javascript"><\/script>')</script>-->
	</head>

<body>
	<nav class="navbar navbar-default">
	<div class="container">
		<div class="navbar-header">
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
				<span class="sr-only">菜单</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			<a class="navbar-brand" href="/">一切都沉淀为笔记 <span>Talk is cheap, show me the code</span></a>
           
		</div>
		<div id="navbar" class="collapse navbar-collapse">
			<ul class="nav navbar-nav navbar-right">
				
				<li>
					<a href="/" title="">
						<i class="fa fa-home"></i>首页
					</a>
				</li>
				
				<li>
					<a href="/archives" title="">
						<i class="fa fa-list"></i>存档
					</a>
				</li>
				
				<li>
					<a href="/resume" title="我的主页">
						<i class="fa fa-github"></i>GitHub
					</a>
				</li>
				
			</ul>
		</div>
	</div>
</nav>

	<div class="container" >
		<div class="row">
	
		<div class="col-md-9 center-content">
			
			<div class="content">
				<!-- index -->
				
				<h2>[笔记]-正则方法&amp;字符串方法</h2>
				
				<div>
					<span class="post-time">2016-10-27 12:11</span>
				</div>	
				
				<div class="article-content">
				<p>RegExp实例方法：</p>
<p>RegExp对象的主要方法是 exec()，该方法是专门为捕获组而设计的。<br>exec()接受字符串参数，返回包含第一个匹配信息的数组；或在没有匹配项的情况下返回null。<br>返回的数组是Array的实例，但包含两个额外的属性：index和input。<br>其中index表示匹配项在字符串中的位置，input表示应用正则表达式的字符串。<br>在数组中，第一项是与整个模式匹配的字符串，其他项是与模式中的捕获组匹配的字符串（如果模式中没有捕获组，则该数组只有一项）。<br>对于 exec()方法，即使设置了全局标志，每次也只会返回一个匹配项。<br>在不设置全局标志的情况下，在同一个字符串上多次 exec()将始终返回第一个匹配项的信息。<br>而在设置全局标志的情况下，每次调用 exec()则都会在字符串中继续查找新匹配项。</p>
<p>正则表达式的第二个方法是 test()，它接受一个字符串参数。匹配返回布尔值true，否则返回false。<br>因此，test()方法经常被用在if语句中，经常出现在验证用户输入的情况下。</p>
<p>exec方法<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> s = <span class="string">"_x_x"</span>;</div><div class="line"><span class="keyword">var</span> r1 = <span class="regexp">/x/</span>;</div><div class="line"><span class="keyword">var</span> r2 = <span class="regexp">/y/</span>;</div><div class="line"></div><div class="line">r1.exec(s) <span class="comment">// ["x"]</span></div><div class="line">r2.exec(s) <span class="comment">// null</span></div></pre></td></tr></table></figure></p>
<p>如果匹配成功，exec方法返回一个数组，里面是匹配结果。如果匹配失败，返回null。</p>
<p>如果正则表示式包含 ()，则返回的数组会包括多个元素。<br>其中，第一个元素是整个匹配成功的结果，后面的元素就是圆括号对应的匹配成功的组，也就是说第二个元素就对应第一个括号，第三个元素对应第二个括号，以此类推。<br>整个返回数组的length属性等于匹配成功的组数+1。<br><figure class="highlight maxima"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">var</span> s = <span class="string">"_x_x"</span>;</div><div class="line"><span class="built_in">var</span> r = /<span class="symbol">_</span>(x)/;</div><div class="line"></div><div class="line">r.exec(s) // [<span class="string">"_x"</span>, <span class="string">"x"</span>] 第一个元素是整个匹配的结果，第二个元素是圆括号匹配的结果。</div></pre></td></tr></table></figure></p>
<p>exec方法的返回数组包含以下两个属性：<br>input：全部字符串。<br>index：匹配成功的开始位置。<br><figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">var r = <span class="regexp">/a(b+)a/</span>;</div><div class="line">regex.exec(<span class="string">"_abbba_aba_"</span>);</div><div class="line"></div><div class="line">arr <span class="regexp">//</span> [<span class="string">"abbba"</span>, <span class="string">"bbb"</span>]</div><div class="line">arr.index <span class="regexp">//</span> <span class="number">1</span></div><div class="line">arr.input <span class="regexp">//</span> <span class="string">"_abbba_aba_"</span></div></pre></td></tr></table></figure></p>
<p>如果正则表达式加上g修饰符，则可以使用多次exec方法，从上一次匹配成功结束的位置开始。<br><figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">var r = <span class="regexp">/a(b+)a/g</span>;</div><div class="line">var a1 = r.exec(<span class="string">"_abbba_aba_"</span>);</div><div class="line">a1 <span class="regexp">//</span> [<span class="string">"abbba"</span>, <span class="string">"bbb"</span>]</div><div class="line">a1.index <span class="regexp">//</span> <span class="number">1</span></div><div class="line">r.lastIndex <span class="regexp">//</span> <span class="number">6</span></div></pre></td></tr></table></figure></p>
<p>lastIndex：下次开始匹配位置<br><figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">var a2 = r.exec(<span class="string">"_abbba_aba_"</span>);</div><div class="line">a2 <span class="regexp">//</span> [<span class="string">"aba"</span>, <span class="string">"b"</span>]</div><div class="line">a2.index <span class="regexp">//</span> <span class="number">7</span></div><div class="line">r.lastIndex <span class="regexp">//</span> <span class="number">10</span></div><div class="line"></div><div class="line">var a3 = r.exec(<span class="string">"_abbba_aba_"</span>);</div><div class="line">a3 <span class="regexp">//</span> null</div><div class="line">a3.index <span class="regexp">//</span> TypeError: Cannot read property <span class="string">"index"</span> of null</div><div class="line">r.lastIndex <span class="regexp">//</span> <span class="number">0</span></div><div class="line"></div><div class="line">var a4 = r.exec(<span class="string">"_abbba_aba_"</span>);</div><div class="line">a4 <span class="regexp">//</span> [<span class="string">"abbba"</span>, <span class="string">"bbb"</span>]</div><div class="line">a4.index <span class="regexp">//</span> <span class="number">1</span></div><div class="line">r.lastIndex <span class="regexp">//</span> <span class="number">6</span></div></pre></td></tr></table></figure></p>
<figure class="highlight pony"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> r = /a(b+)a/g;</div><div class="line"><span class="keyword">var</span> s = <span class="string">"_abbba_aba_"</span>;</div><div class="line"><span class="keyword">while</span>(<span class="literal">true</span>) &#123;</div><div class="line">    <span class="keyword">var</span> <span class="keyword">match</span> = r.exec(s);</div><div class="line">    <span class="keyword">if</span> (!<span class="keyword">match</span>) <span class="keyword">break</span>;</div><div class="line">    console.log(<span class="keyword">match</span>[<span class="number">1</span>]);</div><div class="line">&#125;</div><div class="line"><span class="comment">// bbb</span></div><div class="line"><span class="comment">// b</span></div></pre></td></tr></table></figure>
<p>如果正则对象是一个空字符串，则exec方法会匹配成功，但返回的也是空字符串。<br><figure class="highlight dart"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> r1 = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">""</span>);</div><div class="line"><span class="keyword">var</span> a1 = r1.exec(<span class="string">"abc"</span>);</div><div class="line">a1 <span class="comment">// [""]</span></div><div class="line">a1.index <span class="comment">// 0</span></div><div class="line">r1.lastIndex <span class="comment">// 0 </span></div><div class="line"></div><div class="line"><span class="keyword">var</span> r2 = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">"()"</span>);</div><div class="line"><span class="keyword">var</span> a2 = r2.exec(<span class="string">"abc"</span>);</div><div class="line">a2 <span class="comment">// ["", ""]</span></div><div class="line">a2.index <span class="comment">// 0</span></div><div class="line">r2.lastIndex <span class="comment">// 0</span></div></pre></td></tr></table></figure></p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">var r = /[<span class="string">a-zA-Z_</span>][<span class="symbol">a-zA-Z0-9_</span>]*/;</div><div class="line">r.test("<span class="emphasis">_m_</span>"); // true</div><div class="line">r.test("02331"); // false</div></pre></td></tr></table></figure>
<p>test 方法测试是否有匹配的部分，不一定整个串都匹配。<br><figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">r</span><span class="selector-class">.test</span>(<span class="string">"0871_hello_world"</span>);<span class="comment">//true</span></div><div class="line"><span class="selector-tag">r</span><span class="selector-class">.test</span>(<span class="string">"@main"</span>);<span class="comment">//true</span></div></pre></td></tr></table></figure></p>
<p>修改：<br><figure class="highlight markdown"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">var r = /^[<span class="string">a-zA-Z_</span>][<span class="symbol">a-zA-Z0-9_</span>]*$/;</div></pre></td></tr></table></figure></p>
<p>如果正则表达式带有g修饰符，每一次test方法都从上一次结束的位置开始向后匹配。<br><figure class="highlight stata"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> r = /x/<span class="keyword">g</span>;</div><div class="line"><span class="keyword">var</span> s = <span class="string">"_x_x"</span>;</div><div class="line">r.lastIndex <span class="comment">// 0</span></div><div class="line">r.<span class="keyword">test</span>(s) <span class="comment">// true</span></div><div class="line">r.lastIndex <span class="comment">// 2</span></div><div class="line">r.<span class="keyword">test</span>(s) <span class="comment">// true</span></div><div class="line">r.lastIndex <span class="comment">// 4</span></div><div class="line">r.<span class="keyword">test</span>(s) <span class="comment">// false</span></div></pre></td></tr></table></figure></p>
<p>如果正则模式是一个空字符串，则匹配所有字符串。<br><figure class="highlight dart"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">""</span>).test(<span class="string">"abc"</span>) <span class="comment">// true</span></div></pre></td></tr></table></figure></p>
<p>字符串方法返回值有三类：<br>返回数字类型：indexOf，lastIndexOf，search , charCodeAt<br>返回数组的方法：split，match<br>返回字符串的方法：charAt，substring，substr, slice, replace</p>
<p>match 返回匹配数组<br>replace 替换<br>split 分割<br>search 查找，返回首次发现的位置</p>
<p>search方法<br>返回第一个满足条件的匹配结果在整个字符串中的位置。如果没有任何匹配，则返回-1。该方法忽略g修饰符。<br><figure class="highlight openscad"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">var <span class="built_in">str</span> = <span class="string">"abcde"</span>;</div><div class="line"><span class="built_in">str</span>.indexOf(<span class="string">"cd"</span>) <span class="comment">// 2</span></div><div class="line"><span class="built_in">str</span>.<span class="built_in">search</span>(<span class="string">"cd"</span>) <span class="comment">// 2</span></div><div class="line"><span class="built_in">str</span>.<span class="built_in">search</span>(/cd/) <span class="comment">// 2</span></div></pre></td></tr></table></figure></p>
<p>字符串的match方法与正则对象的exec方法非常类似：匹配成功返回一个数组，匹配失败返回null。<br>如果正则表达式带有g修饰符，则该方法与正则对象的exec方法行为不同，会返回所有匹配成功的结果。<br><figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="string">"_x_x"</span>.match(<span class="regexp">/x/</span>) <span class="regexp">//</span> [<span class="string">"x"</span>]</div><div class="line"><span class="string">"_x_x"</span>.match(<span class="regexp">/y/</span>) <span class="regexp">//</span> null</div><div class="line"></div><div class="line">var s = <span class="string">"abba"</span>;</div><div class="line">var r = <span class="regexp">/a/g</span>;</div><div class="line">s.match(r) <span class="regexp">//</span> [<span class="string">"a"</span>, <span class="string">"a"</span>]</div><div class="line">r.exec(s) <span class="regexp">//</span> [<span class="string">"a"</span>]</div><div class="line"></div><div class="line">var str = <span class="string">"abbcccbbbbbddbbbdabbbsbb"</span>;</div><div class="line">str.match(<span class="regexp">/b+/g</span>) <span class="regexp">//</span>  [<span class="string">"bb"</span>, <span class="string">"bbbbb"</span>, <span class="string">"bbb"</span>, <span class="string">"bbb"</span>, <span class="string">"bb"</span>]</div><div class="line">str.match(<span class="string">"bb"</span>) <span class="regexp">//</span> [<span class="string">"bb"</span>, index: <span class="number">1</span>, input: <span class="string">"abbcccbbbbbddbbbdabbbsbb"</span>]</div><div class="line"></div><div class="line"> <span class="string">"I love this world like a shit."</span>.match(<span class="regexp">/love|a/g</span>); <span class="regexp">//</span> [<span class="string">"love"</span>, <span class="string">"a"</span>]</div><div class="line"></div><div class="line"><span class="regexp">//</span> 切割单词</div><div class="line"></div><div class="line">var str = <span class="string">"how old are   you|abc"</span>;</div><div class="line">str.match(<span class="regexp">/\b[a-zA-Z]+\b/g</span>);  <span class="regexp">//</span> [<span class="string">"how"</span>, <span class="string">"old"</span>, <span class="string">"are"</span>, <span class="string">"you"</span>, <span class="string">"abc"</span>]</div></pre></td></tr></table></figure></p>
<p>split方法<br>返回一个由分割后的各个部分组成的数组。<br>该方法接受两个参数，第一个参数是分隔规则，第二个参数是返回数组的最大成员数。</p>
<p>使用正则表达式，去除字符串的逗号前面的空格。<br><figure class="highlight smalltalk"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">"a,  b,c, d"</span>.split(<span class="comment">","</span>); // [ <span class="comment">"a"</span>, <span class="comment">"  b"</span>, <span class="comment">"c"</span>, <span class="comment">" d"</span> ]</div><div class="line"><span class="comment">"a,  b,c, d"</span>.split(/, */); // [ <span class="comment">"a"</span>, <span class="comment">"b"</span>, <span class="comment">"c"</span>, <span class="comment">"d"</span> ]</div><div class="line"><span class="comment">"a,  b,c, d"</span>.split(/, */, <span class="number">2</span>); // [ <span class="comment">"a"</span>, <span class="comment">"b"</span> ]</div></pre></td></tr></table></figure></p>
<p>切分字符串<br><figure class="highlight smalltalk"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">"a b   c"</span>.split(<span class="comment">" "</span>); // [<span class="comment">"a"</span>, <span class="comment">"b"</span>, <span class="comment">""</span>, <span class="comment">""</span>, <span class="comment">"c"</span>] 空格是分隔符，b c 间有三个分隔符，三个分隔符间有两个“”</div><div class="line"><span class="comment">"a b   c"</span>.split(/\s+/); // [<span class="comment">"a"</span>, <span class="comment">"b"</span>, <span class="comment">"c"</span>] </div><div class="line"><span class="comment">"a,b, c  d"</span>.split(/[\s\,]+/); // [<span class="comment">"a"</span>, <span class="comment">"b"</span>, <span class="comment">"c"</span>, <span class="comment">"d"</span>] </div><div class="line"><span class="comment">"a,b;; c  d"</span>.split(/[\s\,\;]+/); // [<span class="comment">"a"</span>, <span class="comment">"b"</span>, <span class="comment">"c"</span>, <span class="comment">"d"</span>]</div></pre></td></tr></table></figure></p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="string">"aaa*a*"</span>.split(<span class="regexp">/a*/</span>) <span class="regexp">//</span> [ <span class="string">""</span>, <span class="string">"*"</span>, <span class="string">"*"</span> ]</div><div class="line"><span class="string">"aaa**a*"</span>.split(<span class="regexp">/a*/</span>) <span class="regexp">//</span> [<span class="string">""</span>, <span class="string">"*"</span>, <span class="string">"*"</span>, <span class="string">"*"</span>]</div></pre></td></tr></table></figure>
<p>分割规则是出现0次或多次的a，所以第一个分隔符是“aaa”，第二个分割符是“a”，将整个字符串分成三个部分。<br>出现0次的a，意味着只要没有a就可以分割，实际上就是按字符分割。</p>
<p>如果正则表达式带有括号，则括号匹配的部分也会作为数组成员返回。<br><figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="string">"aaa*a*"</span>.split(<span class="regexp">/(a*)/</span>) <span class="regexp">//</span> [ <span class="string">""</span>, <span class="string">"aaa"</span>, <span class="string">"*"</span>, <span class="string">"a"</span>, <span class="string">"*"</span> ]</div></pre></td></tr></table></figure></p>
<p>另一个组匹配的例子。<br><figure class="highlight smalltalk"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">"a,  b  ,  "</span>.split(/(,)/) // [<span class="comment">"a"</span>, <span class="comment">","</span>, <span class="comment">"  b  "</span>, <span class="comment">","</span>, <span class="comment">"  "</span>]</div><div class="line"><span class="comment">"a,  b  ,  "</span>.split(/ *(,) */) // [<span class="comment">"a"</span>, <span class="comment">","</span>, <span class="comment">"b"</span>, <span class="comment">","</span>, <span class="comment">""</span>]</div><div class="line"><span class="comment">"a   b  c"</span>.split(<span class="comment">""</span>); // [<span class="comment">"a"</span>, <span class="comment">" "</span>, <span class="comment">" "</span>, <span class="comment">" "</span>, <span class="comment">"b"</span>, <span class="comment">" "</span>, <span class="comment">" "</span>, <span class="comment">"c"</span>]</div><div class="line"><span class="comment">"a   b  c"</span>.split(/\s+/); // [<span class="comment">"a"</span>, <span class="comment">"b"</span>, <span class="comment">"c"</span>]</div></pre></td></tr></table></figure></p>
<p>replace 方法不影响原始字符串，而将新的串作为返回值。</p>
<p>不加g修饰符，替换第一个匹配成功的值，否则替换所有匹配成功的值。<br><figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="string">"aaa"</span>.replace(<span class="string">"a"</span>, <span class="string">"b"</span>) <span class="regexp">//</span> <span class="string">"baa"</span></div><div class="line"><span class="string">"aaa"</span>.replace(<span class="regexp">/a/</span>, <span class="string">"b"</span>) <span class="regexp">//</span> <span class="string">"baa"</span></div><div class="line"><span class="string">"aaa"</span>.replace(<span class="regexp">/a/g</span>, <span class="string">"b"</span>) <span class="regexp">//</span> <span class="string">"bbb"</span></div></pre></td></tr></table></figure></p>
<p>replace方法可以消除字符串首尾两端的空格</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="string">"  aaa aa aa  "</span>.replace(<span class="regexp">/^\s+|\s+$/g</span>, <span class="string">""</span>) <span class="regexp">//</span> <span class="string">"aaa aa aa"</span></div><div class="line"><span class="string">"  aaa aa aa  "</span>.replace(<span class="regexp">/^\s\s*/</span>,<span class="string">""</span>).replace(<span class="regexp">/\s\s*$/</span>,<span class="string">""</span>) <span class="regexp">//</span> <span class="string">"aaa aa aa"</span></div></pre></td></tr></table></figure>
<p>replace方法的第二个参数可以使用美元符号$，指代所替换的内容。<br>    $&amp; 指代匹配的子字符串。<br>    $` 指代匹配结果前面的文本。<br>    $’ 指代匹配结果后面的文本。<br>    $n 指代匹配成功的第n组内容，n是从1的自然数。<br>      $$ 指代美元符号$。</p>
<p>如果在替换过程中，需要对匹配的组引用（\1,\2 ），可以通过$n 来对第 n 个分组进行引用。<br>在替换的过程中，将 Welcome 和 John 调换顺序：<br><figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="string">"John, Welcome"</span>.replace(<span class="regexp">/(\w+),\s(\w+)/g</span>, <span class="string">"$2, $1"</span>); <span class="regexp">//</span> <span class="string">"Welcome, John"</span></div></pre></td></tr></table></figure></p>
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="string">"abc"</span>.<span class="built_in">replace</span>(<span class="string">"b"</span>, <span class="string">"[$`-$&amp;-$']"</span>)<span class="comment"> // "a[a-b-c]c"</span></div></pre></td></tr></table></figure>
<p>replace方法的第二个参数还可以是一个函数，将匹配内容替换为函数返回值。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="string">"3 and 5"</span>.replace(<span class="regexp">/[0-9]+/g</span>, <span class="function"><span class="keyword">function</span>(<span class="params">match</span>)</span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="number">2</span> * match; &#125;)</div><div class="line"><span class="comment">// "6 and 10"</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> a = <span class="string">"The quick brown fox jumped over the lazy dog."</span>;</div><div class="line"><span class="keyword">var</span> pattern = <span class="regexp">/quick|brown|lazy/ig</span>;</div><div class="line">a.replace( pattern, <span class="function"><span class="keyword">function</span> <span class="title">replacer</span>(<span class="params">match</span>)</span>&#123;</div><div class="line">  <span class="keyword">return</span> match.toUpperCase();</div><div class="line">&#125; );</div><div class="line"><span class="comment">// The QUICK BROWN fox jumped over the LAZY dog.</span></div></pre></td></tr></table></figure></p>
<p>replace方法第二个参数的替换函数，可以接受多个参数。<br>第一个参数是捕捉到的内容，第二个参数是捕捉到的组匹配（有多少个组匹配，就有多少个对应的参数）。<br>此外，最后还可以添加两个参数，倒数第二个参数是捕捉到的内容在整个字符串中的位置（比如从第五个位置开始），最后一个参数是原字符串。<br>下面是一个网页模板替换的例子。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">var prices = &#123;</div><div class="line">  <span class="string">"pr_1"</span>: <span class="string">"<span class="variable">$1</span>.99"</span>,</div><div class="line">  <span class="string">"pr_2"</span>: <span class="string">"<span class="variable">$9</span>.99"</span>,</div><div class="line">  <span class="string">"pr_3"</span>: <span class="string">"<span class="variable">$5</span>.00"</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line">var template = <span class="string">".."</span>; // some ecommerce page template</div><div class="line"></div><div class="line">template.replace(</div><div class="line">    /(&lt;span id=<span class="string">")(.*?)("</span>&gt;)(&lt;\/span&gt;)/g,</div><div class="line">    <span class="keyword">function</span>(match,<span class="variable">$1</span>,<span class="variable">$2</span>,<span class="variable">$3</span>,<span class="variable">$4</span>)&#123;</div><div class="line">        <span class="built_in">return</span> <span class="variable">$1</span> + <span class="variable">$2</span> + <span class="variable">$3</span> + prices[<span class="variable">$2</span>] + <span class="variable">$4</span>;</div><div class="line">    &#125;</div><div class="line">);</div></pre></td></tr></table></figure></p>
<p>上面代码的捕捉模式中，有四个括号，产生四个组匹配，在匹配函数中用$1到$4表示。匹配函数的作用是将价格插入模板中。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line"><span class="meta"></span></div><div class="line">"use strict";</div><div class="line"></div><div class="line"><span class="keyword">var</span> re = <span class="regexp">/^$/</span>;</div><div class="line"></div><div class="line"><span class="comment">// 测试:</span></div><div class="line"><span class="keyword">var</span></div><div class="line">    i,</div><div class="line">    success = <span class="literal">true</span>,</div><div class="line">    should_pass = [<span class="string">"someone@gmail.com"</span>, <span class="string">"bill.gates@microsoft.com"</span>, <span class="string">"tom@voyager.org"</span>, <span class="string">"bob2015@163.com"</span>],</div><div class="line">    should_fail = [<span class="string">"test#gmail.com"</span>, <span class="string">"bill@microsoft"</span>, <span class="string">"bill%gates@ms.com"</span>, <span class="string">"@voyager.org"</span>];</div><div class="line"><span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; should_pass.length; i++) &#123;</div><div class="line">    <span class="keyword">if</span> (!re.test(should_pass[i])) &#123;</div><div class="line">        alert(<span class="string">"测试失败: "</span> + should_pass[i]);</div><div class="line">        success = <span class="literal">false</span>;</div><div class="line">        <span class="keyword">break</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; should_fail.length; i++) &#123;</div><div class="line">    <span class="keyword">if</span> (re.test(should_fail[i])) &#123;</div><div class="line">        alert(<span class="string">"测试失败: "</span> + should_fail[i]);</div><div class="line">        success = <span class="literal">false</span>;</div><div class="line">        <span class="keyword">break</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">if</span> (success) &#123;</div><div class="line">    alert(<span class="string">"测试通过!"</span>);</div><div class="line">&#125;</div><div class="line"><span class="comment">// 版本二可以验证并提取出带名字的Email地址：</span></div><div class="line"><span class="meta"></span></div><div class="line">"use strict";</div><div class="line"></div><div class="line"><span class="keyword">var</span> re = <span class="regexp">/^$/</span>;</div><div class="line"></div><div class="line"><span class="comment">// 测试:</span></div><div class="line"><span class="keyword">var</span> r = re.exec(<span class="string">"&lt;Tom Paris&gt; tom@voyager.org"</span>);</div><div class="line"><span class="keyword">if</span> (r === <span class="literal">null</span> || r.toString() !== [<span class="string">"&lt;Tom Paris&gt; tom@voyager.org"</span>, <span class="string">"Tom Paris"</span>, <span class="string">"tom@voyager.org"</span>].toString()) &#123;</div><div class="line">    alert(<span class="string">"测试失败!"</span>);</div><div class="line">&#125;</div><div class="line"><span class="keyword">else</span> &#123;</div><div class="line">    alert(<span class="string">"测试成功!"</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>写一个少于 80 字符的函数，判断一个字符串是不是回文字符串<br><figure class="highlight processing"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">function isPalindrome(<span class="built_in">str</span>) &#123;</div><div class="line">    <span class="built_in">str</span> = <span class="built_in">str</span>.replace(/\W/g, <span class="string">""</span>).toLowerCase();</div><div class="line">    <span class="keyword">return</span> (<span class="built_in">str</span> == <span class="built_in">str</span>.<span class="built_in">split</span>(<span class="string">""</span>).<span class="built_in">reverse</span>().<span class="built_in">join</span>(<span class="string">""</span>));</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>

				</div>
				<!-- about -->
				
			</div>
			<!-- pagination -->
			
			<div class="comment-section">
	
	


</div>
		</div>
		
	</div>


		<footer>
			
<p>Powered by <a href="https://hexo.io">Hexo</a> with <a href="https://github.com/wayou/hexo-theme-material">Material</a> theme modified by  Huangzhike </p>
<p>&copy; 2016 <a href="https://huangzhike.github.io"> Huangzhike </a></p>
<a id="gotop" href="#" title="back to top"><i class="mdi-hardware-keyboard-arrow-up"></i></a>

		</footer>
	</div>
	<!-- <script src="/libs/bs/js/bootstrap.min.js"></script> -->
	<!-- <script src="//apps.bdimg.com/libs/bootstrap/3.3.4/js/bootstrap.min.js"></script> -->
	<script src="/js/highlight.js"></script> 
	<script>hljs.initHighlightingOnLoad();var timeEnd = new Date();console.log('耗时：' + (timeEnd - timeStart));</script>
	<!-- <script>(typeof $().modal == 'function')|| document.write('<script src="/libs/bs/js/bootstrap.min.js" type="text/javascript"><\/script>')</script>-->
	<!-- material design -->
	<!-- <script src="/libs/bs-material/js/ripples.min.js"></script> -->
	<!-- <script src="//apps.bdimg.com/libs/bootstrap-material/0.3.0/js/ripples.min.js"></script> -->
	<!-- <script src="/libs/bs-material/js/material.min.js"></script> -->
	<!-- <script src="//apps.bdimg.com/libs/bootstrap-material/0.3.0/js/material.min.js"></script>-->
	<!-- toc -->
	<!-- <script src="/libs/tocify/jquery-ui.min.js"></script> -->
	<!-- <script src="//apps.bdimg.com/libs/jqueryui/1.10.4/jquery-ui.min.js"></script> -->
	<!-- <script src="/libs/tocify/jquery.tocify.custom.js"></script> -->
	<!-- <script src="/js/main.js"></script> -->
</body>
</html>
