<!DOCTYPE HTML>
<html>
	<head>
		<meta charset="utf-8">
		
		<title>[笔记]-正则方法&amp;字符串方法 | 用手记笔记，更用脑记笔记</title>
		
		<meta name="author" content="Huangzhike">
		
		
		<meta name="description" content="一个放笔记的地方">
		
		
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
		
		<meta property="og:title" content="[笔记]-正则方法&amp;字符串方法"/>
		
		<meta property="og:site_name" content="用手记笔记，更用脑记笔记"/>
		
		
		<!-- favicon -->
		<link rel="icon" type="image/ico" href="/favicon.ico" sizes="32x32">
		<link rel="manifest" href="/manifest.json">
		<meta name="msapplication-TileColor" content="#009688">
		<meta name="msapplication-TileImage" content="/mstile-144x144.ico">
		<meta name="theme-color" content="#009688">
		<script>var timeStart = new Date();</script>
		<!-- favicon end -->
		<!-- <link href="//favicon.ico" rel="icon"> -->
		
		<!-- toc -->
		<!-- <link rel="stylesheet" href="/libs/tocify/jquery.tocify.css" media="screen" type="text/css"> -->
		<!-- <link rel="stylesheet" href="/libs/bs/css/bootstrap.min.css" media="screen" type="text/css"> -->
		<link rel="stylesheet" href="//apps.bdimg.com/libs/bootstrap/3.3.4/css/bootstrap.min.css" media="screen" type="text/css">
		<!-- material design -->
		<!-- <link rel="stylesheet" href="/libs/bs-material/css/ripples.min.css" media="screen" type="text/css"> -->
		<!-- <link rel="stylesheet" href="//apps.bdimg.com/libs/bootstrap-material/0.3.0/css/ripples.min.css" media="screen" type="text/css"> -->
		<!-- <link rel="stylesheet" href="/libs/bs-material/css/material.min.css" media="screen" type="text/css"> -->
		<!--<link rel="stylesheet" href="//apps.bdimg.com/libs/bootstrap-material/0.3.0/css/material.min.css" media="screen" type="text/css"> -->
		<!--<link rel="stylesheet" href="/css/highlight.light.css" media="screen" type="text/css">-->
		<link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
		
		
		<!-- <script src="//apps.bdimg.com/libs/jquery/2.0.3/jquery.min.js"></script>-->
		<!-- <script>window.jQuery || document.write('<script src="/libs/jquery-3.1.1.slim.min.js" type="text/javascript"><\/script>')</script>-->
	</head>

<body>
	<nav class="navbar navbar-default">
	<div class="container">
		<div class="navbar-header">
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
				<span class="sr-only">菜单</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			<a class="navbar-brand" href="/">用手记笔记，更用脑记笔记</a>
           
		</div>
		<div id="navbar" class="collapse navbar-collapse">
			<ul class="nav navbar-nav navbar-right">
				
				<li>
					<a href="/" title="">
						<i class="fa fa-home"></i>首页
					</a>
				</li>
				
				<li>
					<a href="/archives" title="">
						<i class="fa fa-list"></i>存档
					</a>
				</li>
				
				<li>
					<a href="/resume" title="我的主页">
						<i class="fa fa-github"></i>GitHub
					</a>
				</li>
				
			</ul>
		</div>
	</div>
</nav>

	<div class="container" >
		<div class="row">
	
		<div class="col-md-9 center-content">
			
			<div class="content">
				<!-- index -->
				
				<h2>[笔记]-正则方法&amp;字符串方法</h2>
				
				<div>
					<span class="post-time">2016-10-27 12:11</span>
				</div>	
				
				<div class="article-content">
				<p><strong>2016-11-20重新整理更新</strong></p>
<ul>
<li>正则相关方法：exec，test</li>
<li><p>字符串相关方法：search，match，split，replace</p>
</li>
<li><p>RegExp实例方法：</p>
</li>
<li><p>exec()为捕获组设计，接受字符串参数，匹配成功，返回包含匹配结果的数组，失败，返回null。</p>
</li>
<li><p>如果正则包含分组()，返回数组中，第一项是与整个模式匹配的字符串，其他项是与模式中的捕获组匹配的字符串</p>
</li>
<li><p>第二个元素就对应第一个括号，第三个元素对应第二个括号，返回数组的length等于匹配成功组数+1。</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="regexp">/_(x)/</span>.exec(<span class="string">"_x_x"</span>) <span class="regexp">//</span> [<span class="string">"_x"</span>, <span class="string">"x"</span>]</div></pre></td></tr></table></figure>
</li>
<li><p>如果模式中没有捕获组，则数组只有一项。</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">/<span class="keyword">x</span>/.exec(<span class="string">"_x_x"</span>) // [<span class="string">"x"</span>]</div><div class="line">/<span class="regexp">y/.exec("_x_x") //</span> null</div></pre></td></tr></table></figure>
</li>
<li><p>返回数组是Array实例，但包含两个属性：index（匹配位置）和input（全部字符串）。</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">var arr = <span class="regexp">/a(b+)a/</span>.exec(<span class="string">"_abbba_aba_"</span>);</div><div class="line"></div><div class="line">arr <span class="regexp">//</span> [<span class="string">"abbba"</span>, <span class="string">"bbb"</span>]</div><div class="line">arr.index <span class="regexp">//</span> <span class="number">1</span></div><div class="line">arr.input <span class="regexp">//</span> <span class="string">"_abbba_aba_"</span></div></pre></td></tr></table></figure>
</li>
<li><p>不设g修饰符，在同一个字符串上多次exec()始终返回第一个匹配项的信息。</p>
</li>
<li><p>设置g修饰符，exec()方法每次也只返回一个匹配项，从上次匹配成功结束的位置开始。</p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> <span class="keyword">reg</span> = /a(b+)a/<span class="keyword">g</span>;</div><div class="line"><span class="keyword">var</span> a1 = <span class="keyword">reg</span>.exec(<span class="string">"_abbba_aba_"</span>);</div><div class="line">a1 <span class="comment">// ["abbba", "bbb"]</span></div><div class="line">a1.index <span class="comment">// 1</span></div><div class="line"><span class="comment">// lastIndex：下次开始匹配位置</span></div><div class="line"><span class="keyword">reg</span>.lastIndex <span class="comment">// 6</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> a2 = <span class="keyword">reg</span>.exec(<span class="string">"_abbba_aba_"</span>);</div><div class="line">a2 <span class="comment">// ["aba", "b"]</span></div><div class="line">a2.index <span class="comment">// 7</span></div><div class="line"><span class="keyword">reg</span>.lastIndex <span class="comment">// 10</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> a3 = <span class="keyword">reg</span>.exec(<span class="string">"_abbba_aba_"</span>);</div><div class="line">a3 <span class="comment">// null</span></div><div class="line">a3.index <span class="comment">// TypeError: Cannot read property "index" of null</span></div><div class="line"><span class="keyword">reg</span>.lastIndex <span class="comment">// 0</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> a4 = <span class="keyword">reg</span>.exec(<span class="string">"_abbba_aba_"</span>);</div><div class="line">a4 <span class="comment">// ["abbba", "bbb"]</span></div><div class="line">a4.index <span class="comment">// 1</span></div><div class="line"><span class="keyword">reg</span>.lastIndex <span class="comment">// 6</span></div></pre></td></tr></table></figure>
  <figure class="highlight pony"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> reg = /a(b+)a/g;</div><div class="line"><span class="keyword">var</span> str = <span class="string">"_abbba_aba_"</span>;</div><div class="line"><span class="keyword">while</span>(<span class="literal">true</span>) &#123;</div><div class="line">	<span class="keyword">var</span> <span class="keyword">match</span> = reg.exec(str);</div><div class="line">	<span class="keyword">if</span> (!<span class="keyword">match</span>) <span class="keyword">break</span>;</div><div class="line">	console.log(<span class="keyword">match</span>[<span class="number">1</span>]);</div><div class="line">&#125;</div><div class="line"><span class="comment">// bbb</span></div><div class="line"><span class="comment">// b</span></div></pre></td></tr></table></figure>
</li>
<li><p>test()方法：接受一个字符串参数。匹配返回true，否则false。常用在if语句中，验证用户输入。</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">var reg = /[<span class="string">a-zA-Z_</span>][<span class="symbol">a-zA-Z0-9_</span>]*/;</div><div class="line">reg.test("<span class="emphasis">_m_</span>"); // true</div></pre></td></tr></table></figure>
</li>
<li><p>test方法测试是否有匹配部分，不一定匹配整串。</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">reg.test("@0<span class="emphasis">_hello_</span>world"); // true</div><div class="line">// 修改：</div><div class="line">var reg = /^[<span class="string">a-zA-Z_</span>][<span class="symbol">a-zA-Z0-9_</span>]*$/;</div></pre></td></tr></table></figure>
</li>
<li><p>如果有g修饰符，每次test都从上一次结束位置开始向后匹配。</p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> <span class="keyword">reg</span> = /x/<span class="keyword">g</span>;</div><div class="line"><span class="keyword">var</span> str = <span class="string">"_x_x"</span>;</div><div class="line"><span class="keyword">reg</span>.lastIndex <span class="comment">// 0</span></div><div class="line"><span class="keyword">reg</span>.<span class="keyword">test</span>(s) <span class="comment">// true</span></div><div class="line"><span class="keyword">reg</span>.lastIndex <span class="comment">// 2</span></div><div class="line"><span class="keyword">reg</span>.<span class="keyword">test</span>(s) <span class="comment">// true</span></div><div class="line"><span class="keyword">reg</span>.lastIndex <span class="comment">// 4</span></div><div class="line"><span class="keyword">reg</span>.<span class="keyword">test</span>(s) <span class="comment">// false</span></div></pre></td></tr></table></figure>
</li>
<li><p>如果正则模式是空字符串，匹配所有字符串。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">""</span>).test(<span class="string">"abc"</span>) <span class="comment">// true</span></div></pre></td></tr></table></figure>
</li>
<li><p>字符串方法返回值有三类：</p>
<ul>
<li>返回数字类型：indexOf，lastIndexOf，search , charCodeAt</li>
<li>返回数组：split，match</li>
<li>返回字符串：charAt，substring，substr, slice, replace</li>
</ul>
</li>
<li><p>search方法：返回第一个匹配结果在字符串的位置。不匹配返回-1。该方法忽略g修饰符。</p>
<figure class="highlight openscad"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">var <span class="built_in">str</span> = <span class="string">"abcde"</span>;</div><div class="line"><span class="built_in">str</span>.indexOf(<span class="string">"cd"</span>) <span class="comment">// 2</span></div><div class="line"><span class="built_in">str</span>.<span class="built_in">search</span>(<span class="string">"cd"</span>) <span class="comment">// 2</span></div><div class="line"><span class="built_in">str</span>.<span class="built_in">search</span>(/cd/) <span class="comment">// 2</span></div></pre></td></tr></table></figure>
</li>
<li><p>字符串的match方法类似正则对象的exec方法：匹配成功返回一个数组，匹配失败返回null。</p>
</li>
<li><p>如果有g修饰符，该方法与exec不同，返回所有匹配成功的结果。</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="string">"_x_x"</span>.match(<span class="regexp">/x/</span>) <span class="regexp">//</span> [<span class="string">"x"</span>]</div><div class="line"><span class="string">"_x_x"</span>.match(<span class="regexp">/y/</span>) <span class="regexp">//</span> null</div><div class="line"></div><div class="line"><span class="string">"abba"</span>.match(<span class="regexp">/a/g</span>) <span class="regexp">//</span> [<span class="string">"a"</span>, <span class="string">"a"</span>]</div><div class="line"><span class="regexp">/a/g</span>.exec(<span class="string">"abba"</span>) <span class="regexp">//</span> [<span class="string">"a"</span>]</div><div class="line"></div><div class="line">var str = <span class="string">"abbcccbbbbbddbbbdabbbsbb"</span>;</div><div class="line">str.match(<span class="regexp">/b+/g</span>) <span class="regexp">//</span>  [<span class="string">"bb"</span>, <span class="string">"bbbbb"</span>, <span class="string">"bbb"</span>, <span class="string">"bbb"</span>, <span class="string">"bb"</span>]</div><div class="line">str.match(<span class="string">"bb"</span>) <span class="regexp">//</span> [<span class="string">"bb"</span>, index: <span class="number">1</span>, input: <span class="string">"abbcccbbbbbddbbbdabbbsbb"</span>]</div><div class="line"></div><div class="line"><span class="string">"I love this world like a shit."</span>.match(<span class="regexp">/love|a/g</span>); <span class="regexp">//</span> [<span class="string">"love"</span>, <span class="string">"a"</span>]</div><div class="line"></div><div class="line"><span class="regexp">//</span> 切割单词</div><div class="line">var str = <span class="string">"how old are   you|abc"</span>;</div><div class="line">str.match(<span class="regexp">/\b[a-zA-Z]+\b/g</span>); <span class="regexp">//</span> [<span class="string">"how"</span>, <span class="string">"old"</span>, <span class="string">"are"</span>, <span class="string">"you"</span>, <span class="string">"abc"</span>]</div></pre></td></tr></table></figure>
</li>
<li><p>split方法：返回由分割后各部分组成的数组。接受两个参数：分隔规则，返回数组的最大成员数。</p>
</li>
<li><p>去除字符串的逗号前的空格。</p>
<figure class="highlight smalltalk"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">"a,  b,c, d"</span>.split(<span class="comment">","</span>); // [<span class="comment">"a"</span>, <span class="comment">"  b"</span>, <span class="comment">"c"</span>, <span class="comment">" d"</span>]</div><div class="line"><span class="comment">"a,  b,c, d"</span>.split(/, */); // [<span class="comment">"a"</span>, <span class="comment">"b"</span>, <span class="comment">"c"</span>, <span class="comment">"d"</span>]</div><div class="line"><span class="comment">"a,  b,c, d"</span>.split(/, */, <span class="number">2</span>); // [<span class="comment">"a"</span>, <span class="comment">"b"</span>]</div></pre></td></tr></table></figure>
</li>
<li><p>切分字符串。</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="regexp">//</span> 空格是分隔符，bc间有三个分隔符，三个分隔符间有两个“”</div><div class="line"><span class="string">"a b   c"</span>.split(<span class="string">" "</span>); <span class="regexp">//</span> [<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">""</span>, <span class="string">""</span>, <span class="string">"c"</span>] </div><div class="line"><span class="string">"a b   c"</span>.split(<span class="regexp">/\s+/</span>); <span class="regexp">//</span> [<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>] </div><div class="line"><span class="string">"a,b, c  d"</span>.split(<span class="regexp">/[\s\,]+/</span>); <span class="regexp">//</span> [<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>, <span class="string">"d"</span>] </div><div class="line"><span class="string">"a,b;; c  d"</span>.split(<span class="regexp">/[\s\,\;]+/</span>); <span class="regexp">//</span> [<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>, <span class="string">"d"</span>]</div></pre></td></tr></table></figure>
  <figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="regexp">//</span> 分割规则是<span class="number">0</span>个或多个a，第一个分隔符是“aaa”，第二个是“a”，整个字符串分三部分</div><div class="line"><span class="string">"aaa*a*"</span>.split(<span class="regexp">/a*/</span>) <span class="regexp">//</span> [ <span class="string">""</span>, <span class="string">"*"</span>, <span class="string">"*"</span> ]</div><div class="line"><span class="regexp">//</span> <span class="number">0</span>个a，只要没有a就可以分割，实际上是按字符分割</div><div class="line"><span class="string">"aaa**a*"</span>.split(<span class="regexp">/a*/</span>) <span class="regexp">//</span> [<span class="string">""</span>, <span class="string">"*"</span>, <span class="string">"*"</span>, <span class="string">"*"</span>]</div></pre></td></tr></table></figure>
</li>
<li><p>如果正则带有括号，括号匹配部分也会作为数组成员返回。</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="string">"aaa*a*"</span>.split(<span class="regexp">/(a*)/</span>) <span class="regexp">//</span> [ <span class="string">""</span>, <span class="string">"aaa"</span>, <span class="string">"*"</span>, <span class="string">"a"</span>, <span class="string">"*"</span> ]</div></pre></td></tr></table></figure>
</li>
<li><p>另一个组匹配。</p>
<figure class="highlight smalltalk"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">"a,  b  ,  "</span>.split(/(,)/) // [<span class="comment">"a"</span>, <span class="comment">","</span>, <span class="comment">"  b  "</span>, <span class="comment">","</span>, <span class="comment">"  "</span>]</div><div class="line"><span class="comment">"a,  b  ,  "</span>.split(/ *(,) */) // [<span class="comment">"a"</span>, <span class="comment">","</span>, <span class="comment">"b"</span>, <span class="comment">","</span>, <span class="comment">""</span>]</div><div class="line"><span class="comment">"a   b  c"</span>.split(<span class="comment">""</span>); // [<span class="comment">"a"</span>, <span class="comment">" "</span>, <span class="comment">" "</span>, <span class="comment">" "</span>, <span class="comment">"b"</span>, <span class="comment">" "</span>, <span class="comment">" "</span>, <span class="comment">"c"</span>]</div><div class="line"><span class="comment">"a   b  c"</span>.split(/\s+/); // [<span class="comment">"a"</span>, <span class="comment">"b"</span>, <span class="comment">"c"</span>]</div></pre></td></tr></table></figure>
</li>
<li><p>replace方法不影响原始字符串，返回新串。不加g修饰符，替换第一个匹配的值，否则替换所有。</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="string">"aaa"</span>.replace(<span class="string">"a"</span>, <span class="string">"b"</span>) <span class="regexp">//</span> <span class="string">"baa"</span></div><div class="line"><span class="string">"aaa"</span>.replace(<span class="regexp">/a/</span>, <span class="string">"b"</span>) <span class="regexp">//</span> <span class="string">"baa"</span></div><div class="line"><span class="string">"aaa"</span>.replace(<span class="regexp">/a/g</span>, <span class="string">"b"</span>) <span class="regexp">//</span> <span class="string">"bbb"</span></div></pre></td></tr></table></figure>
</li>
<li><p>replace方法消除字符串首尾两端空格</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="string">"  aaa aa aa  "</span>.replace(<span class="regexp">/^\s+|\s+$/g</span>, <span class="string">""</span>) <span class="regexp">//</span> <span class="string">"aaa aa aa"</span></div><div class="line"><span class="string">"  aaa aa aa  "</span>.replace(<span class="regexp">/^\s\s*/</span>,<span class="string">""</span>).replace(<span class="regexp">/\s\s*$/</span>,<span class="string">""</span>) <span class="regexp">//</span> <span class="string">"aaa aa aa"</span></div></pre></td></tr></table></figure>
</li>
<li><p>replace方法第二个参数美元符号$，指代替换的内容。</p>
<ul>
<li>$&amp;：指代匹配的子字符串。</li>
<li>$`：指代匹配结果前面的文本。</li>
<li>$’：指代匹配结果后面的文本。</li>
<li>$n：指代匹配成功的第n组内容，n是从1的自然数。</li>
<li>$$：指代美元符号$。</li>
</ul>
</li>
<li><p>对匹配组引用（\1,\2 ），可通过$n引用第n个分组。</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="regexp">//</span> 将Welcome和John调换顺序</div><div class="line"><span class="string">"John, Welcome"</span>.replace(<span class="regexp">/(\w+),\s(\w+)/g</span>, <span class="string">"$2, $1"</span>); <span class="regexp">//</span> <span class="string">"Welcome, John"</span></div></pre></td></tr></table></figure>
  <figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="string">"abc"</span>.<span class="built_in">replace</span>(<span class="string">"b"</span>, <span class="string">"[$`-$&amp;-$']"</span>)<span class="comment"> // "a[a-b-c]c"</span></div></pre></td></tr></table></figure>
</li>
<li><p>replace方法第二个参数还可以是函数，将匹配内容替换为函数返回值。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="string">"3 and 5"</span>.replace(<span class="regexp">/[0-9]+/g</span>, <span class="function"><span class="keyword">function</span>(<span class="params">match</span>) </span>&#123;</div><div class="line">	<span class="keyword">return</span> <span class="number">2</span> * match;</div><div class="line">&#125;)</div><div class="line"><span class="comment">// "6 and 10"</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> str = <span class="string">"The quick brown fox jumped over the lazy dog."</span>;</div><div class="line"><span class="keyword">var</span> pattern = <span class="regexp">/quick|brown|lazy/ig</span>;</div><div class="line">str.replace(pattern, <span class="function"><span class="keyword">function</span> <span class="title">replacer</span>(<span class="params">match</span>) </span>&#123;</div><div class="line">	<span class="keyword">return</span> match.toUpperCase();</div><div class="line">&#125;);</div><div class="line"><span class="comment">// The QUICK BROWN fox jumped over the LAZY dog.</span></div></pre></td></tr></table></figure>
</li>
<li><p>replace方法的替换函数可接受多个参数：捕捉到的内容，捕捉到的组匹配（多少个组匹配，多少个参数）。</p>
</li>
<li>最后还可添加两个参数：捕捉到的内容在整个字符串中的位置，原字符串。</li>
<li><p>网页模板替换。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">var prices = &#123;</div><div class="line">	<span class="string">"pr_1"</span>: <span class="string">"<span class="variable">$1</span>.99"</span>,</div><div class="line">	<span class="string">"pr_2"</span>: <span class="string">"<span class="variable">$9</span>.99"</span>,</div><div class="line">	<span class="string">"pr_3"</span>: <span class="string">"<span class="variable">$5</span>.00"</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line">var template = <span class="string">"..."</span>; // some ecommerce page template</div><div class="line"></div><div class="line">template.replace(</div><div class="line">	/(&lt;span id=<span class="string">")(.*?)("</span>&gt;)(&lt;\/span&gt;)/g,</div><div class="line">	<span class="keyword">function</span>(match, <span class="variable">$1</span>, <span class="variable">$2</span>, <span class="variable">$3</span>, <span class="variable">$4</span>) &#123;</div><div class="line">		// 将价格插入模板中</div><div class="line">		<span class="built_in">return</span> <span class="variable">$1</span> + <span class="variable">$2</span> + <span class="variable">$3</span> + prices[<span class="variable">$2</span>] + <span class="variable">$4</span>;</div><div class="line">	&#125;</div><div class="line">);</div><div class="line">// 捕捉模式中，有四个括号，产生四个组匹配，在匹配函数中用<span class="variable">$1</span>到<span class="variable">$4</span>表示</div></pre></td></tr></table></figure>
</li>
<li><p>邮箱验证：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="meta">"use strict"</span>;</div><div class="line"></div><div class="line"><span class="keyword">var</span> re = <span class="regexp">/^$/</span>;</div><div class="line"></div><div class="line"><span class="keyword">var</span></div><div class="line">	i,</div><div class="line">	success = <span class="literal">true</span>,</div><div class="line">	should_pass = [<span class="string">"someone@gmail.com"</span>, <span class="string">"bill.gates@microsoft.com"</span>, <span class="string">"tom@voyager.org"</span>, <span class="string">"bob2015@163.com"</span>],</div><div class="line">	should_fail = [<span class="string">"test#gmail.com"</span>, <span class="string">"bill@microsoft"</span>, <span class="string">"bill%gates@ms.com"</span>, <span class="string">"@voyager.org"</span>];</div><div class="line"></div><div class="line"><span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; should_pass.length; i++) &#123;</div><div class="line">	<span class="keyword">if</span> (!re.test(should_pass[i])) &#123;</div><div class="line">		alert(<span class="string">"测试失败: "</span> + should_pass[i]);</div><div class="line">		success = <span class="literal">false</span>;</div><div class="line">		<span class="keyword">break</span>;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; should_fail.length; i++) &#123;</div><div class="line">	<span class="keyword">if</span> (re.test(should_fail[i])) &#123;</div><div class="line">		alert(<span class="string">"测试失败: "</span> + should_fail[i]);</div><div class="line">		success = <span class="literal">false</span>;</div><div class="line">		<span class="keyword">break</span>;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">if</span> (success) &#123;</div><div class="line">	alert(<span class="string">"测试通过!"</span>);</div><div class="line">&#125;</div><div class="line"><span class="comment">// 版本二可验证并提取出带名字的Email：</span></div><div class="line"><span class="meta">"use strict"</span>;</div><div class="line"></div><div class="line"><span class="keyword">var</span> re = <span class="regexp">/^$/</span>;</div><div class="line"></div><div class="line"><span class="keyword">var</span> r = re.exec(<span class="string">"&lt;Tom Paris&gt; tom@voyager.org"</span>);</div><div class="line"><span class="keyword">if</span> (r === <span class="literal">null</span> || r.toString() !== [<span class="string">"&lt;Tom Paris&gt; tom@voyager.org"</span>, <span class="string">"Tom Paris"</span>, <span class="string">"tom@voyager.org"</span>].toString()) &#123;</div><div class="line">	alert(<span class="string">"测试失败!"</span>);</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">	alert(<span class="string">"测试成功!"</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>写一个少于80字符的函数，判断字符串是不是回文：</p>
  <figure class="highlight processing"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">function isPalindrome(<span class="built_in">str</span>) &#123;</div><div class="line">	<span class="built_in">str</span> = <span class="built_in">str</span>.replace(/\W/g, <span class="string">""</span>).toLowerCase();</div><div class="line">	<span class="keyword">return</span> (<span class="built_in">str</span> === <span class="built_in">str</span>.<span class="built_in">split</span>(<span class="string">""</span>).<span class="built_in">reverse</span>().<span class="built_in">join</span>(<span class="string">""</span>));</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>

				</div>
				<!-- about -->
				
			</div>
			<!-- pagination -->
			
			<div class="comment-section">
	
	


</div>
		</div>
		
	</div>


		<footer>
			
<p>Powered by <a href="https://hexo.io">Hexo</a> with <a href="https://github.com/wayou/hexo-theme-material">Material</a> theme modified by <b> Huangzhike </b></p>
<p>&copy; 2016 <a href="https://huangzhike.github.io"><b> Huangzhike </b></a></p>
<a id="gotop" href="#" title="back to top"><i class="mdi-hardware-keyboard-arrow-up"></i></a>

		</footer>
	</div>
	<!-- <script src="/libs/bs/js/bootstrap.min.js"></script> -->
	<!-- <script src="//apps.bdimg.com/libs/bootstrap/3.3.4/js/bootstrap.min.js"></script> -->
	<script src="/js/highlight.js"></script> 
	<script>hljs.initHighlightingOnLoad();var timeEnd = new Date();console.log('耗时：' + (timeEnd - timeStart));</script>
	<!-- <script>(typeof $().modal == 'function')|| document.write('<script src="/libs/bs/js/bootstrap.min.js" type="text/javascript"><\/script>')</script>-->
	<!-- material design -->
	<!-- <script src="/libs/bs-material/js/ripples.min.js"></script> -->
	<!-- <script src="//apps.bdimg.com/libs/bootstrap-material/0.3.0/js/ripples.min.js"></script> -->
	<!-- <script src="/libs/bs-material/js/material.min.js"></script> -->
	<!-- <script src="//apps.bdimg.com/libs/bootstrap-material/0.3.0/js/material.min.js"></script>-->
	<!-- toc -->
	<!-- <script src="/libs/tocify/jquery-ui.min.js"></script> -->
	<!-- <script src="//apps.bdimg.com/libs/jqueryui/1.10.4/jquery-ui.min.js"></script> -->
	<!-- <script src="/libs/tocify/jquery.tocify.custom.js"></script> -->
	<!-- <script src="/js/main.js"></script> -->
</body>
</html>
