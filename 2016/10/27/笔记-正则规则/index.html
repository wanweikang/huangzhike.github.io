<!DOCTYPE HTML>
<html>
	<head><meta name="generator" content="Hexo 3.9.0">
		<meta charset="utf-8">
		<script src="/js/highlight.js"></script>
				<script>hljs.initHighlightingOnLoad();var timeStart = new Date();</script>
		
		<title>[笔记]-正则规则 | 一个放笔记的地方而已</title>
		
		<meta name="author" content="Huangzhike">
		
		
		<meta name="description" content="K.I.S.S">
		
		
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
		
		<meta property="og:title" content="[笔记]-正则规则">
		
		<meta property="og:site_name" content="一个放笔记的地方而已">
		
		
		<!-- favicon -->
		<link rel="icon" type="image/ico" href="/ok.ico" sizes="32x32">
 


		<meta name="msapplication-TileColor" content="#009688">
		<meta name="msapplication-TileImage" content="/mstile-144x144.ico">
		<meta name="theme-color" content="#009688">

    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Didact+Gothic"> 

		<!-- favicon end -->
		<!-- <link href="//ok.ico" rel="icon"> -->
		
		<!-- toc -->
		<!-- <link rel="stylesheet" href="/libs/tocify/jquery.tocify.css" media="screen" type="text/css"> -->
		<!-- <link rel="stylesheet" href="/libs/bs/css/bootstrap.min.css" media="screen" type="text/css"> -->
		<!--<link rel="stylesheet" href="//apps.bdimg.com/libs/bootstrap/3.3.4/css/bootstrap.min.css" media="screen" type="text/css">-->
		<!-- material design -->
		<!-- <link rel="stylesheet" href="/libs/bs-material/css/ripples.min.css" media="screen" type="text/css"> -->
		<!-- <link rel="stylesheet" href="//apps.bdimg.com/libs/bootstrap-material/0.3.0/css/ripples.min.css" media="screen" type="text/css"> -->
		<!-- <link rel="stylesheet" href="/libs/bs-material/css/material.min.css" media="screen" type="text/css"> -->
		<!--<link rel="stylesheet" href="//apps.bdimg.com/libs/bootstrap-material/0.3.0/css/material.min.css" media="screen" type="text/css"> -->
		<!--<link rel="stylesheet" href="/css/highlight.light.css" media="screen" type="text/css">-->
		<link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
		 
		 
		<!-- <script src="//apps.bdimg.com/libs/jquery/2.0.3/jquery.min.js"></script>-->
		<!-- <script>window.jQuery || document.write('<script src="/libs/jquery-3.1.1.slim.min.js" type="text/javascript"><\/script>')</script>-->
	</head>
</html>
<body>
	<nav class="navbar navbar-default">
	<div class="container">
		<div class="navbar-header">
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
				<span class="sr-only">菜单</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			<a class="navbar-brand" href="/">一个放笔记的地方而已</a>
           
		</div>
		<div id="navbar" class="collapse navbar-collapse">
			<ul class="nav navbar-nav navbar-right">
				
				<li>
					<a href="https://huangzhike.github.io/" title="">
						<i class="fa fa-home"></i>Index
					</a>
				</li>
				
				<li>
					<a href="https://huangzhike.github.io/archives" title="">
						<i class="fa fa-list"></i>Archives
					</a>
				</li>
				
				<li>
					<a href="https://github.com/huangzhike" title="">
						<i class="fa fa-github"></i>GitHub
					</a>
				</li>
				
			</ul>
		</div>
	</div>
</nav>

	<div class="container" >
		<div class="row">
	
		<div class="col-md-9 center-content">
			
			<div class="content">
				<!-- index -->
				
				<h2>[笔记]-正则规则</h2>
				
				<div>
					<div class="post-time">2016-10-27</div>
				</div>
				
				<div class="article-content">
				<p><strong>2016-11-20重新整理更新</strong></p>
<ul>
<li><p>正则表达式（regular expression）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var  reg = /xyz/i; // 基本采用字面量法</span><br><span class="line">var  reg = new  RegExp(&quot;xyz&quot;, &quot;i&quot;); // 构造函数</span><br></pre></td></tr></table></figure>
</li>
<li><p>字面量字符（literal characters）</p>
</li>
<li>普通字符包括：字母（abcABC），数字（123），下划线（_）</li>
<li>特殊字符（元字符，metacharacters）</li>
<li><p>转义符：需要转义：<code>(</code> <code>)</code> <code>[</code> <code>]</code> <code>{</code> <code>}</code> <code>^</code> <code>$</code> <code>*</code> <code>?</code> <code>\</code> <code>|</code> <code>+</code> <code>.</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var reg = /\^a/</span><br><span class="line">var reg = /\\m/; // 特殊字符要转义</span><br><span class="line"></span><br><span class="line">/google\.com/ // 匹配google.com</span><br><span class="line">/C:\\Windows/ // 匹配C:\Windows。</span><br><span class="line">/Windows\d+/ // 匹配Windows后跟1个或更多数字</span><br></pre></td></tr></table></figure>
</li>
<li><p>RegExp方法生成正则对象，转义要两个斜杠，因为字符串内部先转义一次。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/1\+1/.test(&quot;1+1&quot;); // true</span><br><span class="line">(new RegExp(&quot;1\\+1&quot;)).test(&quot;1+1&quot;); // true</span><br></pre></td></tr></table></figure>
</li>
<li><p>预定义特殊字符</p>
<ul>
<li><code>.</code>：单个字符，除换行<code>\n</code> 、行结束符（回车<code>\r</code>），相当于<code>[^\n\r]</code>，还包括行分隔符<code>\u2028</code>和段分隔符<code>\u2029</code>？</li>
<li><code>\w</code>：单词字符，任意字母、数字和下划线，相当于<code>[A-Za-z0-9_]</code>。</li>
<li><code>\W</code>：非单词字符，字母、数字和下划线以外的字符，相当于<code>[^A-Za-z0-9_]</code>。</li>
<li><code>\d</code>：数字，相当于<code>[0-9]</code>。</li>
<li><code>\D</code>：非数字字符，相当于<code>[^0-9]</code>。</li>
<li><code>\s</code>：空白字符，匹配空格，包括制表符、空格符、断行符等，相当于<code>[\t\n\v\f\r]</code>。</li>
<li><code>\S</code>：非空白字符，相当于<code>[^ \t\n\x0B\f\r]</code>。</li>
<li><code>\b</code>：单词边界。</li>
<li><code>\B</code>：非单词边界。</li>
<li><code>\0</code>：NUL 字符。</li>
<li><code>\n</code>：换行符。</li>
<li><code>\f</code>：换页符。</li>
<li><code>\r</code>：回车符。</li>
<li><code>\t</code>：制表符。</li>
<li><code>\v</code>：垂直制表符。</li>
<li><code>\xxx</code>：以八进制数xxx规定的字符。</li>
<li><code>\xdd</code>：以十六进制数dd规定的字符。</li>
<li><code>\uxxxx</code>：以十六进制数xxxx规定的Unicode字符。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">/c.t/; // 匹配c和t之间任一字符，只要在同一行，如cat、c2t、c-t，不匹配coot</span><br><span class="line"></span><br><span class="line">/00\d/ // 可匹配&quot;007&quot;</span><br><span class="line"></span><br><span class="line">/\d\d\d/ // 可匹配&quot;010&quot;</span><br><span class="line"></span><br><span class="line">/\w\w/ // 可匹配&quot;js&quot;</span><br><span class="line"></span><br><span class="line">/^js$/ // 整行匹配，只匹配&quot;js&quot;</span><br><span class="line"></span><br><span class="line">/js/ // 可匹配&quot;jsp&quot;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>分界</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// ^：行的开头，^\d：数字开头</span><br><span class="line">// $：行的结束，\d$：数字结束</span><br><span class="line">/^abc/; // 是否以abc开始</span><br><span class="line">/xyz$/; // 是否以xyz结尾</span><br><span class="line">/^test$/.test(&quot;test&quot;); // true</span><br><span class="line">/^test$/.test(&quot;test test&quot;); // false</span><br><span class="line"></span><br><span class="line">// \b：单词分隔符</span><br><span class="line">// \B：非单词分隔符</span><br><span class="line">/\bworld/.test(&quot;hello-world&quot;); // true</span><br><span class="line">/\bworld/.test(&quot;helloworld&quot;); // false</span><br><span class="line">/\Bworld/.test(&quot;hello-world&quot;); // false</span><br><span class="line">/\Bworld/.test(&quot;helloworld&quot;); // true</span><br></pre></td></tr></table></figure>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/\bhi\b/ // 精确查找hi</span><br><span class="line">/\bhi\b.*\bLucy\b/ // 先是单词hi，然后是任意个任意字符（除换行），最后是单词Lucy</span><br><span class="line">/\b\w&#123;6&#125;\b/ // 刚好6个字符的单词</span><br></pre></td></tr></table></figure>
</li>
<li><p>通常，正则表达式遇到换行符<code>\n</code>就会停止匹配。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var html = &quot;&lt;b&gt;Hello&lt;/b&gt;\n&lt;i&gt;world!&lt;/i&gt;&quot;;</span><br><span class="line">/.*/.exec(html)[0] // &quot;&lt;b&gt;Hello&lt;/b&gt;&quot;</span><br></pre></td></tr></table></figure>
</li>
<li><p>点字符<code>.</code>不匹配换行符，使用<code>\s</code>字符类（<code>[\S\s]</code>指代一切字符），就能包括换行符。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var html = &quot;&lt;b&gt;Hello&lt;/b&gt;\n&lt;i&gt;world!&lt;/i&gt;&quot;;</span><br><span class="line">/[\S\s]*/.exec(html)[0] // &quot;&lt;b&gt;Hello&lt;/b&gt;\n&lt;i&gt;world!&lt;/i&gt;&quot;</span><br></pre></td></tr></table></figure>
</li>
<li><p>另一种写法（非捕获组）：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/(?:.|\s)*/.exec(html)[0] // &quot;&lt;b&gt;Hello&lt;/b&gt;\n&lt;i&gt;world!&lt;/i&gt;&quot;</span><br></pre></td></tr></table></figure>
</li>
<li><p>字符集<code>[]</code>：字符类（class），只匹配其中一个就行。如<code>[xyz]</code> 表示x、y、z之中任一个匹配。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/[abc]/.test(&quot;apple&quot;) // true</span><br><span class="line"></span><br><span class="line">[…] // 在集合中的任一个字符</span><br><span class="line">[^…] // 除集合中的任一个字符</span><br></pre></td></tr></table></figure>
</li>
<li><p>脱字符<code>^</code>：如果方括号内第一个字符是[^]，表示除了字符类之中的字符，都可匹配。如[^xyz]表示除x、y、z之外。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/[^abc]/.test(&quot;bbc&quot;) // false</span><br></pre></td></tr></table></figure>
</li>
<li><p>如果方括号内只有[^]，表示匹配一切字符，包括换行符，而点号<code>.</code>不包括换行符。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&quot;abc efg\n123 456&quot;.match(/efg.*456/) // null</span><br><span class="line">&quot;abc efg\n123 456&quot;.match(/efg[^]*456/) // [&quot;efg\n123 456&quot;]</span><br></pre></td></tr></table></figure>
</li>
<li><p>注意，脱字符只有在[]第一个位置才有特殊含义。</p>
</li>
<li><p>连字符<code>-</code>：表示字符的连续范围。<code>[abc]</code>等于<code>[a-c]</code>，<code>[0123456789]</code>等于<code>[0-9]</code>，<code>[A-Z]</code>表示26个大写字母。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/a-z/.test(&quot;b&quot;) // false</span><br><span class="line">/[a-z]/.test(&quot;b&quot;) // true</span><br></pre></td></tr></table></figure>
</li>
<li><p>当连字号（dash）不在方括号中，只代表字面含义。只有在方括号中，才表示连续的字符序列。</p>
</li>
<li><p>以下都是合法的字符类简写。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[0-9.,]</span><br><span class="line">[0-9a-fA-F]</span><br><span class="line">[a-zA-Z0-9-]</span><br><span class="line">[1-31] // 不代表1到31，只代表1到3</span><br></pre></td></tr></table></figure>
</li>
<li><p>字符类的连字符必须在头尾两个字符中间，才有特殊含义，否则就是字面含义。<code>[-9]</code>表示连字符和9，而不是0到9。</p>
</li>
<li><p>连字符可以指定Unicode字符范围。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var str = &quot;\u0130\u0131\u0132&quot;;</span><br><span class="line">/[\u0128-\uFFFF]/.test(str) // true</span><br></pre></td></tr></table></figure>
</li>
<li><p>不要过分使用连字符，设定一个很大的范围。如<code>[A-z]</code>，表面上是选中从大写的A到小写的z之间52个字母，但在ASCII编码之中，大写字母与小写字母之间还有其他字符。</p>
</li>
<li><p>简单类：<code>[abDF45]</code>表示由abDF45六个字符组成的一个集合</p>
</li>
<li>范围类：<code>[a-z]</code>表示小写字母集合。<code>[A-Z]</code>表示大写字母集合。<code>[0-9]</code>表示数字集合。<code>[i-y]</code> 表示小写字母i到y的集合</li>
<li>负向类：<code>[^abc]</code> 表示不包含abc的任意字符集合，<code>[^ab89CD]</code>表示不包含ab89CD这六个字符的集合</li>
<li><p>组合类：<code>[a-zA-Z0-9]</code> 表示大小写字母以及数字的结合</p>
</li>
<li><p>量词</p>
<ul>
<li><code>?</code>：重复零次或一次 </li>
<li><code>*</code>：重复零次或多次(任意次) </li>
<li><code>+</code>：重复一次或多次（至少一次） </li>
<li><code>{n}</code>：重复n次 </li>
<li><code>{n,m}</code>：重复n~m次(中间不能有空格) </li>
<li><code>{n,}</code>：至少重复n次 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/lo&#123;2,5&#125;k/.test(&quot;looook&quot;) // true</span><br><span class="line">/t+est/.test(&quot;est&quot;) // false</span><br><span class="line">/t*est/.test(&quot;est&quot;) // true</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>贪婪匹配：<code>?</code> <code>+</code> <code>*</code> 三个量词符，默认贪婪模式，匹配尽可能多的字符。</p>
</li>
<li>如，对于字符串”aaaa”，<code>/a+/</code>匹配”aaaa”，不会匹配”aa”。</li>
<li><p>在量词符后加一个问号，改为非贪婪模式，<code>/a+?/</code>只匹配”a”。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&quot;aaaa&quot;.match(/a+?/) // [&quot;a&quot;]</span><br><span class="line">&quot;aaaa&quot;.match(/a+/) // [&quot;aaaa&quot;]</span><br></pre></td></tr></table></figure>
</li>
<li><p>匹配数字后的0：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/^(\d+)(0*)$/.exec(&quot;102300&quot;); // [&quot;102300&quot;, &quot;102300&quot;, &quot;&quot;] </span><br><span class="line">// \d+贪婪匹配，把0全部匹配了，0*只能匹配空字符串。</span><br><span class="line"></span><br><span class="line">/^(\d+?)(0*)$/.exec(&quot;102300&quot;); // [&quot;102300&quot;, &quot;1023&quot;, &quot;00&quot;]</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>\s+</code>是贪婪模式，尽可能多匹配空格，匹配次数较少，性能更高</p>
</li>
<li><p><code>\s</code>只表示一个空格，匹配次数多，性能相对低。</p>
</li>
<li><p>懒惰限定符</p>
<ul>
<li><code>*?</code>：重复任意次，但尽可能少重复 </li>
<li><code>+?</code>：重复1次或更多次，但尽可能少重复 </li>
<li><code>??</code>：重复0次或1次，但尽可能少重复 </li>
<li><code>{n,m}?</code>：重复n到m次，但尽可能少重复 </li>
<li><code>{n,}?</code>：重复n次以上，但尽可能少重复 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// 中国的电话号码</span><br><span class="line">/0\d\d-\d\d\d\d\d\d\d\d/ </span><br><span class="line">// 0开头，然后两个数字，然后一个连字号“-”，最后是8个数字</span><br><span class="line">// 等于</span><br><span class="line">/0\d&#123;2&#125;-\d&#123;8&#125;/</span><br><span class="line"></span><br><span class="line">// 以任意个空格隔开的带区号的电话号码</span><br><span class="line">/^\d&#123;3&#125;\s+\d&#123;3,8&#125;$/</span><br><span class="line"></span><br><span class="line">/^\d&#123;3&#125;\-\d&#123;3,8&#125;$/ </span><br><span class="line">// 匹配&quot;010-12345&quot;，无法匹配&quot;010 - 12345&quot;，因为有空格</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p><code>\s</code>匹配一个空格（包括Tab等空白符），\s+表示至少有一个空格，如” “，”\t\t”等；</p>
</li>
<li><p>分枝条件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">A|B // A或B</span><br><span class="line">Java[S|s]cript // 匹配&quot;JavaScript&quot;、&quot;Javascript&quot;</span><br></pre></td></tr></table></figure>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">/0\d&#123;2&#125;-\d&#123;8&#125;|0\d&#123;3&#125;-\d&#123;7&#125;/ // 010-12345678或0376-2233445</span><br><span class="line">/\(?0\d&#123;2&#125;\)?[- ]?\d&#123;8&#125;|0\d&#123;2&#125;[- ]?\d&#123;8&#125;/ </span><br><span class="line">// 3位区号的电话号码，区号可用小括号括起来，也可不用，区号与本地号间可用连字号或空格间隔，也可没间隔。</span><br><span class="line">/\d&#123;5&#125;-\d&#123;4&#125;|\d&#123;5&#125;/ // 5位数字，或连字号间隔的9位数字</span><br><span class="line">/\d&#123;5&#125;|\d&#123;5&#125;-\d&#123;4&#125;/ // 5位数字，或9位数字的前5位</span><br></pre></td></tr></table></figure>
</li>
<li><p>匹配分枝条件时，从左到右测试每个条件，如果满足了某个分枝，不再管其它条件。</p>
</li>
<li><p>重复单个字符：直接在字符后加上限定符；</p>
</li>
<li>重复多个字符，用小括号指定子表达式（分组）。</li>
<li><code>/(\d{1,3}\.){3}\d{1,3}/</code>简单的IP地址匹配表达式，它也匹配 256.300.888.999。</li>
<li><p>只能用冗长的分组，选择，字符类描述正确的IP地址：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/((2[0-4]\d|25[0-5]|[01]?\d\d?)\.)&#123;3&#125;(2[0-4]\d|25[0-5]|[01]?\d\d?)/</span><br><span class="line">// 关键是理解2[0-4]\d|25[0-5]|[01]?\d\d?</span><br></pre></td></tr></table></figure>
</li>
<li><p>分组：正则还可以提取子串，用<code>()</code>表示要提取的分组</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// 定义两个组</span><br><span class="line">var re = /^(\d&#123;3&#125;)-(\d&#123;3,8&#125;)$/;</span><br><span class="line">// 从匹配字符串中提取区号和本地号码</span><br><span class="line">re.exec(&quot;010-12345&quot;); // [&quot;010-12345&quot;, &quot;010&quot;, &quot;12345&quot;]</span><br><span class="line">re.exec(&quot;010 12345&quot;); // null</span><br></pre></td></tr></table></figure>
</li>
<li><p>如果正则中定义了组，可以在RegExp对象上用exec()方法提取子串。</p>
</li>
<li>exec()方法匹配成功后，返回一个Array，第一个元素是原始字符串，后面的字符串表示匹配成功的子串。</li>
<li><p>exec()方法匹配失败返回null。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// 识别合法时间</span><br><span class="line">var re = /^(0[0-9]|1[0-9]|2[0-3]|[0-9])\:(0[0-9]|1[0-9]|2[0-9]|3[0-9]|4[0-9]|5[0-9]|[0-9])\:(0[0-9]|1[0-9]|2[0-9]|3[0-9]|4[0-9]|5[0-9]|[0-9])$/;</span><br><span class="line">re.exec(&quot;19:05:30&quot;); // [&quot;19:05:30&quot;, &quot;19&quot;, &quot;05&quot;, &quot;30&quot;]</span><br></pre></td></tr></table></figure>
</li>
<li><p>有时正则也无法完全识别如”2-30”，”4-31”这样的非法日期：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var re = /^(0[1-9]|1[0-2]|[0-9])-(0[1-9]|1[0-9]|2[0-9]|3[0-1]|[0-9])$/;</span><br></pre></td></tr></table></figure>
</li>
<li><p>电子邮件识别：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/^[\w-]+(\.[\w-]+)*@[\w-]+(\.[\w-]+)+$/;</span><br></pre></td></tr></table></figure>
</li>
<li><p>[\w-]表示所有的字符，数字，下划线及减号，[\w-]+表示集合最少重复一次；</p>
</li>
<li>括号表示分组，修饰符星号 (*)表示重复零或多次。匹配任意字母，数字，下划线及中划线的集合，且至少重复一次。</li>
<li>@后部分，分组的修饰符 (+)，表示至少重复一次，后半部分至少有一个点号(.)，且点号后至少有一个字符，限制输入串中必须包含域名。</li>
<li><p>最后，脱字符(^)和美元符号($)限制，以…开始，且以…结束。</p>
</li>
<li><p>括号常见有三种作用：</p>
<ul>
<li><p>一，括号标记子表达式，区别其他表达式，很多命令行程序帮助命令，h和help一样：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">h(elp) // h必选，h后的elp可有可无</span><br></pre></td></tr></table></figure>
</li>
<li><p>二，括号分组，正则执行完后，匹配的文本按规则填入分组，如，某数据库的主键格式：四个字符表示省份，四个数字表示区号，然后两位字符表示区县，如yunn0871cg表示云南省昆明市呈贡县，分离出区号和区县的两位字符代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var pattern = /\w&#123;4&#125;(\d&#123;4&#125;)(\w&#123;2&#125;)/;</span><br><span class="line">var result = pattern.exec(&quot;yunn0871cg&quot;);</span><br><span class="line"></span><br><span class="line">&quot;city code = &quot;+result[1]+&quot;, county code = &quot;+result[2]; </span><br><span class="line">// city code = 0871, county code = cg</span><br></pre></td></tr></table></figure>
</li>
<li><p>如果匹配成功，正则的exec方法返回一个数组，数组的第一个元素表示整个串，第一个元素为第一个分组，第二个元素为第二个分组，以此类推。</p>
</li>
<li><p>三，括号辅助引用，同一表达式中，后边式子引用前边匹配的文本。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var str = &quot;hello, world&quot;;</span><br><span class="line">var str = &quot;fair enough&quot;;</span><br><span class="line">var pattern = /[&apos;&quot;][^&apos;&quot;]*[&apos;&quot;]/;</span><br><span class="line">// 如果输入：</span><br><span class="line">var str = &apos;hello, world&quot;;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>这就要引用，用斜杠加数字表示，<code>\1</code>表示第一个分组，<code>\2</code>表示第二个分组。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var pattern = /([&apos;&quot;])[^&apos;&quot;]*\1/;</span><br></pre></td></tr></table></figure>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// 单引号中不允许双引号，双引号中也不允许单引号</span><br><span class="line">var pattern = /([&apos;&quot;])[^\1]*\1/;</span><br></pre></td></tr></table></figure>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// 第一个括号捕获a，第二个括号捕获c</span><br><span class="line">&quot;abcabc&quot;.match(/(.)b(.)/); // [&quot;abc&quot;, &quot;a&quot;, &quot;c&quot;]</span><br></pre></td></tr></table></figure>
</li>
<li><p>组匹配，不宜用g修饰符，否则match方法不会捕获分组内容。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;abcabc&quot;.match(/(.)b(.)/g); // [&quot;abc&quot;, &quot;abc&quot;]</span><br></pre></td></tr></table></figure>
</li>
<li><p>\n引用括号匹配的内容，n是从1开始的自然数，表示对应的括号。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// \1表示第一个括号匹配内容a，\2表示第二个括号匹配内容b</span><br><span class="line">/(.)b(.)\1b\2/.test(&quot;abcabc&quot;) // true</span><br></pre></td></tr></table></figure>
</li>
<li><p>组匹配匹配网页标签。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/&lt;([^&gt;]+)&gt;[^&lt;]*&lt;\/\1&gt;/.exec(&quot;&lt;b&gt;bold&lt;/b&gt;&quot;)[1] // &quot;b&quot;</span><br></pre></td></tr></table></figure>
</li>
<li><p>捕获有属性的标签。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">var html = &quot;&lt;b class=&quot;hello&quot;&gt;Hello&lt;/b&gt;&lt;i&gt;world&lt;/i&gt;&quot;;</span><br><span class="line">var tag = /&lt;(\w+)([^&gt;]*)&gt;(.*)&lt;\/\1&gt;/g;</span><br><span class="line">var match = tag.exec(html);</span><br><span class="line">match[1] // &quot;b&quot;</span><br><span class="line">match[2] // &quot;class=&quot;hello&quot;&quot;</span><br><span class="line">match[3] // &quot;Hello&quot;</span><br><span class="line"></span><br><span class="line">var match = tag.exec(html);</span><br><span class="line">match[1] // &quot;i&quot;</span><br><span class="line">match[2] // &quot;&quot;</span><br><span class="line">match[3] // &quot;world&quot;</span><br></pre></td></tr></table></figure>
</li>
<li><p>非捕获组（Non-capturing group）：(?:x)，不返回该组匹配的内容，这个括号不计入匹配结果。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// 第一个括号是非捕获组，返回的第一个被捕获的组是第二个括号匹配的c</span><br><span class="line">var m = &quot;abc&quot;.match(/(?:.)b(.)/);</span><br><span class="line">m[1] // &quot;c&quot;</span><br></pre></td></tr></table></figure>
</li>
<li><p>分解网址。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var url = /(http|ftp):\/\/([^/\r\n]+)(\/[^\r\n]*)/;</span><br><span class="line">url.exec(&quot;http://google.com/&quot;); // [&quot;http://google.com/&quot;, &quot;http&quot;, &quot;google.com&quot;, &quot;/&quot;]</span><br><span class="line">// 正常匹配，第一个括号返回网络协议http</span><br><span class="line"></span><br><span class="line">var url = /(?:http|ftp):\/\/([^/\r\n]+)(\/[^\r\n]*)/;</span><br><span class="line">url.exec(&quot;http://google.com/&quot;); // [&quot;http://google.com/&quot;, &quot;google.com&quot;, &quot;/&quot;]</span><br><span class="line">// 非捕获匹配，返回结果不包括http</span><br></pre></td></tr></table></figure>
</li>
<li><p>先行断言（Positive look-ahead）：x(?=y)，x在y前面才匹配，y不计入返回结果。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&quot;abc&quot;.match(/b(?=c)/); // [&quot;b&quot;]</span><br><span class="line">// b在c前所以匹配，括号对应的c不会返回</span><br></pre></td></tr></table></figure>
</li>
<li><p>后行断言（Negative look-ahead）：x(?!y)，x不在y前面才匹配，y不计入返回结果。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&quot;abd&quot;.match(/b(?!c)/); // [&quot;b&quot;]</span><br><span class="line">// b不在c前所以匹配，括号对应的d不会返回</span><br></pre></td></tr></table></figure>
</li>
<li><p>修饰符（modifier）</p>
</li>
<li><p>g修饰符：global，全局匹配。默认情况下，第一次匹配成功后就停止。global将匹配全部符合的结果，主要用于搜索和替换。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">var r = /test/g;</span><br><span class="line">// 等价于</span><br><span class="line">var r = new RegExp(&quot;test&quot;, &quot;g&quot;); </span><br><span class="line"></span><br><span class="line">var  reg = /b/;</span><br><span class="line">// 不加g修饰符，每次匹配都从字符串头部开始</span><br><span class="line">reg.test(&quot;abba&quot;); // true</span><br><span class="line">reg.test(&quot;abba&quot;); // true</span><br><span class="line">reg.test(&quot;abba&quot;); // true</span><br><span class="line"></span><br><span class="line">var  reg = /b/g;</span><br><span class="line">// 加g修饰符，每次匹配都从上一次匹配成功处开始</span><br><span class="line">reg.test(&quot;abba&quot;); // true</span><br><span class="line">reg.test(&quot;abba&quot;); // true</span><br><span class="line">reg.test(&quot;abba&quot;); // false</span><br></pre></td></tr></table></figure>
<ul>
<li><p>全局匹配可多次执行exec()搜索字符串。指定g后，每次exec()，会更新lastIndex属性，表示上次匹配到的最后索引：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">var s = &quot;JavaScript, VBScript, JScript and ECMAScript&quot;;</span><br><span class="line">var re = /[a-zA-Z]+Script/g;</span><br><span class="line">// 全局匹配:</span><br><span class="line">re.exec(s); // [&quot;JavaScript&quot;]</span><br><span class="line">re.lastIndex; // 10</span><br><span class="line"></span><br><span class="line">re.exec(s); // [&quot;VBScript&quot;]</span><br><span class="line">re.lastIndex; // 20</span><br><span class="line"></span><br><span class="line">re.exec(s); // [&quot;JScript&quot;]</span><br><span class="line">re.lastIndex; // 29</span><br><span class="line"></span><br><span class="line">re.exec(s); // [&quot;ECMAScript&quot;]</span><br><span class="line">re.lastIndex; // 44</span><br><span class="line"></span><br><span class="line">re.exec(s); // null，直到结束仍没匹配到</span><br></pre></td></tr></table></figure>
</li>
<li><p>全局匹配类似搜索，因此不能使用<code>/^...$/</code>，那样只会最多匹配一次。</p>
</li>
</ul>
</li>
<li><p>i修饰符：ignorecase，忽略大小写 </p>
</li>
<li><p>m修饰符：multiline，多行模式，到达一行文本末还继续查找下一行。</p>
<ul>
<li>字符串的头部或尾部可能会有换行符。正则默认将换行符算入字符串的开头或结尾。</li>
<li>加上m修饰符后会忽略字符串头部或尾部的换行符，即<code>^</code>和<code>$</code>会忽略换行符。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// 不加m修饰符，匹配失败，因为结尾不是world</span><br><span class="line">/world$/.test(&quot;hello world\n&quot;) // false</span><br><span class="line">// 加上后，换行符被忽略，匹配成功</span><br><span class="line">/world$/m.test(&quot;hello world\n&quot;) // true</span><br><span class="line"></span><br><span class="line">/^javascript/.test(&quot;java\njavascript&quot;); // false</span><br><span class="line">/^javascript/m.test(&quot;java\njavascript&quot;); // true</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>修饰符多个一起用：<code>var reg = /test/ig;</code>。</p>
</li>
</ul>

				</div>
				<!-- about -->
				
			</div>
			<!-- pagination -->
			
			<div class="comment-section">
	
	


</div>
		</div>
		
	</div>


		<footer>
			 
<a id="gotop" href="#" title="back to top"><i class="mdi-hardware-keyboard-arrow-up"></i></a>

		</footer>
	</div>
	<!-- <script src="/libs/bs/js/bootstrap.min.js"></script> -->
	<!-- <script src="//apps.bdimg.com/libs/bootstrap/3.3.4/js/bootstrap.min.js"></script> -->

	<script>var timeEnd = new Date();console.log('耗时：' + (timeEnd - timeStart));</script>
	<!-- <script>(typeof $().modal == 'function')|| document.write('<script src="/libs/bs/js/bootstrap.min.js" type="text/javascript"><\/script>')</script>-->
	<!-- material design -->
	<!-- <script src="/libs/bs-material/js/ripples.min.js"></script> -->
	<!-- <script src="//apps.bdimg.com/libs/bootstrap-material/0.3.0/js/ripples.min.js"></script> -->
	<!-- <script src="/libs/bs-material/js/material.min.js"></script> -->
	<!-- <script src="//apps.bdimg.com/libs/bootstrap-material/0.3.0/js/material.min.js"></script>-->
	<!-- toc -->
	<!-- <script src="/libs/tocify/jquery-ui.min.js"></script> -->
	<!-- <script src="//apps.bdimg.com/libs/jqueryui/1.10.4/jquery-ui.min.js"></script> -->
	<!-- <script src="/libs/tocify/jquery.tocify.custom.js"></script> -->
	<!-- <script src="/js/main.js"></script> -->
</body>
</html>
