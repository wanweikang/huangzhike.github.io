<!DOCTYPE HTML>
<html>
	<head><meta name="generator" content="Hexo 3.9.0">
		<meta charset="utf-8">
		<script src="/js/highlight.js"></script>
				<script>hljs.initHighlightingOnLoad();var timeStart = new Date();</script>
		
		<title>[笔记]-数组 | 学而时习之</title>
		
		<meta name="author" content="Huangzhike">
		
		
		<meta name="description" content="K.I.S.S">
		
		
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
		
		<meta property="og:title" content="[笔记]-数组">
		
		<meta property="og:site_name" content="学而时习之">
		
		
		<!-- favicon -->
		<link rel="icon" type="image/ico" href="/ok.ico" sizes="32x32">
 


		<meta name="msapplication-TileColor" content="#009688">
		<meta name="msapplication-TileImage" content="/mstile-144x144.ico">
		<meta name="theme-color" content="#009688">

    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Didact+Gothic"> 

		<!-- favicon end -->
		<!-- <link href="//ok.ico" rel="icon"> -->
		
		<!-- toc -->
		<!-- <link rel="stylesheet" href="/libs/tocify/jquery.tocify.css" media="screen" type="text/css"> -->
		<!-- <link rel="stylesheet" href="/libs/bs/css/bootstrap.min.css" media="screen" type="text/css"> -->
		<!--<link rel="stylesheet" href="//apps.bdimg.com/libs/bootstrap/3.3.4/css/bootstrap.min.css" media="screen" type="text/css">-->
		<!-- material design -->
		<!-- <link rel="stylesheet" href="/libs/bs-material/css/ripples.min.css" media="screen" type="text/css"> -->
		<!-- <link rel="stylesheet" href="//apps.bdimg.com/libs/bootstrap-material/0.3.0/css/ripples.min.css" media="screen" type="text/css"> -->
		<!-- <link rel="stylesheet" href="/libs/bs-material/css/material.min.css" media="screen" type="text/css"> -->
		<!--<link rel="stylesheet" href="//apps.bdimg.com/libs/bootstrap-material/0.3.0/css/material.min.css" media="screen" type="text/css"> -->
		<!--<link rel="stylesheet" href="/css/highlight.light.css" media="screen" type="text/css">-->
		<link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
		 
		 
		<!-- <script src="//apps.bdimg.com/libs/jquery/2.0.3/jquery.min.js"></script>-->
		<!-- <script>window.jQuery || document.write('<script src="/libs/jquery-3.1.1.slim.min.js" type="text/javascript"><\/script>')</script>-->
	</head>
</html>
<body>
	<nav class="navbar navbar-default">
	<div class="container">
		<div class="navbar-header">
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
				<span class="sr-only">菜单</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			<a class="navbar-brand" href="/">学而时习之</a>
           
		</div>
		<div id="navbar" class="collapse navbar-collapse">
			<ul class="nav navbar-nav navbar-right">
				
				<li>
					<a href="https://huangzhike.github.io/archives" title="">
						<i class="fa fa-list"></i>Archives
					</a>
				</li>
				
				<li>
					<a href="https://github.com/huangzhike" title="">
						<i class="fa fa-github"></i>GitHub
					</a>
				</li>
				
			</ul>
		</div>
	</div>
</nav>

	<div class="container" >
		<div class="row">
	
		<div class="col-md-9 center-content">
			
			<div class="content">
				<!-- index -->
				
				<h2>[笔记]-数组</h2>
				
				<div>
					<div class="post-time">2016-10-28</div>
				</div>
				
				<div class="article-content">
				<p><strong>2016-11-19重新整理</strong></p>
<p>类数组对象（array-like object），可使用length属性，但不是数组，无法使用一些数组方法。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = &#123;</span><br><span class="line">    <span class="number">0</span>:<span class="string">"a"</span>,</span><br><span class="line">    <span class="number">1</span>:<span class="string">"b"</span>,</span><br><span class="line">    length:<span class="number">2</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">a[<span class="number">0</span>] <span class="comment">// "a"</span></span><br><span class="line">a.length <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>
<p>典型类数组对象是函数arguments对象，以及DOM元素集，还有字符串。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"abc"</span>[<span class="number">1</span>] <span class="comment">// "b"</span></span><br><span class="line"><span class="string">"abc"</span>.length <span class="comment">// 3</span></span><br></pre></td></tr></table></figure>
<p><code>Array.prototype.slice.call(arguments);</code>将类数组对象变成真正的数组。</p>
<p>遍历类数组对象，用for循环，也可用数组的forEach方法。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// for循环</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">logArgs</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;<span class="built_in">arguments</span>.length; i++) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(i+<span class="string">". "</span>+<span class="built_in">arguments</span>[i]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// forEach方法</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">logArgs</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">Array</span>.prototype.forEach.call(<span class="built_in">arguments</span>, <span class="function"><span class="keyword">function</span> (<span class="params">elem, i</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(i+<span class="string">". "</span>+elem);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>数组[]访问期望的是数值下标，索引，如0和42：</p>
<p>数组也是对象，虽然每个下标都是整数，仍可给数组添加属性：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myArray = [ <span class="string">"foo"</span>, <span class="number">42</span> ];</span><br><span class="line">myArray.bar = <span class="string">"bar"</span> ; </span><br><span class="line">myArray.length; <span class="comment">// 2，数组的length值未变化</span></span><br></pre></td></tr></table></figure>
<p>向数组添加属性，但属性名像数字，会变成数值下标，修改数组内容而不是添加属性。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">myArray[<span class="string">"3"</span>] = <span class="string">"A"</span>;</span><br><span class="line">myArray.length; <span class="comment">// 3 </span></span><br><span class="line">myArray[<span class="number">3</span>]; <span class="comment">// "A"</span></span><br></pre></td></tr></table></figure>
<p>本质上，数组也属于对象，是字典结构（dictionary）的变种。</p>
<p>数组的特殊性在，键默认按次序排列的整数（0，1，…）。</p>
<p>对象以字符串来识别键名，非字符串的键名会被转为字符串，所以使用数值或字符串作为键名，都能读取数组。</p>
<p>赋值时也成立，如果一个值可以被转换为整数，则以该值为键名，等于以对应的整数为键名。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>];</span><br><span class="line">arr[<span class="string">"0"</span>] <span class="comment">// "a"</span></span><br><span class="line">arr[<span class="number">0</span>] <span class="comment">// "a"</span></span><br></pre></td></tr></table></figure>
<p>对象有两种读取成员的方法：“点”（object.key）和方括号（object[key]）。</p>
<p>但对于数字的键名，不能用点，arr.0不合法，因为不能作为标识符（identifier）。</p>
<p>数组成员只能用方括号 arr[0]表示（方括号是运算符，可接受数值）。</p>
<p>创建数组用Array构造函数（new可省略）或用数组字面量表示法。</p>
<p>Array的构造函数在处理参数时模棱两可，推荐使用数组的字面语法[]创建数组。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Array</span>(<span class="string">"3"</span>) <span class="comment">// ["3"]</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>); <span class="comment">// [3, 4, 5] </span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">3</span>) <span class="comment">// []，数组长度为 3</span></span><br></pre></td></tr></table></figure>
<p>避免for循环循环字符串。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Array</span>(count + <span class="number">1</span>).join(stringToRepeat);</span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">3</span>).join(<span class="string">"#"</span>) <span class="comment">// ##</span></span><br></pre></td></tr></table></figure>
<p>数组的length属性不是只读的。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">colors[colors.length] = <span class="string">"black"</span>; <span class="comment">// 数组最后一项永远是[length-1]</span></span><br></pre></td></tr></table></figure>
<p>JavaScript的Array可以包含任意数据类型，并通过索引来访问每个元素。</p>
<p>取得Array的长度，直接访问length属性：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3.14</span>, <span class="string">"Hello"</span>, <span class="literal">null</span>, <span class="literal">true</span>];</span><br><span class="line">arr.length; <span class="comment">// 6</span></span><br></pre></td></tr></table></figure>
<p>直接给Array的length赋一个新的值会导致Array大小的变化：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line">arr.length = <span class="number">6</span>;</span><br><span class="line">arr; <span class="comment">// [1, 2, 3, undefined, undefined, undefined]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line">arr[<span class="number">5</span>] = <span class="string">"x"</span>;</span><br><span class="line">arr; <span class="comment">// [1, 2, 3, undefined, undefined, "x"]</span></span><br></pre></td></tr></table></figure>
<p>数组中的每个元素都是一个对象，但不可用delete删除。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> array = [<span class="string">"one"</span>, <span class="string">"two"</span>, <span class="string">"three"</span>, <span class="string">"four"</span>];</span><br><span class="line"><span class="keyword">delete</span> array[<span class="number">2</span>];</span><br><span class="line">array; <span class="comment">//  [one, two, undefined, four]</span></span><br><span class="line">array.length == <span class="number">4</span> <span class="comment">// delete，只将数组元素删掉，长度没变</span></span><br></pre></td></tr></table></figure>
<p>Array.isArray()方法用于最终确定某个值到底是不是数组。</p>
<p>因为在不同iframe中创建的Array不共享prototype，所以instanceof无法检测。</p>
<p>检查某个键是否存在的运算符in，适用于对象，也适用于数组。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2</span> <span class="keyword">in</span> [ <span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span> ] <span class="comment">// true</span></span><br><span class="line"><span class="string">"2"</span> <span class="keyword">in</span> [ <span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span> ] <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<p>混淆indexOf和in操作符：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">5</span>]</span><br><span class="line"><span class="number">1</span> <span class="keyword">in</span> a <span class="comment">// true, but because of the 2</span></span><br><span class="line"><span class="number">5</span> <span class="keyword">in</span> a <span class="comment">// false</span></span><br><span class="line"><span class="number">1</span> <span class="keyword">in</span> a === !!a[<span class="number">1</span>] <span class="comment">// true （in操作符是检索对象的键而非值。性能上比indexOf快得多）</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> array = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> item <span class="keyword">in</span> array) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(array[item]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>扩展了内置对象Array：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.prototype.useless = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"><span class="comment">// 重复执行上边的代码，输出：</span></span><br><span class="line"><span class="comment">// 1，2，3，4，function() &#123;&#125;</span></span><br></pre></td></tr></table></figure>
<p>虽然数组是对象，不建议用for in遍历数组。</p>
<p><code>for in</code>循环会枚举原型链上的所有属性，唯一方式是用hasOwnProperty，因此比普通的for循环慢好多倍。</p>
<p>推荐使用<code>for</code>循环。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> list = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, ...... <span class="number">100000000</span>];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>, len = list.length; i &lt; len; i++) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(list[i]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 通过 len = list.length 缓存数组长度</span></span><br><span class="line"><span class="comment">// or</span></span><br><span class="line"><span class="keyword">var</span> i = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span> (i&lt; list.length) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(list[i]);</span><br><span class="line">    i++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// or 逆向遍历</span></span><br><span class="line"><span class="keyword">var</span> len = list.length;</span><br><span class="line"><span class="keyword">while</span> (len--) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(list[len]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>数组是引用类型，保存数组的变量，保存数组内存地址：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [<span class="number">1</span>];</span><br><span class="line"><span class="keyword">var</span> b = a;</span><br><span class="line">b[<span class="number">0</span>] = <span class="number">2</span>;</span><br><span class="line">a <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>
<p>引用类型比较的是地址。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [<span class="number">1</span>];</span><br><span class="line"><span class="keyword">var</span> b = [<span class="number">1</span>];</span><br><span class="line">a === b; <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
<p>如果a存储的是基本类型，b=a把a的值赋一份给b。</p>
<p>如果a存储的是引用类型，b指向a指向的位置，a、b指向同一个地方。</p>
<p>Map对象是一组键值对的结构，具有极快的查找速度。</p>
<p>假设根据名字查找成绩，如果用Array实现，需要两个Array：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> names = [<span class="string">"Michael"</span>, <span class="string">"Bob"</span>, <span class="string">"Tracy"</span>];</span><br><span class="line"><span class="keyword">var</span> scores = [<span class="number">95</span>, <span class="number">75</span>, <span class="number">85</span>];</span><br></pre></td></tr></table></figure>
<p>先要在names中找到对应的位置，再从scores取出对应的成绩，Array越长，耗时越长。</p>
<p>用Map实现，只需要“名字”-“成绩”对照表，直接根据名字查找成绩，无论表多大，查找速度都不会变慢。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> m = <span class="keyword">new</span> <span class="built_in">Map</span>([[<span class="string">"Michael"</span>, <span class="number">95</span>], [<span class="string">"Bob"</span>, <span class="number">75</span>], [<span class="string">"Tracy"</span>, <span class="number">85</span>]]);</span><br><span class="line">m.get(<span class="string">"Michael"</span>); <span class="comment">// 95</span></span><br></pre></td></tr></table></figure>
<p>初始化Map需要一个二维数组，或直接初始化一个空Map：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> m = <span class="keyword">new</span> <span class="built_in">Map</span>(); <span class="comment">// 空Map</span></span><br><span class="line">m.set(<span class="string">"Adam"</span>, <span class="number">67</span>); <span class="comment">// 添加新的key-value</span></span><br><span class="line">m.has(<span class="string">"Adam"</span>); <span class="comment">// 是否存在key "Adam": true</span></span><br><span class="line">m.get(<span class="string">"Adam"</span>); <span class="comment">// 67</span></span><br><span class="line">m.delete(<span class="string">"Adam"</span>); <span class="comment">// 删除key "Adam"</span></span><br><span class="line">m.get(<span class="string">"Adam"</span>); <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>
<p>一个key对应一个value，后面覆盖前面：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> m = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">m.set(<span class="string">"Adam"</span>, <span class="number">67</span>);</span><br><span class="line">m.set(<span class="string">"Adam"</span>, <span class="number">88</span>);</span><br><span class="line">m.get(<span class="string">"Adam"</span>); <span class="comment">// 88</span></span><br></pre></td></tr></table></figure>
<hr>
<p>扩展内置对象Array，所有数组实例都有remove：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.prototype.remove = <span class="function"><span class="keyword">function</span>(<span class="params">from, to</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> rest = <span class="keyword">this</span>.slice((to || <span class="keyword">from</span>) + <span class="number">1</span> || <span class="keyword">this</span>.length);</span><br><span class="line">    <span class="keyword">this</span>.length = <span class="keyword">from</span> &lt; <span class="number">0</span> ? <span class="keyword">this</span>.length + <span class="keyword">from</span> : <span class="keyword">from</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.push.apply(<span class="keyword">this</span>, rest);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>给内置的Array添加静态方法，不影响原型链：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.remove = <span class="function"><span class="keyword">function</span>(<span class="params">array, from, to</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> rest = array.slice((to || <span class="keyword">from</span>) + <span class="number">1</span> || array.length);</span><br><span class="line">    array.length = <span class="keyword">from</span> &lt; <span class="number">0</span> ? array.length + <span class="keyword">from</span> : <span class="keyword">from</span>;</span><br><span class="line">    <span class="keyword">return</span> array.push.apply(array, rest);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>Array对象的静态方法：Array.isArray方法判断是否为数组。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line"><span class="keyword">typeof</span> a <span class="comment">// "object"</span></span><br><span class="line"><span class="built_in">Array</span>.isArray(a) <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<p>Array实例的方法：数组实例才能使用。如果只想单纯调用，可写成<code>[].method.call(调用对象，参数)</code>形式，或<code>Array.prototype.method.call(调用对象，参数)</code>形式。</p>
<p>valueOf方法返回数组本身。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>].valueOf() <span class="comment">// [1,2,3]</span></span><br></pre></td></tr></table></figure>
<p>toString方法返回数组的字符串形式。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]].toString() <span class="comment">// "1, 2, 3, 4, 5, 6"</span></span><br></pre></td></tr></table></figure>
<ul>
<li>push()向数组末尾添加一个或多个元素（改变原数组），并返回新的长度。</li>
<li>pop()删除数组最后一个元素（改变原数组），并返回被删除元素的值，如数组为空，返回undefined。</li>
<li>unshift()向数组开头添加一个或多个元素（改变原数组），并返回新的长度。</li>
<li>shift()删除数组第一个元素（改变原数组），并返回被删除元素的值。如数组为空，返回undefined。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line">arr.push(<span class="string">"A"</span>, <span class="string">"B"</span>); <span class="comment">// 4</span></span><br><span class="line">arr.push([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]); <span class="comment">// 4</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = &#123;<span class="attr">a</span>: <span class="number">1</span>&#125;;</span><br><span class="line"></span><br><span class="line">[].push.call(a, <span class="number">2</span>);</span><br><span class="line">a <span class="comment">// &#123;a:1, 0:2, length: 1&#125;</span></span><br><span class="line"></span><br><span class="line">[].push.call(a, [<span class="number">3</span>]);</span><br><span class="line">a <span class="comment">// &#123;a:1, 0:2, 1:[3], length: 2&#125;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">2</span>].pop(); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>].shift() <span class="comment">// "a"</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> list = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], item;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (item = list.shift()) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(item);</span><br><span class="line">&#125;</span><br><span class="line">list; <span class="comment">// []</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>];</span><br><span class="line"></span><br><span class="line">a.unshift(<span class="string">"x"</span>); <span class="comment">// 4</span></span><br><span class="line">a; <span class="comment">// ["x", "a", "b", "c"]</span></span><br></pre></td></tr></table></figure>
<p>sort方法对数组元素默认按照字典顺序排序。返回改变后的数组。改变原数组。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">"B"</span>, <span class="string">"C"</span>, <span class="string">"A"</span>].sort(); <span class="comment">// ["A", "B", "C"]</span></span><br></pre></td></tr></table></figure>
<p>可以传入一个函数作为参数，让sort方法按大小排序，该函数又接受两个参数，表示比较的两个元素。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">arr.sort(<span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123;	</span><br><span class="line">    <span class="keyword">if</span> (a &lt; b) &#123; <span class="comment">// a在b前，返回负数</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (a &gt; b) &#123; <span class="comment">// a在b后，返回正数</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (a == b) &#123; <span class="comment">// a和b不区分大小，返回0，a在b前</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">10111</span>, <span class="number">1101</span>, <span class="number">111</span>].sort(<span class="function"><span class="keyword">function</span> (<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a - b;</span><br><span class="line">&#125;); </span><br><span class="line"><span class="comment">// [111, 1101, 10111]</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">"张三"</span>, <span class="attr">age</span>: <span class="number">30</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">"李四"</span>, <span class="attr">age</span>: <span class="number">24</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">"王五"</span>, <span class="attr">age</span>: <span class="number">28</span> &#125;</span><br><span class="line">].sort(<span class="function"><span class="keyword">function</span>(<span class="params">o1, o2</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> o1.age - o2.age;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// [</span></span><br><span class="line"><span class="comment">//     &#123; name: "李四", age: 24 &#125;,</span></span><br><span class="line"><span class="comment">//     &#123; name: "王五", age: 28 &#125;,</span></span><br><span class="line"><span class="comment">//     &#123; name: "张三", age: 30 &#125;</span></span><br><span class="line"><span class="comment">// ]</span></span><br></pre></td></tr></table></figure>
<p>reverse方法颠倒数组中元素的顺序，返回改变后的数组。修改原数组。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>];</span><br><span class="line"></span><br><span class="line">a.reverse(); <span class="comment">// ["c", "b", "a"] </span></span><br><span class="line">a; <span class="comment">// ["c", "b", "a"]</span></span><br></pre></td></tr></table></figure>
<p>concat方法将新数组成员，添加到原数组尾部，返回新数组（不修改原数组），用于连接多个数组。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">"A"</span>, <span class="string">"B"</span>, <span class="string">"C"</span>];</span><br><span class="line"><span class="keyword">var</span> added = arr.concat([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]);</span><br><span class="line">added; <span class="comment">// ["A", "B", "C", 1, 2, 3]</span></span><br><span class="line">arr; <span class="comment">// ["A", "B", "C"]</span></span><br></pre></td></tr></table></figure>
<p>concat方法接收任意个元素和数组，并自动把数组拆开，全部添加到新数组里：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">"A"</span>, <span class="string">"B"</span>, <span class="string">"C"</span>].concat(<span class="number">1</span>, <span class="number">2</span>, [<span class="number">3</span>, <span class="number">4</span>]); <span class="comment">// ["A", "B", "C", 1, 2, 3, 4] </span></span><br><span class="line">[<span class="string">"hello"</span>].concat([<span class="string">"world"</span>]); <span class="comment">// ["hello", "world"]</span></span><br></pre></td></tr></table></figure>
<p>如果不提供参数，concat方法返回当前数组的浅拷贝。</p>
<p>所谓“浅拷贝”，如果数组成员包括复合类型的值（如对象），新数组拷贝的是引用。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = &#123;<span class="attr">a</span>: <span class="number">1</span>&#125;;</span><br><span class="line"><span class="keyword">var</span> oldArr = [o];</span><br><span class="line"><span class="keyword">var</span> newArr = oldArr.concat(); <span class="comment">// 原数组包含对象，concat生成的新数组包含这个对象的引用</span></span><br><span class="line"></span><br><span class="line">o.a = <span class="number">2</span>;</span><br><span class="line">newArr[<span class="number">0</span>].a; <span class="comment">// 2，改变原对象以后，新数组跟着改变</span></span><br></pre></td></tr></table></figure>
<p>不管concat有没有参数，只要原数组的成员中包含对象，总是返回该对象的引用。</p>
<p>concat也可将对象合并为数组。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[].concat.call(&#123; <span class="attr">a</span>: <span class="number">1</span> &#125;, [<span class="number">2</span>]); <span class="comment">// [&#123;a:1&#125;, 2]</span></span><br><span class="line">[<span class="number">2</span>].concat(&#123;<span class="attr">a</span>:<span class="number">1</span>&#125;); <span class="comment">// [2, &#123;a:1&#125;]</span></span><br></pre></td></tr></table></figure>
<p>join方法以参数作为分隔符，将所有数组成员组成一个字符串返回（不改变原数组）。</p>
<p>如果不提供参数，默认用逗号分隔。</p>
<p>如果Array的元素不是字符串，自动转换为字符串后再连接。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">"A"</span>, <span class="string">"B"</span>, <span class="string">"C"</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line">arr.join(<span class="string">"-"</span>); <span class="comment">// "A-B-C-1-2-3"</span></span><br></pre></td></tr></table></figure>
<p>通过函数的call方法，join方法也可以用于字符串。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.prototype.join.call(<span class="string">"hello"</span>, <span class="string">"-"</span>); <span class="comment">// "h-e-l-l-o"</span></span><br></pre></td></tr></table></figure>
<p>区分join和concat</p>
<ul>
<li>join(separator)以separator作为分隔符拼接数组元素，并返回字符串，如果没有separator，默认逗号。</li>
<li>concat创建一个新数组，作为原数组的浅拷贝。</li>
</ul>
<p>浅拷贝意味着新数组和原数组保持相同的对象引用。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = &#123; <span class="attr">foo</span>: <span class="string">"bar"</span> &#125;;</span><br><span class="line"><span class="keyword">var</span> b = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, a];</span><br><span class="line"><span class="keyword">var</span> c = b.concat();</span><br><span class="line">b === c; <span class="comment">// false</span></span><br><span class="line">b[<span class="number">3</span>] === a &amp;&amp; c[<span class="number">3</span>] === a; <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<p>补充：浅拷贝与深拷贝</p>
<p>浅拷贝</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p = &#123;</span><br><span class="line">    name: <span class="string">"p"</span>,</span><br><span class="line">    love: &#123;</span><br><span class="line">        go: <span class="string">"shopping"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    arr: [<span class="string">"a"</span>, <span class="string">"b"</span>]</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> c = &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">extend</span>(<span class="params">p, c</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> prop <span class="keyword">in</span> p) &#123;</span><br><span class="line">        c[prop] = p[prop];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">extend(p, c);</span><br><span class="line"></span><br><span class="line">c.name = <span class="string">"c"</span>;</span><br><span class="line">p.name; <span class="comment">// "p"</span></span><br><span class="line"></span><br><span class="line">c.love.go; <span class="comment">// "shoping"</span></span><br><span class="line">c.love.go = <span class="string">"what"</span>;</span><br><span class="line">p.love.go; <span class="comment">// "what" </span></span><br><span class="line"><span class="comment">// love是一个对象，p，c都是引用，更改是love对象，p，c变化共享）</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 数组在for in循环中索引当做属性名</span></span><br><span class="line">c.arr[<span class="number">0</span>]; <span class="comment">// "a"</span></span><br><span class="line">c.arr[<span class="number">0</span>]; = <span class="string">"n"</span>;</span><br><span class="line">p.arr[<span class="number">0</span>]; <span class="comment">// "n"</span></span><br></pre></td></tr></table></figure>
<p>深拷贝</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">extendDeep</span>(<span class="params">p, c</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> prop <span class="keyword">in</span> p) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> p[prop] === <span class="string">"object"</span>) &#123;</span><br><span class="line">            c[prop] = p[prop].constructor === <span class="built_in">Array</span>? []: &#123;&#125;;</span><br><span class="line">            extendDeep(p[prop], c[prop]);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            c[prop] = p[prop];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>方法二</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">clone</span>(<span class="params">Obj</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> buf;</span><br><span class="line">    <span class="keyword">if</span> (Obj <span class="keyword">instanceof</span> <span class="built_in">Array</span>) &#123;</span><br><span class="line">        buf = []; <span class="comment">//创建一个空的数组</span></span><br><span class="line">        <span class="keyword">var</span> i = Obj.length;</span><br><span class="line">        <span class="keyword">while</span> (i--) &#123;</span><br><span class="line">            buf[i] = clone(Obj[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> buf;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (Obj <span class="keyword">instanceof</span> <span class="built_in">Object</span>) &#123;</span><br><span class="line">        buf = &#123;&#125;; <span class="comment">//创建一个空对象</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> k <span class="keyword">in</span> Obj) &#123; <span class="comment">//为这个对象添加新的属性</span></span><br><span class="line">            buf[k] = clone(Obj[k]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> buf;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Obj;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Array的slice()对应String的slice()和substring()，截取Array的部分元素，然后返回新的Array（不改变原数组）。</p>
<p>slice()的起止参数包括开始索引，不包括结束索引。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"abc"</span>.slice(<span class="number">1</span>, <span class="number">2</span>); <span class="comment">// "b"</span></span><br><span class="line">[<span class="number">14</span>, <span class="number">3</span>, <span class="number">77</span>].slice(<span class="number">1</span>, <span class="number">2</span>); <span class="comment">// [3]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="string">"A"</span>, <span class="string">"B"</span>, <span class="string">"C"</span>, <span class="string">"D"</span>, <span class="string">"E"</span>];</span><br><span class="line">arr.slice(<span class="number">0</span>, <span class="number">3</span>); <span class="comment">// 从索引0，到索引3，不包括索引3：["A", "B", "C"]</span></span><br><span class="line">arr.slice(<span class="number">3</span>); <span class="comment">// 从索引3到结束：["D", "E"] </span></span><br><span class="line">arr.slice(<span class="number">-2</span>); <span class="comment">// 参数是负数，从尾部开始选择成员个数：["D", "E"]</span></span><br><span class="line">arr.slice(<span class="number">9</span>); <span class="comment">// 参数大于数组长度，返回空数组：[]</span></span><br><span class="line">arr.slice(<span class="number">2</span>,<span class="number">1</span>); <span class="comment">// 第二个参数小于第一个参数，返回空数组：[]</span></span><br><span class="line">arr.slice(<span class="number">1</span>,<span class="number">2</span>); <span class="comment">// ["B"]</span></span><br></pre></td></tr></table></figure>
<p>类似concat，没有参数的slice()方法从头到尾截取所有元素，返回原数组的浅拷贝。</p>
<p>复制Array：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">"A"</span>, <span class="string">"B"</span>, <span class="string">"C"</span>];</span><br><span class="line"><span class="keyword">var</span> aCopy = arr.slice();</span><br><span class="line">aCopy; <span class="comment">// ["A", "B", "C"]</span></span><br><span class="line">aCopy === arr; <span class="comment">// false，slice方法返回新数组</span></span><br></pre></td></tr></table></figure>
<p>slice方法将类数组对象转为真正的数组。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.prototype.slice.call(&#123; <span class="number">0</span>: <span class="string">"a"</span>, <span class="number">1</span>: <span class="string">"b"</span>, <span class="attr">length</span>: <span class="number">2</span> &#125;); <span class="comment">// ["a", "b"]</span></span><br><span class="line"><span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">document</span>.querySelectorAll(<span class="string">"div"</span>));</span><br><span class="line"><span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>);</span><br></pre></td></tr></table></figure>
<p>concat不适用，它会用数组包裹类数组对象。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[].concat.call(&#123; <span class="number">0</span>: <span class="string">"a"</span>, <span class="number">1</span>: <span class="string">"b"</span>, <span class="attr">length</span>: <span class="number">2</span> &#125;); <span class="comment">// [&#123; 0: "a", 1: "b", length: 2 &#125;]</span></span><br></pre></td></tr></table></figure>
<p>slice可以从参数中删除一些元素，将类数组对象转换为真正的数组。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">format</span> (<span class="params">text, bold</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (bold) &#123;</span><br><span class="line">        text = <span class="string">"&lt;b&gt;"</span> + text + <span class="string">"&lt;/b&gt;"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> values = [].slice.call(<span class="built_in">arguments</span>, <span class="number">2</span>);</span><br><span class="line">    values.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;</span><br><span class="line">        text = text.replace(<span class="string">"%s"</span>, value);</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> text;</span><br><span class="line">&#125;</span><br><span class="line">format(<span class="string">"some%sthing%s %s"</span>, <span class="literal">true</span>, <span class="string">"-"</span>, <span class="string">"--"</span>, <span class="string">"---"</span>); </span><br><span class="line"><span class="comment">// "&lt;b&gt;some-thing-- ---&lt;/b&gt;"</span></span><br></pre></td></tr></table></figure>
<p>splice()方法是修改Array的“万能方法”，可以从指定索引开始删除若干元素，再从被删除的位置添加若干元素。返回值是被移除的项。</p>
<p>不同于concat和slice，splice改变原数组。</p>
<p>一行代码实现数组元素插入、删除、替换操作。</p>
<p>splice第一个参数是删除的起始位置，第二个参数是被删除的元素个数，后面参数表示被插入数组的新元素。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">"Microsoft"</span>, <span class="string">"Apple"</span>, <span class="string">"Yahoo"</span>, <span class="string">"AOL"</span>, <span class="string">"Excite"</span>, <span class="string">"Oracle"</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 从索引2开始删除3个元素，再添加两个元素</span></span><br><span class="line">arr.splice(<span class="number">2</span>, <span class="number">3</span>, <span class="string">"Google"</span>, <span class="string">"Facebook"</span>); <span class="comment">// 返回删除的元素["Yahoo", "AOL", "Excite"]</span></span><br><span class="line">arr; <span class="comment">// ["Microsoft", "Apple", "Google", "Facebook", "Oracle"]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 只删除，不添加</span></span><br><span class="line">arr.splice(<span class="number">2</span>, <span class="number">2</span>); <span class="comment">// ["Google", "Facebook"]</span></span><br><span class="line">arr; <span class="comment">// ["Microsoft", "Apple", "Oracle"]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 只添加，不删除</span></span><br><span class="line">arr.splice(<span class="number">2</span>, <span class="number">0</span>, <span class="string">"Google"</span>, <span class="string">"Facebook"</span>); <span class="comment">// 返回[]，因为没有删除任何元素</span></span><br><span class="line">arr; <span class="comment">// ["Microsoft", "Apple", "Google", "Facebook", "Oracle"] </span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 只提供第一个参数，等于将原数组在指定位置拆分成两个数组</span></span><br><span class="line">arr.splice(<span class="number">2</span>) <span class="comment">// ["Google", "Facebook", "Oracle"]</span></span><br><span class="line">arr; <span class="comment">// ["Microsoft", "Apple"]</span></span><br></pre></td></tr></table></figure>
<p>splice返回删除的元素，如果想遍历已删除数组，非常方便。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> source = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">8</span>, <span class="number">8</span>, <span class="number">8</span>, <span class="number">8</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>];</span><br><span class="line"><span class="keyword">var</span> spliced = source.splice(<span class="number">9</span>);</span><br><span class="line">spliced.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(value);</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 10 11 12 13</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(source); <span class="comment">// [1, 2, 3, 8, 8, 8, 8, 8, 9]</span></span><br></pre></td></tr></table></figure>
<p>splice至少需要两个参数，意义完全不同。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">14</span>, <span class="number">3</span>, <span class="number">77</span>].slice(<span class="number">1</span>, <span class="number">2</span>); <span class="comment">// [3]</span></span><br><span class="line">[<span class="number">14</span>, <span class="number">3</span>, <span class="number">77</span>].splice(<span class="number">1</span>, <span class="number">2</span>); <span class="comment">// [3, 77]</span></span><br></pre></td></tr></table></figure>
<hr>
<p>ES5新增9个数组实例方法：map、forEach、filter、every、some、reduce、reduceRight、indexOf、lastIndexOf。</p>
<p>其中，前7个与函数式（functional）操作有关。</p>
<p>这些方法可以在数组上用，也可以在字符串和类数组对象上用，这是不同于传统数组方法的一个地方。</p>
<p><code>Array.prototype.map</code>、<code>Array.prototype.forEach</code>、<code>Array.prototype.some</code>、 <code>Array.prototype.every</code>有相同的参数格式：<code>.map(fn(value, index, arr), thisArgument)</code>。</p>
<p>这些方法的第一个参数是函数，这个函数又接受三个参数：数组当前元素currentValue、该元素的位置index和整个数组arr。</p>
<p>另外，上下文对象（context）可作为第二个参数，传入forEach(), every(), some(), filter(), map()方法，绑定函数运行的上下文。</p>
<p>map为数组的每个元素依次调用一个回调函数，并返回调用结果构成的新数组。原数组没有变化。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].map(<span class="function"><span class="keyword">function</span>(<span class="params">n</span>)</span>&#123;<span class="keyword">return</span> n+<span class="number">1</span>&#125;); <span class="comment">// [2, 3, 4]</span></span><br></pre></td></tr></table></figure>
<p>map的回调函数依次接受三个参数，分别是当前的数组成员、当前成员的位置和数组本身。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].map(<span class="function"><span class="keyword">function</span>(<span class="params">currentValue, index, arr</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> currentValue * currentValue;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// [1, 4, 9]</span></span><br></pre></td></tr></table></figure>
<p>map还接受第二个参数，表示回调函数执行时this指向的对象。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> out = [];</span><br><span class="line"></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].map(<span class="function"><span class="keyword">function</span>(<span class="params">currentValue, index, arr</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.push(currentValue * currentValue);</span><br><span class="line">&#125;, out);</span><br><span class="line"><span class="comment">// 如果提供一个数组作为第二个参数，函数内的this指向这个数组</span></span><br><span class="line">out; <span class="comment">// [1, 4, 9]</span></span><br></pre></td></tr></table></figure>
<p>只要数组的成员可以被索引到（包括undefined、null和空位），map都不会跳过。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> f = <span class="function"><span class="keyword">function</span>(<span class="params">n</span>)</span>&#123; <span class="keyword">return</span> n+<span class="number">1</span> &#125;;</span><br><span class="line"></span><br><span class="line">[<span class="number">1</span>, <span class="literal">undefined</span>, <span class="number">2</span>].map(f); <span class="comment">// [2, NaN, 3]</span></span><br><span class="line">[<span class="number">1</span>, <span class="literal">null</span>, <span class="number">2</span>].map(f); <span class="comment">// [2, 1, 3]</span></span><br><span class="line">[<span class="number">1</span>, , <span class="number">2</span>].map(f); <span class="comment">// [2, undefined, 3]</span></span><br></pre></td></tr></table></figure>
<p>通过函数的call方法，将map方法用于字符串遍历每个字符。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> upper = <span class="function"><span class="keyword">function</span> (<span class="params">x</span>) </span>&#123;<span class="keyword">return</span> x.toUpperCase()&#125;;</span><br><span class="line"></span><br><span class="line">[].map.call(<span class="string">"abc"</span>, upper); <span class="comment">// ["A", "B", "C"]</span></span><br><span class="line"><span class="comment">// 或</span></span><br><span class="line"><span class="string">"abc"</span>.split(<span class="string">""</span>).map(upper); <span class="comment">// ["A", "B", "C"]</span></span><br></pre></td></tr></table></figure>
<p>其他类数组对象，如querySelectorAll返回nodelist，也可用上面方法遍历。</p>
<p>map在创建或改变数组时非常有用：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="string">"2"</span>, <span class="string">"30"</span>, <span class="string">"9"</span>].map(<span class="function"><span class="keyword">function</span> (<span class="params">currentValue</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">parseInt</span>(currentValue, <span class="number">10</span>);</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// [1, 2, 30, 9]</span></span><br><span class="line"></span><br><span class="line">items.map(<span class="function"><span class="keyword">function</span> (<span class="params">item</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        id: item.id,</span><br><span class="line">        name: cName(item)</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>map简单的实现：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.prototype.map = <span class="function"><span class="keyword">function</span> (<span class="params">func, thisArg</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">typeof</span> func !== <span class="string">"function"</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">"The first argument must be of type function"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> arr = [];</span><br><span class="line">    thisArg = (thisArg) ? thisArg : <span class="keyword">this</span>;</span><br><span class="line"></span><br><span class="line">    thisArg.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">element</span>) </span>&#123;</span><br><span class="line">        arr[arr.length] = func.call(thisArgs, element);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> arr;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>forEach方法与map方法类似，遍历数组所有成员，执行某种操作，但forEach没有返回值。</p>
<p>要有返回值，用map，只是单纯操作数据，用forEach。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">"_"</span>, <span class="string">"t"</span>, <span class="string">"a"</span>, <span class="string">"n"</span>, <span class="string">"i"</span>, <span class="string">"f"</span>, <span class="string">"]"</span>].forEach(<span class="function"><span class="keyword">function</span> (<span class="params">currentValue, index, array</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.push(<span class="built_in">String</span>.fromCharCode(currentValue.charCodeAt() + index + <span class="number">2</span>))</span><br><span class="line">&#125;, out = []);</span><br><span class="line">out.join(<span class="string">""</span>); <span class="comment">// "awesome"</span></span><br></pre></td></tr></table></figure>
<p>forEach和map的参数格式一样，第一个参数是函数。该函数接受三个参数，分别是当前元素、当前元素的索引、整个数组。</p>
<p>forEach方法不会跳过undefined和null，但会跳过空位。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">log</span>(<span class="params">currentValue, index, array</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"["</span> + index + <span class="string">"] = "</span> + currentValue);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">[<span class="number">2</span>, <span class="number">5</span>, , <span class="number">9</span>].forEach(log);</span><br><span class="line"><span class="comment">// [0] = 2</span></span><br><span class="line"><span class="comment">// [1] = 5</span></span><br><span class="line"><span class="comment">// [3] = 9</span></span><br></pre></td></tr></table></figure>
<p>filter对每个数组元素执行一次回调函数，并返回一个由回调函数返回true的元素组成的新数组。</p>
<p>filter方法的函数接受三个参数，第一个参数是当前数组成员的值，必选，后两个参数可选，分别是当前索引和整个数组。</p>
<p>回调函数只会对已经指定值的数组项调用。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[<span class="keyword">void</span> <span class="number">0</span>, <span class="literal">null</span>, <span class="literal">false</span>, <span class="string">""</span>, <span class="number">1</span>].filter(<span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> !value;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// [void 0, null, false, ""]</span></span><br></pre></td></tr></table></figure>
<p>filter方法可接受第二个参数，指定测试函数所在的上下文对象（this对象）。</p>
<p>filter的实现：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.prototype.filter = <span class="function"><span class="keyword">function</span>(<span class="params">fun, thisArg</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">typeof</span> fun !== <span class="string">"function"</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">"The first argument must be of type function"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> arr = [];</span><br><span class="line">    thisArg = (thisArg) ? thisArg : <span class="keyword">this</span>;</span><br><span class="line"></span><br><span class="line">    thisArg.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">element</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (fun.call(thisArg, element)) &#123;</span><br><span class="line">            arr[arr.length] = element;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> arr;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>some给数组里的每个元素执行回调函数，只要有一个元素通过该测试，就返回true，否则返回false。</p>
<p>回调函数只对已经指定值的数组索引执行，不会对已删除的或未指定值的元素调用。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> max = -<span class="literal">Infinity</span>;</span><br><span class="line"><span class="keyword">var</span> satisfied = [<span class="number">10</span>, <span class="number">12</span>, <span class="number">10</span>, <span class="number">8</span>, <span class="number">5</span>, <span class="number">23</span>].some(<span class="function"><span class="keyword">function</span> (<span class="params">value, index, array</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (value &gt; max) &#123;</span><br><span class="line">        max = value; <span class="comment">// 每次循环max都会变</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> value &lt; <span class="number">10</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 回调的value &lt; 10时，中断函数循环。every和some类似，但回调返回false而不是true。</span></span><br><span class="line">max; <span class="comment">// 12</span></span><br><span class="line">satisfied; <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<p>every方法对所有元素调用一个函数，只有所有元素通过测试，才返回true，否则返回false。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>].every(<span class="function"><span class="keyword">function</span>(<span class="params">elem, index, arr</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> elem &gt;= <span class="number">3</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// false</span></span><br></pre></td></tr></table></figure>
<p>some和every方法类似“断言”（assert），判断数组成员是否符合某种条件。</p>
<p>some和every与map和forEach参数一模一样。也可以使用第二个参数，绑定函数的this关键字。</p>
<p>reduce和reduceRight方法依次处理数组的每个元素，最终累计为一个值。</p>
<p>reduce处理顺序是从左到右，reduceRight是从右到左，其他完全一样。</p>
<p>reduce方法的第一个参数是处理函数。该函数接受四个参数，前两个必须，后两个可选：</p>
<ul>
<li>用来累计的变量（即当前状态），默认值为0</li>
<li>数组当前元素</li>
<li>当前元素在数组中的索引（从0开始）</li>
<li>原数组</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>].reduce(<span class="function"><span class="keyword">function</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 15</span></span><br></pre></td></tr></table></figure>
<p>对累计变量指定初值，把它放在reduce方法的第二个参数。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>].reduce(<span class="function"><span class="keyword">function</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x+y;</span><br><span class="line">&#125;, <span class="number">10</span>);</span><br><span class="line"><span class="comment">// 25</span></span><br></pre></td></tr></table></figure>
<p>reduce方法数组求和。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.prototype.sum = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.reduce(<span class="function"><span class="keyword">function</span> (<span class="params">partial, value</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> partial + value;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">[<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">10</span>].sum(); <span class="comment">// 28</span></span><br></pre></td></tr></table></figure>
<p>join把数组拼接成字符串，若数组值是对象，join不会按期望返回值，除非对象有合理的valueOf或toString方法，可以用reduce实现：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">concat</span>(<span class="params">input</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> input.reduce(<span class="function"><span class="keyword">function</span> (<span class="params">partial, value</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (partial) &#123;</span><br><span class="line">            partial += <span class="string">", "</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> partial + value</span><br><span class="line">    &#125;, <span class="string">""</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">concat([</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">"George"</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">"Sam"</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">"Pear"</span> &#125;</span><br><span class="line">]);</span><br><span class="line"><span class="comment">// "George, Sam, Pear"</span></span><br></pre></td></tr></table></figure>
<p>reduce方法依次处理每个元素，还可搜索某个元素。如，找出长度最长的数组元素。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">findLongest</span>(<span class="params">entries</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> entries.reduce(<span class="function"><span class="keyword">function</span> (<span class="params">longest, entry</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> entry.length &gt; longest.length ? entry : longest;</span><br><span class="line">    &#125;, <span class="string">""</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>类似String，Array也可通过indexOf()搜索指定的元素的位置，返回给定元素在数组中第一次出现的位置，没有则返回-1。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>].indexOf(<span class="string">"b"</span>); <span class="comment">// 1</span></span><br><span class="line">[<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>].indexOf(<span class="string">"3"</span>); <span class="comment">// -1</span></span><br></pre></td></tr></table></figure>
<p>indexOf第二个参数表示搜索的开始位置。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>].indexOf(<span class="string">"a"</span>, <span class="number">1</span>) <span class="comment">// -1</span></span><br></pre></td></tr></table></figure>
<p>lastIndexOf方法从后向前搜索，返回给定元素在数组最后一次出现的位置，没有则返回-1。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">2</span>, <span class="number">5</span>, <span class="number">9</span>, <span class="number">2</span>].lastIndexOf(<span class="number">2</span>); <span class="comment">// 3</span></span><br><span class="line">[<span class="number">2</span>, <span class="number">5</span>, <span class="number">9</span>, <span class="number">2</span>].lastIndexOf(<span class="number">7</span>); <span class="comment">// -1</span></span><br></pre></td></tr></table></figure>
<p>如果数组包含NaN，indexOf和lastIndexOf不适用。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="literal">NaN</span>].indexOf(<span class="literal">NaN</span>); <span class="comment">// -1</span></span><br><span class="line">[<span class="literal">NaN</span>].lastIndexOf(<span class="literal">NaN</span>); <span class="comment">// -1</span></span><br></pre></td></tr></table></figure>
<p>因为这两个方法内部，使用严格相等运算符（===）比较，NaN唯一一个不等于自身的值。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a === <span class="string">"a"</span> || a === <span class="string">"b"</span> || a === <span class="string">"c"</span>;</span><br><span class="line"><span class="comment">// 等价于</span></span><br><span class="line">[<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>].indexOf(a) !== <span class="number">-1</span>;</span><br></pre></td></tr></table></figure>
<p>如果引用相同，indexOf也能查找对象。第二个可选参数指定开始查找的位置。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = &#123; <span class="attr">foo</span>: <span class="string">"bar"</span> &#125;;</span><br><span class="line"><span class="keyword">var</span> b = [a, <span class="number">2</span>];</span><br><span class="line"></span><br><span class="line">b.indexOf(<span class="number">1</span>); <span class="comment">// -1</span></span><br><span class="line">b.indexOf(&#123; <span class="attr">foo</span>: <span class="string">"bar"</span> &#125;); <span class="comment">// -1</span></span><br><span class="line">b.indexOf(a); <span class="comment">// 0</span></span><br><span class="line">b.indexOf(a, <span class="number">1</span>); <span class="comment">// -1</span></span><br><span class="line">b.indexOf(<span class="number">2</span>, <span class="number">1</span>); <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>
<p>上面这些数组方法中，不少返回的还是数组，所以可以链式使用。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> users = [</span><br><span class="line">    &#123;<span class="attr">name</span>: <span class="string">"tom"</span>, <span class="attr">email</span>: <span class="string">"tom@example.com"</span>&#125;, </span><br><span class="line">    &#123;<span class="attr">name</span>: <span class="string">"peter"</span>, <span class="attr">email</span>: <span class="string">"peter@example.com"</span>&#125;</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line">users</span><br><span class="line">    .map(<span class="function"><span class="keyword">function</span> (<span class="params">user</span>) </span>&#123; <span class="keyword">return</span> user.email; &#125;)</span><br><span class="line">    .filter(<span class="function"><span class="keyword">function</span> (<span class="params">email</span>) </span>&#123; <span class="keyword">return</span> <span class="regexp">/^t/</span>.test(email); &#125;)</span><br><span class="line">    .forEach(alert);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 弹出tom@example.com</span></span><br></pre></td></tr></table></figure>
<hr>
<ul>
<li>valueOf：返回数组对象的原始值。</li>
<li>concat：连接两个或更多数组，并返回结果。</li>
<li>join：把数组所有元素放入一个字符串。元素通过指定的分隔符进行分隔。</li>
<li>pop：删除并返回数组最后一个元素。</li>
<li>push：向数组的末尾添加一个或更多元素，并返回新的长度。</li>
<li>shift：删除并返回数组第一个元素。</li>
<li>unshift：向数组开头添加一个或更多元素，并返回新的长度。</li>
<li>reverse：颠倒数组元素顺序。</li>
<li>sort：数组元素排序。</li>
<li>slice：返回数组选定元素。</li>
<li>splice：删除元素，并向数组添加新元素。</li>
<li>map：对数组每一项运行给定函数，返回每次函数调用的结果组成的数组。</li>
<li>forEach：对数组每一项运行给定函数，无返回值，相当于遍历数组。</li>
<li>filter：对数组每一项运行给定函数，返回true项返回的数组。</li>
<li>every：对数组每一项运行给定函数，每一项返回true，则返回true。</li>
<li>some：对数组每一项运行给定函数，任意一项返回true，则返回true。</li>
</ul>
<p>数组转换方法</p>
<pre><code>* 数组的toString方法返回由数组中每个值的字符串拼接的以逗号分隔的字符串。
* join方法只接受一个参数，即用作分隔符的字符串。如果传入空字符串，直接拼接；如果不传入任何值，则使用逗号为分隔符。
</code></pre><p>数组栈方法（FILO）</p>
<ul>
<li>push方法接收任意数量的参数、数组，把它们添加到数组末尾，并返回修改后的数组长度。</li>
<li>pop方法从数组末尾移除最后一项，返回移除的项。</li>
</ul>
<p>数组队列方法（FIFO）</p>
<ul>
<li>正向队列：push+ shift </li>
<li>反向队列：unshift + pop</li>
</ul>
<p>添加项的方法都可以添加任意项并返回数组长度。删除项方法都返回被删除的那一项。</p>
<p>数组重排序方法</p>
<ul>
<li>reverse反转数组项顺序</li>
<li>sort传入比较函数，比较函数接收两个参数，如果第一个参数应该位于第二个之前则返回一个负数，如果两个参数相等则返回0，如果第一个参数应该位于第二个参数之后则返回一个正数。</li>
<li>如果数组项是数值类型或者其valueOf方法会返回数值类型的对象类型，可以使用更简单的比较函数。</li>
</ul>
<p>数组操作方法</p>
<ul>
<li>concat：获取合并后的数组。（不是contact）该方法可以基于当前数组中的所有项创建一个副本，然后将接受到的参数添加到这个副本的末尾，最后返回新构建的数组。可以传入多个数组或值。调用这个方法的数组维持原值不变。</li>
<li>slice：获取数组的子数组。接受一个或两个参数，即要返回项的起始位置和结束位置。只有一个参数时，slice返回从该参数指定位置开始到当前数组末尾的所有项。如果有两个参数，返回起始和结束位置之间的项，但不包括结束位置的项。slice方法不影响原始数组。<br>如果slice方法的参数中有负数，则用数组长度加上该数来确定相应的位置。如果结束位置小于起始位置，返回空数组。</li>
<li>splice：删除、插入、替换数组元素。语法：splice起始位置，要删除的项数，插入的新项</li>
<li>splice：始终返回一个数组，该数组包含从原始数组中删除的项。如果没有删除任何项则返回一个空数组。</li>
</ul>
<p>数组位置方法</p>
<ul>
<li>indexOf和lastIndexOf用于查找某个值在数组中第一次出现的索引值。</li>
<li>这两个方法都接收两个参数：要查找的项和表示查找起点位置的索引（可选）。</li>
<li>这两个方法都返回要查找的项在数组中的位置，或者在没有找到的情况下返回-1。</li>
<li>这两个方法返回的位置始终是从0开始以正序排列的索引。查找起点的索引位置包括了起点本身。</li>
</ul>
<p>数组迭代方法</p>
<ul>
<li>map：对数组中每一项运行给定函数，返回每次函数调用的结果组成的数组。</li>
<li>forEach：对数组中的每一项运行给定函数，没有返回值。</li>
<li>filte：对数组中的每一项运行给定函数，返回该函数会返回true的项组成的数组。</li>
<li>every：对数组中的每一项运行给定函数，如果该函数对每一项都返回true，则返回true；</li>
<li>some：对数组中的每一项运行给定函数，如果该函数任一项返回true，则返回true。</li>
</ul>
<p>迭代方法不会对原数组造成任何影响。forEach和对数组进行for循环的不同之处也在于此。</p>
<p>数组归并方法</p>
<ul>
<li>reduce和reduceRight</li>
</ul>

				</div>
				<!-- about -->
				
			</div>
			<!-- pagination -->
			
			<div class="comment-section">
	
	


</div>
		</div>
		
	</div>


		<footer>
			 
<a id="gotop" href="#" title="back to top"><i class="mdi-hardware-keyboard-arrow-up"></i></a>

		</footer>
	</div>
	<!-- <script src="/libs/bs/js/bootstrap.min.js"></script> -->
	<!-- <script src="//apps.bdimg.com/libs/bootstrap/3.3.4/js/bootstrap.min.js"></script> -->

	<script>var timeEnd = new Date();console.log('耗时：' + (timeEnd - timeStart));</script>
	<!-- <script>(typeof $().modal == 'function')|| document.write('<script src="/libs/bs/js/bootstrap.min.js" type="text/javascript"><\/script>')</script>-->
	<!-- material design -->
	<!-- <script src="/libs/bs-material/js/ripples.min.js"></script> -->
	<!-- <script src="//apps.bdimg.com/libs/bootstrap-material/0.3.0/js/ripples.min.js"></script> -->
	<!-- <script src="/libs/bs-material/js/material.min.js"></script> -->
	<!-- <script src="//apps.bdimg.com/libs/bootstrap-material/0.3.0/js/material.min.js"></script>-->
	<!-- toc -->
	<!-- <script src="/libs/tocify/jquery-ui.min.js"></script> -->
	<!-- <script src="//apps.bdimg.com/libs/jqueryui/1.10.4/jquery-ui.min.js"></script> -->
	<!-- <script src="/libs/tocify/jquery.tocify.custom.js"></script> -->
	<!-- <script src="/js/main.js"></script> -->
</body>
</html>
