	<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>[笔记]-jQuery原理及简单实现 | 一切都沉淀为笔记</title>
  <meta name="author" content="Huangzhike">
  
  <meta name="description" content="123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="[笔记]-jQuery原理及简单实现"/>
  <meta property="og:site_name" content="一切都沉淀为笔记"/>

  
  
		<!-- favicon -->
		<link rel="icon" type="image/ico" href="/favicon.ico" sizes="32x32">
		<link rel="manifest" href="/manifest.json">
		<meta name="msapplication-TileColor" content="#009688">
		<meta name="msapplication-TileImage" content="/mstile-144x144.ico">
		<meta name="theme-color" content="#009688">
		<!-- favicon end -->
    <!-- <link href="//favicon.ico" rel="icon"> -->
  

  <!-- toc -->
  <link rel="stylesheet" href="/libs/tocify/jquery.tocify.css" media="screen" type="text/css">

  <!-- <link rel="stylesheet" href="/libs/bs/css/bootstrap.min.css" media="screen" type="text/css"> -->
  <link rel="stylesheet" href="//apps.bdimg.com/libs/bootstrap/3.3.4/css/bootstrap.min.css" media="screen" type="text/css">

  <!-- material design -->
	<!-- <link rel="stylesheet" href="/libs/bs-material/css/ripples.min.css" media="screen" type="text/css"> -->
  <link rel="stylesheet" href="//apps.bdimg.com/libs/bootstrap-material/0.3.0/css/ripples.min.css" media="screen" type="text/css">
  <!-- <link rel="stylesheet" href="/libs/bs-material/css/material.min.css" media="screen" type="text/css"> -->
	<link rel="stylesheet" href="//apps.bdimg.com/libs/bootstrap-material/0.3.0/css/material.min.css" media="screen" type="text/css">

  <link rel="stylesheet" href="/css/highlight.light.css" media="screen" type="text/css">

  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">

  

  

  <script src="//apps.bdimg.com/libs/jquery/2.0.3/jquery.min.js"></script>
	<script>window.jQuery || document.write('<script src="/libs/jquery-2.0.3.min.js" type="text/javascript"><\/script>')</script>

</head>

 	<body>
	  <nav class="navbar navbar-default">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">菜单</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">一切都沉淀为笔记</a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
            <ul class="nav navbar-nav navbar-right">
                
                <li>
                    <a href="/" title="">
                    <i class="fa fa-home"></i>首页
                    </a>
                </li>
                
                <li>
                    <a href="/archives" title="">
                    <i class="fa fa-list"></i>存档
                    </a>
                </li>
                
                <li>
                    <a href="//resume" title="我的主页">
                    <i class="fa fa-github"></i>GitHub
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</nav>

	  <div class="container" >
	    <div class="row">
	
	<div class="col-md-9 center-content">
	

		<div class="content">
			<!-- index -->
		   

			  		<h2>[笔记]-jQuery原理及简单实现</h2>
					
					<div>
						<span class="post-time">2016-10-28 12:18</span>
					</div>	
					

					<div class="article-content">
						<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div></pre></td><td class="code"><pre><div class="line">(function()&#123;</div><div class="line">	//首先创建匿名自执行函数，将代码写在里面避免全局变量冲突</div><div class="line"></div><div class="line">	// noConflict方法，缓存外部的冲突变量</div><div class="line">	var _jQuery = window.jQuery,</div><div class="line">		_$= window.$;</div><div class="line"></div><div class="line">	// 对外暴露接口，用 $.ajax 或 $(&quot;#id&quot;)即可调用。</div><div class="line">	var jQuery=window.jQuery=window.$=function(selector,context)&#123;</div><div class="line">	// 每次用$调用的时候,直接返回一个$的实例，达到无new调用。</div><div class="line">		return new jQuery.prototype.init(selector);</div><div class="line">	&#125; </div><div class="line"></div><div class="line">	//处理插件，原型对象</div><div class="line">	jQuery.fn=jQuery.prototype=&#123;</div><div class="line">		constructor : jQuery,</div><div class="line">		length : 0,</div><div class="line">		splice: [].splice, // 在原型上具有splice属性</div><div class="line">		selector : &quot;&quot;,</div><div class="line"></div><div class="line">		// jQuery.prototype.attr = function () &#123;&#125;;</div><div class="line">		// $(&quot;div&quot;) = new jQuery();  // 返回jQuery对象。</div><div class="line">		// $(&quot;div&quot;).attr(&quot;name&quot;, &quot;Jim&quot;);</div><div class="line">		// 内部如何返回对象？</div><div class="line">		// 如果 return this;  指向windows，this在运行时决定</div><div class="line">		// 如果 return new jQuery(); 循环调用 Maximum call stack size exceed</div><div class="line">		// 解决原理：</div><div class="line">		// function f() &#123;</div><div class="line">		// 	return f.prototype.init(); // init返回this指向f.prototype，也能有xx属性</div><div class="line">		// &#125;</div><div class="line">		// f.prototype = &#123;</div><div class="line">		// 	init:function() &#123;</div><div class="line">		// 		return this; </div><div class="line">		// 	&#125;,</div><div class="line">		// 	xx:&quot;xx&quot;</div><div class="line">		// &#125;;</div><div class="line"></div><div class="line">		init : function(selector) &#123;</div><div class="line">			// 简单的DOM选择，详细实现略</div><div class="line">			var eles = document.getElementsByTagName(&quot;selector&quot;);</div><div class="line">			[].push.apply(this, eles);</div><div class="line">			return this; </div><div class="line">		&#125;</div><div class="line"></div><div class="line">	&#125;;  </div><div class="line"></div><div class="line">	// 因为return new jQuery.prototype.init，需要手动把init.prototype指向jQuery.prototype</div><div class="line">	jQuery.prototype.init.prototype = jQuery.prototype; </div><div class="line"></div><div class="line"></div><div class="line">	//实现继承</div><div class="line">	jQuery.extend=jQuery.fn.extend=function() &#123;</div><div class="line">		var o =arguments[0];</div><div class="line">		// 浅拷贝</div><div class="line">		for (var p in o)&#123;</div><div class="line">			// this在运行时动态指向jQuery或jQuery.fn</div><div class="line">			this.[p]=o.[p];</div><div class="line">		&#125;</div><div class="line">	&#125;;</div><div class="line"></div><div class="line">	// 添加静态方法</div><div class="line">	// .method来赋予新的属性和方法，也被称为静态方法。</div><div class="line">	jQuery.extend(&#123;&#125;);</div><div class="line">	// $.extend(&#123;method:function()&#123;console.log(&quot;静态方法&quot;)&#125;&#125;);</div><div class="line">	// $.method(); // 静态方法</div><div class="line"></div><div class="line">	// 解决命名冲突</div><div class="line">	jQuery.extend(&#123;</div><div class="line">		noConflict: function() &#123;</div><div class="line">			// 恢复最开始缓存的外部冲突变量</div><div class="line">			window.jQuery=_jQuery;</div><div class="line">			window.$=_$</div><div class="line">			// 返回jQuery，防止另外一种情况，即jQuery被后面冲突的覆盖</div><div class="line">			return this; </div><div class="line">			// 将jQuery赋给另外一个不冲突的命名，如：var j = $.noConflict();</div><div class="line">		&#125;</div><div class="line">	&#125;);</div><div class="line"></div><div class="line"></div><div class="line">	// 添加实例方法，链式调用</div><div class="line">	jQuery.fn.extend(&#123;&#125;);</div><div class="line">	// $.fn.extend(&#123;method:function()&#123;console.log(&quot;实例方法&quot;)&#125;&#125;);</div><div class="line">	// $(&quot;div&quot;).method(); // 实例方法</div><div class="line">	// jQuery对象是类数组对象</div><div class="line"></div><div class="line">	jQuery.fn.extend(&#123;</div><div class="line"></div><div class="line">		each:function(callback) &#123;</div><div class="line">			var len = this.length,	</div><div class="line">				i = 0;</div><div class="line">			// jQuery数组对象，如$.(&quot;div&quot;).each(function(index,item) &#123;&#125;)</div><div class="line">			for (; i &lt; len; i++) &#123;</div><div class="line">				var val = callback.call(this[i], index, this[i]);</div><div class="line">				if(val === false) &#123;</div><div class="line">					break;</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">			return this; // 链式调用</div><div class="line">		&#125;,</div><div class="line"></div><div class="line">		css : function(attr,val) &#123;</div><div class="line">			// 查询</div><div class="line">			if(arguments.length == 1) &#123; </div><div class="line">				return this[0].style[arguments[0]];</div><div class="line">				// 或者</div><div class="line">				return getComputedStyle(this[i],null)[attr];</div><div class="line">			&#125;</div><div class="line">			// 设置</div><div class="line">			for(var i = 0;i &lt; this.length; i++) &#123;</div><div class="line">				this[i].style[attr] = val;</div><div class="line">			&#125;</div><div class="line">			return this;</div><div class="line">		&#125;,</div><div class="line"></div><div class="line">		hasClass : function(classsName) &#123;</div><div class="line">			var reg = new RegExp(&quot;(\\s|^)&quot; + classsName + &quot;(\\s|$)&quot;);</div><div class="line"></div><div class="line">			for (var i = 0; i &lt; this.length; i++) &#123;</div><div class="line">				var n= this[i].className.split(&quot; &quot;);</div><div class="line">				for (var j = 0; j &lt; n.length; j++) &#123;			</div><div class="line">					if (n[j].className.match(reg)) &#123;</div><div class="line">						return true;</div><div class="line">					&#125;</div><div class="line">				&#125;</div><div class="line">				return false;</div><div class="line">			&#125;</div><div class="line">		&#125;,</div><div class="line"></div><div class="line">		addClass : function(classsName) &#123;</div><div class="line">			var reg = new RegExp(&quot;(\\s|^)&quot; + classsName + &quot;(\\s|$)&quot;);</div><div class="line">			for (var i = 0; i &lt; this.length; i++) &#123;</div><div class="line">				if(!this[i].className.match(reg))</div><div class="line">				this[i].className += &quot; &quot; + classsName;</div><div class="line">			&#125;</div><div class="line">			return this;</div><div class="line">		&#125;,</div><div class="line"></div><div class="line">		removeClass : function(classsName) &#123;</div><div class="line">			var reg = new RegExp(&quot;(\\s|^)&quot; + classsName + &quot;(\\s|$)&quot;);</div><div class="line">			for (var i = 0; i &lt; this.length; i++) &#123;</div><div class="line">				if (this[i].className.match(reg)) &#123;</div><div class="line">					this[i].className = this[i].className.replace(classsName,&quot;&quot;);</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">			return this;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">	&#125;);</div><div class="line"></div><div class="line">&#125;)();</div></pre></td></tr></table></figure>
					</div>

			  <!-- about -->
			  
		</div>

		<!-- pagination -->
	  

		<div class="comment-section">
  
  


</div>
	</div>

	

</div>


		<footer>
			

<p>
  Powered by <a href="https://hexo.io">Hexo</a>  | with <a href="https://github.com/wayou/hexo-theme-material">Material</a> theme
</p>
<p>
  &copy; 2016 <a href="http://huangzhike.github.io"> Huangzhike </a>
</p>
<a id="gotop" href="#" title="back to top"><i class="mdi-hardware-keyboard-arrow-up"></i></a>

		</footer>
	  </div>

		<!-- <script src="/libs/bs/js/bootstrap.min.js"></script> -->
		<script src="//apps.bdimg.com/libs/bootstrap/3.3.4/js/bootstrap.min.js"></script>
		<script>(typeof $().modal == 'function')|| document.write('<script src="/libs/bs/js/bootstrap.min.js" type="text/javascript"><\/script>')</script>

		<!-- material design -->
		<!-- <script src="/libs/bs-material/js/ripples.min.js"></script> -->
		<script src="//apps.bdimg.com/libs/bootstrap-material/0.3.0/js/ripples.min.js"></script>
		<!-- <script src="/libs/bs-material/js/material.min.js"></script> -->
		<script src="//apps.bdimg.com/libs/bootstrap-material/0.3.0/js/material.min.js"></script>
		<!-- toc -->
		<!-- <script src="/libs/tocify/jquery-ui.min.js"></script> -->
		<script src="//apps.bdimg.com/libs/jqueryui/1.10.4/jquery-ui.min.js"></script>
		<script src="/libs/tocify/jquery.tocify.custom.js"></script>

		<script src="/js/main.js"></script>

	</body>
</html>
