<!DOCTYPE HTML>
<html>

<head>
    <script>
        var timeStart = new Date();
    </script>
    <meta charset="utf-8">
    
    <title>[笔记]-HTTP | Reunion...</title>
    
    <meta name="author" content="huangzhike">
    
    
    <meta name="description"
        content="客户端HTTP请求包括四部分：请求行、请求头部、空行、请求数据。
服务器HTTP响应包括四部分：状态行、消息报头、空行、响应正文。
HTTP请求和响应都遵循相同的格式，HTTP包含Header和Body两部分，Body可选

客户端请求：
GET /hello.txt HTTP/1.1
User-A">
    
    
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta property="og:title" content="[笔记]-HTTP" />
    
    <meta property="og:site_name" content="Reunion..." />
    
    
    <!-- favicon -->
    <link rel="icon" type="image/ico" href="/logo.ico" sizes="32x32">
    <meta name="msapplication-TileColor" content="#009688">
    <meta name="msapplication-TileImage" content="/mstile-144x144.ico">
    <meta name="theme-color" content="#009688">
    <!-- favicon end -->
    <!-- <link href="//ok.ico" rel="icon"> -->
    

    <!-- <link href="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/4.5.0/css/bootstrap.min.css" rel="stylesheet"> -->
    <link rel="stylesheet" href="/css/bootstrap.min.css" media="screen" type="text/css">
    <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
    <link rel="stylesheet" href="/css/prism.css" media="screen" type="text/css">

<meta name="generator" content="Hexo 4.2.1"></head>
<body>
    <nav class="navbar navbar-default">
	<div class="container">
		<div class="navbar-header">
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
				<span class="sr-only">菜单</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			<a class="navbar-brand" title="早く来い、クラウド" href="/">Reunion...</a>
           
		</div>
		<div id="navbar" class="collapse navbar-collapse">
			<ul class="nav navbar-nav navbar-right">
				
				<li>
					<a href="https://huangzhike.github.io/archives" title="">
						<i class="fa fa-list"></i>Archives
					</a>
				</li>
				
				<li>
					<a href="https://github.com/huangzhike" target="_blank" rel="noopener" title="">
						<i class="fa fa-github"></i>GitHub
					</a>
				</li>
				
			</ul>
		</div>
	</div>
</nav>

    <div class="container" >
        <div class="row">
	
		<div class="col-md-9 center-content">
			
			<div class="content">
				<!-- index -->
				
				<h2>[笔记]-HTTP</h2>
				
				<div>
					<div class="post-time">2016-12-12</div>
				</div>
				
				<div class="article-content">
				<ul>
<li>客户端HTTP请求包括四部分：请求行、请求头部、空行、请求数据。</li>
<li>服务器HTTP响应包括四部分：状态行、消息报头、空行、响应正文。</li>
<li>HTTP请求和响应都遵循相同的格式，HTTP包含Header和Body两部分，Body可选</li>
</ul>
<p>客户端请求：</p>
<pre><code>GET /hello.txt HTTP/1.1
User-Agent: curl/7.16.3 libcurl/7.16.3 OpenSSL/0.9.7l zlib/1.2.3
Host: www.example.com
// GET表示请求方式，/表示URL路径，URL总是以/开头，/表示首页，HTTP/1.1表示HTTP协议版本是1.1
// Host表示请求域名。服务器通过Host区分浏览器请求网站</code></pre><pre><code>POST /path HTTP/1.1
Header1: Value1
Header2: Value2
Header3: Value3

body data goes here...
// 当遇到连续两个\r\n时，Header结束，后面是Body</code></pre><ul>
<li><p>GET方法，主要是请求某个资源，是最常用到的方法，获取列表数据分页等等。但GET方法数据存放在头部，有大小的限制，详见各浏览器对URL的限制。</p>
</li>
<li><p>POST方法，主要是向服务端发送数据，如用户登陆，修改用户资料等。不能因为修改信息少而去改变为get方法，这是违背定义的。</p>
</li>
</ul>
<p>GET方法：查询字符串（名称/值对）在GET请求的URL中发送：</p>
<pre><code>/test/demo_form.asp？name1=value1&amp;name2=value2</code></pre><ul>
<li>GET请求可被缓存</li>
<li>GET请求保留在浏览器历史记录中</li>
<li>GET请求可被收藏为书签</li>
<li>GET请求不应在处理敏感数据时使用</li>
<li>GET请求有长度限制</li>
<li>GET请求只应当用于取回数据</li>
</ul>
<p>POST 方法：查询字符串（名称/值对）在POST请求的HTTP消息主体中发送：</p>
<pre><code>POST /test/demo_form.asp HTTP/1.1
Host: w3schools.com
name1=value1&amp;name2=value2</code></pre><ul>
<li>POST 请求不会被缓存</li>
<li>POST 请求不会保留在浏览器历史记录中</li>
<li>POST 不能被收藏为书签</li>
<li>POST 请求对数据长度没有要求</li>
</ul>
<p>服务端响应：</p>
<pre><code>HTTP/1.1 200 OK
Date: Mon, 27 Jul 2009 12:28:53 GMT
Server: Apache
Last-Modified: Wed, 22 Jul 2009 19:15:56 GMT
ETag: &quot;34aa387-d-1568eb00&quot;
Accept-Ranges: bytes
Content-Length: 51
Vary: Accept-Encoding
Content-Type: text/plain
// HTTP响应如果包含body，也是通过\r\n\r\n来分隔的</code></pre><p>HTTP响应头信息</p>
<ul>
<li><p>Allow：服务器支持哪些请求方法（如GET、POST等）。</p>
</li>
<li><p>Content-Encoding：文档的编码（Encode）方法。只有解码之后才可以得到Content-Type头指定的内容类型。当存在Content-Encoding时，Body数据是被压缩的，如gzip。</p>
</li>
<li><p>Content-Length：表示内容长度。只有浏览器使用持久HTTP连接时才需要。</p>
</li>
<li><p>Content-Type：表示文档属于什么MIME类型。指示响应的内容，text/html表示HTML网页，浏览器依靠Content-Type判断响应的内容是网页还是图片。<br>浏览器并不靠URL来判断响应的内容，即使URL是<code>http://example.com/abc.jpg</code>，也不一定是图片。Body的数据类型由Content-Type头来确定，如果是网页，Body就是文本，如果是图片，Body就是图片的二进制数据。</p>
</li>
<li><p>Date：当前的GMT时间。可以用setDateHeader设置以避免转换时间格式。</p>
</li>
<li><p>Expires：在何时认为文档已经过期，不再缓存它。</p>
</li>
<li><p>Last-Modified：文档的最后改动时间。客户可以通过If-Modified-Since请求头提供一个日期，该请求将被视为一个条件GET，只有改动时间迟于指定时间的文档才会返回，否则返回一个304（Not Modified）状态。Last-Modified也可用setDateHeader方法来设置。</p>
</li>
<li><p>Refresh：浏览器在多少时间之后刷新文档，以秒计。可以通过<code>setHeader(&quot;Refresh&quot;, &quot;5; URL=http://host/path&quot;)</code>让浏览器读取指定的页面。 这种功能通常通过设置HTML页面HEAD区的<code>＜META HTTP-EQUIV=&quot;Refresh&quot; CONTENT=&quot;5;URL=http://host/path&quot;＞</code>实现，对于Servlet来说，直接设置Refresh头更加方便。 Refresh的意义是”N秒之后刷新本页面或访问指定页面”，而不是”每隔N秒刷新本页面或访问指定页面”。因此，连续刷新要求每次都发送一个Refresh头，而发送204状态代码则可以阻止浏览器继续刷新，不管是使用Refresh头还是＜META HTTP-EQUIV=”Refresh” …＞。 </p>
</li>
</ul>
<p>HTTP请求流程：</p>
<ul>
<li>步骤1：浏览器首先向服务器发送HTTP请求，请求包括：<ul>
<li>GET仅请求资源，POST会附带用户数据；<ul>
<li>路径：/full/url/path；</li>
<li>域名：Host指定：Host: <a href="http://www.sina.com.cn" target="_blank" rel="noopener">www.sina.com.cn</a></li>
<li>其他相关的Header；</li>
</ul>
</li>
<li>如果是POST，请求还包括Body，包含用户数据。</li>
</ul>
</li>
<li>步骤2：服务器向浏览器返回HTTP响应，响应包括：<ul>
<li>响应代码：200表示成功，3xx表示重定向，4xx表示客户端发送的请求有错误，5xx表示服务器端处理时发生了错误；</li>
<li>响应类型：由Content-Type指定；</li>
<li>其他相关的Header；</li>
<li>通常HTTP响应会携带内容，也就是Body，网页的HTML源码就在Body中。</li>
</ul>
</li>
<li>步骤3：如果浏览器继续向服务器请求其他资源，如图片，就再次发出HTTP请求，重复步骤1、2。</li>
</ul>
<p>虽然浏览器请求的是首页，但在HTML中可以链入其他服务器的资源，从而将请求压力分散到各个服务器上，一个站点可以链接到其他站点，无数个站点互相链接起来，就形成了World Wide Web。</p>
<p>HTTP1.0定义了三种请求方法：GET, POST和HEAD。</p>
<p>HTTP1.1新增了五种请求方法：OPTIONS, PUT, DELETE, TRACE和CONNECT方法。</p>
<p>HTTP状态码（HTTP Status Code）共分为5种类型：</p>
<ul>
<li>1**：信息，服务器收到请求，需要请求者继续执行操作</li>
<li>2**：成功，操作被成功接收并处理</li>
<li>3**：重定向，需要进一步的操作以完成请求</li>
<li>4**：客户端错误，请求包含语法错误或无法完成请求</li>
<li>5**：服务器错误，服务器在处理请求的过程中发生了错误</li>
</ul>
<p>HTTP Content-Type，内容类型，一般是指网页中存在的Content-Type，用于定义网络文件的类型和网页的编码，决定浏览器将以什么形式、什么编码读取这个文件，比如一些Asp网页点击却是下载一个文件。</p>
<table>
<thead>
<tr>
<th>文件扩展名</th>
<th align="center">Content-Type(Mime-Type)</th>
<th align="center">文件扩展名</th>
<th align="right">Content-Type(Mime-Type)</th>
</tr>
</thead>
<tbody><tr>
<td>.*（二进制流）</td>
<td align="center">application/octet-stream</td>
<td align="center">.tif</td>
<td align="right">image/tiff</td>
</tr>
<tr>
<td>.asp</td>
<td align="center">text/asp</td>
<td align="center">.asx</td>
<td align="right">video/x-ms-asf</td>
</tr>
<tr>
<td>.bmp</td>
<td align="center">application/x-bmp</td>
<td align="center">.bot</td>
<td align="right">application/x-bot</td>
</tr>
<tr>
<td>.doc</td>
<td align="center">application/msword</td>
<td align="center">.dot</td>
<td align="right">application/msword</td>
</tr>
<tr>
<td>.gif</td>
<td align="center">image/gif</td>
<td align="center">.gl2</td>
<td align="right">application/x-gl2</td>
</tr>
<tr>
<td>.html</td>
<td align="center">text/html</td>
<td align="center">.htt</td>
<td align="right">text/webviewhtml</td>
</tr>
<tr>
<td>.jpeg</td>
<td align="center">image/jpeg</td>
<td align="center">.jpg</td>
<td align="right">image/jpeg</td>
</tr>
<tr>
<td>.jpg</td>
<td align="center">application/x-jpg</td>
<td align="center">.js</td>
<td align="right">application/x-javascript</td>
</tr>
<tr>
<td>.jsp</td>
<td align="center">text/html</td>
<td align="center">.la1</td>
<td align="right">audio/x-liquid-file</td>
</tr>
<tr>
<td>.mp4</td>
<td align="center">video/mpeg4</td>
<td align="center">.mpa</td>
<td align="right">video/x-mpg</td>
</tr>
<tr>
<td>.mpeg</td>
<td align="center">video/mpg</td>
<td align="center">.mpg</td>
<td align="right">video/mpg</td>
</tr>
<tr>
<td>.xml</td>
<td align="center">text/xml</td>
<td align="center">.xpl</td>
<td align="right">audio/scpls</td>
</tr>
<tr>
<td>.xsl</td>
<td align="center">text/xml</td>
<td align="center">.xslt</td>
<td align="right">text/xml</td>
</tr>
<tr>
<td>.apk</td>
<td align="center">application/vnd.android.package-archive</td>
<td align="center">.xap</td>
<td align="right">application/x-silverlight-app</td>
</tr>
</tbody></table>

				</div>
				<!-- about -->
				
			</div>
			<!-- pagination -->
			
			<div class="comment-section">
	
	


</div>
		</div>
		
	</div>


        <footer>
             
<a id="gotop" href="#" title="back to top"><i class="mdi-hardware-keyboard-arrow-up"></i></a>

        </footer>
    </div>
    <!-- <script src="/libs/bs/js/bootstrap.min.js"></script> -->
    <!-- <script src="//apps.bdimg.com/libs/bootstrap/3.3.4/js/bootstrap.min.js"></script> -->
    <script>
        var timeEnd = new Date();
        console.log('耗时：' + (timeEnd - timeStart));
        document.addEventListener('DOMContentLoaded', (event) => {
            document.querySelectorAll('pre').forEach((block) => {
                block.classList.add("line-numbers");
            });
        });
    </script>

    <script src="/js/prism.js"></script>
</body>
</html>
