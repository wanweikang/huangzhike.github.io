<!DOCTYPE HTML>
<html>
	<head><meta name="generator" content="Hexo 3.9.0">
		<meta charset="utf-8">
		<script src="/js/highlight.js"></script>
				<script>hljs.initHighlightingOnLoad();var timeStart = new Date();</script>
		
		<title>[笔记]-存储 | 一个放笔记的地方而已</title>
		
		<meta name="author" content="Huangzhike">
		
		
		<meta name="description" content="K.I.S.S">
		
		
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
		
		<meta property="og:title" content="[笔记]-存储">
		
		<meta property="og:site_name" content="一个放笔记的地方而已">
		
		
		<!-- favicon -->
		<link rel="icon" type="image/ico" href="/ok.ico" sizes="32x32">
 


		<meta name="msapplication-TileColor" content="#009688">
		<meta name="msapplication-TileImage" content="/mstile-144x144.ico">
		<meta name="theme-color" content="#009688">

    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Didact+Gothic"> 

		<!-- favicon end -->
		<!-- <link href="//ok.ico" rel="icon"> -->
		
		<!-- toc -->
		<!-- <link rel="stylesheet" href="/libs/tocify/jquery.tocify.css" media="screen" type="text/css"> -->
		<!-- <link rel="stylesheet" href="/libs/bs/css/bootstrap.min.css" media="screen" type="text/css"> -->
		<!--<link rel="stylesheet" href="//apps.bdimg.com/libs/bootstrap/3.3.4/css/bootstrap.min.css" media="screen" type="text/css">-->
		<!-- material design -->
		<!-- <link rel="stylesheet" href="/libs/bs-material/css/ripples.min.css" media="screen" type="text/css"> -->
		<!-- <link rel="stylesheet" href="//apps.bdimg.com/libs/bootstrap-material/0.3.0/css/ripples.min.css" media="screen" type="text/css"> -->
		<!-- <link rel="stylesheet" href="/libs/bs-material/css/material.min.css" media="screen" type="text/css"> -->
		<!--<link rel="stylesheet" href="//apps.bdimg.com/libs/bootstrap-material/0.3.0/css/material.min.css" media="screen" type="text/css"> -->
		<!--<link rel="stylesheet" href="/css/highlight.light.css" media="screen" type="text/css">-->
		<link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
		 
		 
		<!-- <script src="//apps.bdimg.com/libs/jquery/2.0.3/jquery.min.js"></script>-->
		<!-- <script>window.jQuery || document.write('<script src="/libs/jquery-3.1.1.slim.min.js" type="text/javascript"><\/script>')</script>-->
	</head>
</html>
<body>
	<nav class="navbar navbar-default">
	<div class="container">
		<div class="navbar-header">
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
				<span class="sr-only">菜单</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			<a class="navbar-brand" href="/">一个放笔记的地方而已</a>
           
		</div>
		<div id="navbar" class="collapse navbar-collapse">
			<ul class="nav navbar-nav navbar-right">
				
				<li>
					<a href="https://huangzhike.github.io/" title="">
						<i class="fa fa-home"></i>Index
					</a>
				</li>
				
				<li>
					<a href="https://huangzhike.github.io/archives" title="">
						<i class="fa fa-list"></i>Archives
					</a>
				</li>
				
				<li>
					<a href="https://github.com/huangzhike" title="">
						<i class="fa fa-github"></i>GitHub
					</a>
				</li>
				
			</ul>
		</div>
	</div>
</nav>

	<div class="container" >
		<div class="row">
	
		<div class="col-md-9 center-content">
			
			<div class="content">
				<!-- index -->
				
				<h2>[笔记]-存储</h2>
				
				<div>
					<div class="post-time">2016-12-29</div>
				</div>
				
				<div class="article-content">
				<p>来源于网络，整理于2016-12-29</p>
<ul>
<li>cookie<ul>
<li>cookie给保存客户端数据提供了方便，分担了服务器存储的负担</li>
<li>特定域名下生成的cookie数量和大小有限制</li>
<li>cookie的最大约为4096字节，4KB</li>
<li>IE 提供了一种存储可以持久化用户数据，uerData，从IE5.0开始支持</li>
</ul>
</li>
</ul>
<ul>
<li>浏览器本地存储<ul>
<li>HTML5的Web Storage包括了两种存储方式：sessionStorage和localStorage</li>
<li>HTML5，加入了localStorage，用来作为本地存储来使用的，解决了cookie存储空间不足的问题（每条cookie最大为4k），localStorage中一般浏览器支持的是5M，在不同的浏览器中会有所不同。</li>
<li>目前所有的浏览器中都会把localStorage的值类型限定为string类型，对JSON对象类型需要转换</li>
<li>localStorage在浏览器的隐私模式下面是不可读取的</li>
<li>localStorage本质上是对字符串的读取，如果存储内容多的话会消耗内存空间，会导致页面变卡</li>
<li>localStorage不能被爬虫抓取到</li>
<li>sessionStorage用于本地存储一个会话（session）中的数据，只有在同一个会话中的页面才能访问，会话结束后数据也随之销毁</li>
<li>sessionStorage不是持久化的本地存储，是会话级别的存储。</li>
<li>localStorage用于持久化的本地存储，除非主动删除数据，否则永不过期</li>
<li>都会在浏览器端保存，有大小限制，同源限制</li>
<li>web storage（sessionStorage和localStorage）和cookie的区别</li>
<li>cookie是网站为了标示用户身份而储存在用户本地终端（Client Side）上的数据（通常经过加密）</li>
<li>cookie数据始终在同源的http请求中携带（即使不需要），会在浏览器和服务器间来回</li>
<li>cookie的大小是受限的，并且每次请求一个新的页面Cookie都会被发送过去，应该尽量减少cookie数量和大小</li>
<li>Web Storage的和cookie相似，它是为了更大容量存储设计的</li>
<li>sessionStorage和localStorage不会自动把数据发给服务器，仅在本地保存</li>
<li>Web Storage拥有setItem，getItem，removeItem，clear等方法</li>
<li>localStorage和sessionStorage都具有相同的操作方法，如setItem、getItem和removeItem等</li>
<li>cookie需要自己封装setCookie,getCookie</li>
<li>cookie不是很安全，可以分析存放在本地的COOKIE并进行COOKIE欺骗</li>
<li>cookie数据大小不能超过4k</li>
<li>sessionStorage和localStorage 虽然也有大小的限制，但可以达到5M</li>
<li>localStorage：存储持久数据，浏览器关闭后数据不丢失除非主动删除数据</li>
<li>sessionStorage：数据在当前浏览器窗口关闭后自动删除</li>
<li>cookie：设置的cookie过期时间之前一直有效，即使窗口或浏览器关闭</li>
<li>cookie有path概念，子路径可以访问父路径cookie，父路径不能访问子路径cookie</li>
<li>sessionStorage不能共享，localStorage在同源文档之间共享，cookie在同源且符合path规则的文档之间共享</li>
<li>localStorage的修改会促发其他文档窗口的update事件</li>
<li>cookie有secure属性要求HTTPS传输</li>
</ul>
</li>
</ul>
<ul>
<li>浏览器内多个标签页之间的通信：调用localstorge、cookies等本地存储方式</li>
</ul>
<ul>
<li>什么是Cookie 隔离？（请求资源的时候不要让它带cookie怎么做）<ul>
<li>如果静态文件都放在主域名下，那静态文件请求的时候都带有的cookie的数据提交给server的，非常浪费流量，所以不如隔离开。</li>
<li>因为cookie有域的限制，因此不能跨域提交请求，故使用非主要域名的时候，请求头中就不会带有cookie数据，    这样可以降低请求头的大小，降低请求时间，达到降低整体请求延时的目的。</li>
<li>同时这种方式不会将cookie传入Web Server，也减少了Web Server对cookie的处理分析环节，提高了webserver的http请求的解析速度。</li>
</ul>
</li>
</ul>
<ul>
<li>HTML5的离线储存<ul>
<li>在用户没有与因特网连接时，可以正常访问站点或应用，在用户与因特网连接时，更新用户机器上的缓存文件。</li>
<li>原理：HTML5的离线存储是基于一个新建的.appcache文件的缓存机制，通过这个文件上的解析清单离线存储资源，这些资源就会像cookie一样被存储了下来。当网络在处于离线状态下时，浏览器会通过被离线存储的数据进行页面展示。  </li>
<li>如何使用：<ul>
<li>页面头部像下面一样加入一个manifest的属性；</li>
<li>在cache.manifest文件的编写离线存储的资源；</li>
<li>在离线状态时，操作window.applicationCache进行需求实现。</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li>浏览器怎么对HTML5的离线储存资源进行管理和加载<ul>
<li>在线的情况下，浏览器发现html头部有manifest属性，它会请求manifest文件；</li>
<li>如果是第一次访问app，浏览器就会根据manifest文件的内容下载相应的资源并且进行离线存储。</li>
<li>如果已经访问过app并且资源已经离线存储了，浏览器就会使用离线的资源加载页面，浏览器会对比新的manifest文件与旧的manifest文件，如果文件没有发生改变，就不做任何操作，如果文件改变了，就会重新下载文件中的资源并进行离线存储。</li>
<li>离线的情况下，浏览器就直接使用离线存储的资源。</li>
</ul>
</li>
</ul>
<ul>
<li>Cookie/Session机制<ul>
<li>会话（Session）跟踪是Web程序中常用的技术，用来跟踪用户的整个会话。</li>
<li>常用的会话跟踪技术是Cookie与Session。</li>
<li>Cookie通过在客户端记录信息确定用户身份，Session通过在服务器端记录信息确定用户身份。</li>
<li>HTTP协议是无状态的协议。一旦数据交换完毕，客户端与服务器端的连接就会关闭，再次交换数据需要建立新的连接，服务器无法从连接上跟踪会话。</li>
<li>用户A购买了一件商品放入购物车内，当再次购买商品时服务器无法判断该购买行为是属于用户A的会话还是用户B的会话。</li>
<li>要跟踪该会话，引入Cookie，它可以弥补HTTP协议无状态的不足。</li>
<li>Session出现之前，基本上所有的网站都采用Cookie来跟踪会话。</li>
</ul>
</li>
</ul>
<ul>
<li>Cookie实际上是一小段的文本信息。<ul>
<li>客户端请求服务器，如果服务器需要记录该用户状态，就用response向客户端浏览器颁发一个Cookie。</li>
<li>客户端浏览器会把Cookie保存起来，当浏览器再请求该网站时，浏览器把请求的网址连同该Cookie一同提交给服务器。</li>
<li>服务器检查该Cookie，以此来辨认用户状态。服务器还可以根据需要修改Cookie的内容。</li>
</ul>
</li>
</ul>
<ul>
<li>Cookie具有不可跨域名性。<ul>
<li>浏览器访问Google只会携带Google的Cookie，而不会携带Baidu的Cookie。</li>
<li>Google也只能操作Google的Cookie，而不能操作Baidu的Cookie。</li>
<li>虽然网站images.google.com与网站www.google.com同属于Google，但是域名不一样，二者同样不能互相操作彼此的Cookie。</li>
<li>注意：用户登录网站www.google.com之后会发现访问images.google.com时登录信息仍然有效，这是因为Google做了特殊处理。</li>
</ul>
</li>
</ul>
<ul>
<li>Unicode编码：保存中文<ul>
<li>中文与英文字符不同，中文属于Unicode字符，在内存中占4个字符，而英文属于ASCII字符，内存中只占2个字节。</li>
<li>Cookie中使用Unicode字符时需要对Unicode字符进行编码，否则会乱码。</li>
<li>Cookie中保存中文只能编码。一般使用UTF-8编码即可。不推荐使用GBK等中文编码。</li>
</ul>
</li>
</ul>
<ul>
<li>cookie不支持逗号、空格、分号，在设置cookie的时候，需要转码。</li>
</ul>
<ul>
<li>Session<ul>
<li>Session是另一种记录客户状态的机制，不同的是Cookie保存在客户端浏览器中，而Session保存在服务器上。</li>
<li>客户端浏览器访问服务器的时候，服务器把客户端信息以某种形式记录在服务器上。这就是Session。</li>
<li>客户端浏览器再次访问时只需要从该Session中查找该客户的状态就可以了。</li>
</ul>
</li>
</ul>
<ul>
<li>Session机制<ul>
<li>除了使用Cookie，Web应用程序中还经常使用Session来记录客户端状态。</li>
<li>Session是服务器端使用的一种记录客户端状态的机制，相应的也增加了服务器的存储压力。</li>
</ul>
</li>
</ul>
<ul>
<li><a href="http://www.cnblogs.com/st-leslie/p/5720460.html" target="_blank" rel="noopener">http://www.cnblogs.com/st-leslie/p/5720460.html</a></li>
<li><a href="http://www.cnblogs.com/st-leslie/p/5735147.html" target="_blank" rel="noopener">http://www.cnblogs.com/st-leslie/p/5735147.html</a></li>
</ul>
<ul>
<li>cookie 有域和路径。<ul>
<li>域就是domain，为了安全，不同的域之间不能互相访问 cookie 的，当然可以通过特殊设置的达到 cookie 跨域访问。</li>
<li>路径就是routing，一个网页所创建的 cookie 只能被与这个网页在同一目录或子目录下得所有网页访问，而不能被其他目录下的网页访问</li>
</ul>
</li>
</ul>
<ul>
<li>cookie属性<ul>
<li>exprise</li>
<li>path：设置可访问到cookie的路径，默认当前cookie页面的子目录下可以访问到，但是默认无法在其他父目录下访问到这个cookie，假设文件存放在 www.leslieyong.com/cn/dowload/index.html，那么默认dowload目录下才可以访问到cookie，可以设置path属性实现在www.leslieyong.com根目录下面也可以访问：<code>document.cookie = &quot;name=value;expires=date;path=/&quot;</code>，要实现在cn目录下面可以访问：<code>document.cookie = &quot;name=value;expires=date;path=/cn/&quot;</code>，这样可以实现在同域之间的传值。</li>
<li>domain：跨域之间的传值，必须保证这两个域名有公共部分，像www.qq.com和weather.qq.com：<code>document.cookie = &quot;name=value;expires=date;path=/;domain=qq.com&quot;</code></li>
</ul>
</li>
</ul>
<ul>
<li>cookie是由键值对组成的一种存储方式，格式为name=value</li>
</ul>
<ul>
<li><p>创建两个cookie通过重复doucment.cookie属性，每创建一个cookie都要调用doucment.cookie，这样只会创建cookie不会覆盖掉之前的cookie内容，但同名会覆盖：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">document.cookie = &quot;userName=123&quot;;</span><br><span class="line">document.cookie = &quot;userPwd=&quot; + input_pwd;</span><br></pre></td></tr></table></figure>
</li>
<li><p>删除cookie，可以设置过期时间</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// 设置过期时间</span><br><span class="line">document.cookie = &quot;uerName=&quot; + input + &quot;;expires=&quot; + new Date(0);</span><br></pre></td></tr></table></figure>
</li>
<li><p>假设有两个cookie，在删除的时候应该把相应的domian、path附带上：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">document.cookie=&quot;&apos;a&apos;=1;domain=test.com;path=../good/&quot;;</span><br><span class="line">document.cookie=&quot;&apos;a&apos;=1;domain=test.com;path=../test/&quot;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">function setCookie(key, value, expires, path, domain, secure) &#123;</span><br><span class="line">	// 转码</span><br><span class="line">	var cookieText = encodeURIComponent(key) + &apos;=&apos; + encodeURIComponent(value);</span><br><span class="line"></span><br><span class="line">	if (expires instanceof Date) &#123;</span><br><span class="line">		cookieText += &apos;;expires=&apos; + expires;</span><br><span class="line">	&#125;</span><br><span class="line">	if (path) &#123;</span><br><span class="line">		cookieText += &apos;;expires=&apos; + expires;</span><br><span class="line">	&#125;</span><br><span class="line">	if (domain) &#123;</span><br><span class="line">		cookieText += &apos;;domain=&apos; + domain;</span><br><span class="line">	&#125;</span><br><span class="line">	if (secure) &#123;</span><br><span class="line">		cookieText += &apos;;secure&apos;;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	document.cookie = cookieText;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">function getCookie(key) &#123;</span><br><span class="line">	// 没有就return</span><br><span class="line">	if (document.cookie.length === 0) return &quot;&quot;</span><br><span class="line">	// 包括&quot;=&quot;，获取cookie值开始位置</span><br><span class="line">	var name = encodeURIComponent(key) + &apos;=&apos;;</span><br><span class="line">	var start = document.cookie.indexOf(name);</span><br><span class="line"></span><br><span class="line">	if (start &gt; -1) &#123;</span><br><span class="line">		// 第二个参数指定开始索引，得到值的结束位置</span><br><span class="line">		var end = document.cookie.indexOf(&apos;;&apos;, start);</span><br><span class="line">		// 通过&quot;;&quot;号是否存在来判断是否是最后一项</span><br><span class="line">		if (end == -1) &#123;</span><br><span class="line">			end = document.cookie.length;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		var value = decodeURIComponent(document.cookie.substring(start + name.length, end));</span><br><span class="line">	&#125;</span><br><span class="line">	return value;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">function getCookie(key) &#123;</span><br><span class="line">	var list = document.cookie.split(&apos;;&apos;)</span><br><span class="line">	for (var i = 0; i &lt; list.length; i++) &#123;</span><br><span class="line">		var item = list[i].split(&apos;=&apos;)</span><br><span class="line">		if(item[0] == key)&#123;</span><br><span class="line">			return item[1]</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;;</span><br><span class="line">	return &apos;&apos;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>删除全部cookie，通过字符串切割获取如：name=value的字符串，然后对这些字符串后面加上一个过期的时间</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">var s = window.localStorage;</span><br><span class="line">// 设</span><br><span class="line">s[&quot;a&quot;] = 1;</span><br><span class="line">s.a = 1;</span><br><span class="line">s.setItem(&quot;a&quot;, 1);</span><br><span class="line"></span><br><span class="line">console.log(typeof s[&quot;a&quot;]); </span><br><span class="line"></span><br><span class="line">// 读</span><br><span class="line">var a=s.a;</span><br><span class="line">var b=s[&quot;a&quot;];</span><br><span class="line">var c=s.getItem(&quot;a&quot;);</span><br><span class="line"></span><br><span class="line">// 改</span><br><span class="line">s[&quot;a&quot;]=1;</span><br><span class="line">s.b=1;</span><br><span class="line">s.setItem(&quot;c&quot;,3);</span><br><span class="line"></span><br><span class="line">// 清空</span><br><span class="line">s.clear();</span><br><span class="line"></span><br><span class="line">// 某个键值对删除</span><br><span class="line">s.removeItem(&quot;a&quot;);</span><br><span class="line"></span><br><span class="line">// 获取键</span><br><span class="line">for(var i = 0; i &lt; s.length; i++)&#123;</span><br><span class="line">	var key = s.key(i);</span><br><span class="line">	console.log(key);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var data = &#123;</span><br><span class="line">	name: &apos;xiecanyong&apos;,</span><br><span class="line">	sex: &apos;man&apos;,</span><br><span class="line">	hobby: &apos;program&apos;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">var d = JSON.stringify(data);</span><br><span class="line">s.setItem(&quot;data&quot;, d);</span><br><span class="line">console.log(s.data);</span><br><span class="line"></span><br><span class="line">// 将JSON字符串转换成为JSON对象，使用JSON.parse()方法</span><br><span class="line">// 将JSON字符串转换成为JSON对象输出</span><br><span class="line"></span><br><span class="line">var json = s.getItem(&quot;data&quot;);</span><br><span class="line">var jsonObj = JSON.parse(json);</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 方法已封装</span><br><span class="line">window.localStorage ?	localStorage.setItem(&quot;menuTitle&quot;, a) : Cookie.write(&quot;menuTitle&quot;, a);	</span><br><span class="line"></span><br><span class="line">var strStoreDate = window.localStorage ? localStorage.getItem(&quot;menuTitle&quot;) : Cookie.read(&quot;menuTitle&quot;);</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// 计数器</span><br><span class="line">if (localStorage.pagecount) &#123;</span><br><span class="line">	localStorage.pagecount = Number(localStorage.pagecount) + 1;</span><br><span class="line">&#125; else &#123;</span><br><span class="line">	localStorage.pagecount = 1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// sessionStorage缓存</span><br><span class="line">var Cache = &#123;</span><br><span class="line">	set: function(path, value) &#123;</span><br><span class="line">		sessionStorage.setItem(path, JSON.stringify(value));</span><br><span class="line">	&#125;,</span><br><span class="line">	get: function(path) &#123;</span><br><span class="line">		return JSON.parse(sessionStorage.getItem(path));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">(function() &#123;</span><br><span class="line">	var strMenuKey = &quot;memMenuTitle&quot;, </span><br><span class="line">		eleLeftMenuTit = $$(&quot;.&quot; + strMenuKey);</span><br><span class="line">	</span><br><span class="line">	// 存储垂直菜单的展开收起信息</span><br><span class="line">	var funStoreDisplay = function() &#123;</span><br><span class="line">		var arrDisplay = [];</span><br><span class="line">		eleLeftMenuTit.each(function(title, index) &#123;</span><br><span class="line">			arrDisplay[index] = title.retrieve(&quot;display&quot;) === false ? 0 : 1;	</span><br><span class="line">		&#125;);	</span><br><span class="line">		</span><br><span class="line">		// 存储，IE6~7 cookie 其他浏览器HTML5本地存储</span><br><span class="line">		if (window.localStorage) &#123;</span><br><span class="line">			localStorage.setItem(strMenuKey, arrDisplay);	</span><br><span class="line">		&#125; else &#123;</span><br><span class="line">			Cookie.write(strMenuKey, arrDisplay);	</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;;</span><br><span class="line">	</span><br><span class="line">	// 默认存储与事件绑定</span><br><span class="line">	eleLeftMenuTit.store(&quot;display&quot;, true).addEvent(&quot;click&quot;, function() &#123;</span><br><span class="line">		var eleTarget = $(this.getProperty(&quot;data-rel&quot;));</span><br><span class="line">		if (eleTarget) &#123;</span><br><span class="line">			if (this.retrieve(&quot;display&quot;)) &#123;</span><br><span class="line">				eleTarget.setStyles(&#123;</span><br><span class="line">					position: &quot;absolute&quot;,</span><br><span class="line">					left: &quot;-9999em&quot;	</span><br><span class="line">				&#125;);</span><br><span class="line">				this.setProperty(&quot;title&quot;, &quot;展开&quot;).getElement(&quot;.u&quot;).removeClass(&quot;u29&quot;).addClass(&quot;u39&quot;);</span><br><span class="line">				this.store(&quot;display&quot;, false);</span><br><span class="line">			&#125; else &#123;</span><br><span class="line">				eleTarget.setStyle(&quot;position&quot;, &quot;static&quot;);</span><br><span class="line">				this.setProperty(&quot;title&quot;, &quot;收起&quot;).getElement(&quot;.u&quot;).removeClass(&quot;u39&quot;).addClass(&quot;u29&quot;);</span><br><span class="line">				this.store(&quot;display&quot;, true);</span><br><span class="line">			&#125;</span><br><span class="line">			// 存储</span><br><span class="line">			funStoreDisplay();</span><br><span class="line">		&#125;</span><br><span class="line">		return false;</span><br><span class="line">	&#125;);</span><br><span class="line">	</span><br><span class="line">	// 检测触发是否收起</span><br><span class="line">	var strStoreDate = window.localStorage? localStorage.getItem(strMenuKey): Cookie.read(strMenuKey);	</span><br><span class="line">	if (strStoreDate) &#123;</span><br><span class="line">		strStoreDate.split(&quot;,&quot;).each(function(display, index) &#123;</span><br><span class="line">			if (display.toInt() === 0) &#123;</span><br><span class="line">				eleLeftMenuTit[index].fireEvent(&quot;click&quot;);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;);	</span><br><span class="line">	&#125;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>

				</div>
				<!-- about -->
				
			</div>
			<!-- pagination -->
			
			<div class="comment-section">
	
	


</div>
		</div>
		
	</div>


		<footer>
			 
<a id="gotop" href="#" title="back to top"><i class="mdi-hardware-keyboard-arrow-up"></i></a>

		</footer>
	</div>
	<!-- <script src="/libs/bs/js/bootstrap.min.js"></script> -->
	<!-- <script src="//apps.bdimg.com/libs/bootstrap/3.3.4/js/bootstrap.min.js"></script> -->

	<script>var timeEnd = new Date();console.log('耗时：' + (timeEnd - timeStart));</script>
	<!-- <script>(typeof $().modal == 'function')|| document.write('<script src="/libs/bs/js/bootstrap.min.js" type="text/javascript"><\/script>')</script>-->
	<!-- material design -->
	<!-- <script src="/libs/bs-material/js/ripples.min.js"></script> -->
	<!-- <script src="//apps.bdimg.com/libs/bootstrap-material/0.3.0/js/ripples.min.js"></script> -->
	<!-- <script src="/libs/bs-material/js/material.min.js"></script> -->
	<!-- <script src="//apps.bdimg.com/libs/bootstrap-material/0.3.0/js/material.min.js"></script>-->
	<!-- toc -->
	<!-- <script src="/libs/tocify/jquery-ui.min.js"></script> -->
	<!-- <script src="//apps.bdimg.com/libs/jqueryui/1.10.4/jquery-ui.min.js"></script> -->
	<!-- <script src="/libs/tocify/jquery.tocify.custom.js"></script> -->
	<!-- <script src="/js/main.js"></script> -->
</body>
</html>
