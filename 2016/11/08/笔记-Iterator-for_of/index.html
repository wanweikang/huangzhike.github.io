<!DOCTYPE HTML>
<html>
	<head>
		<meta charset="utf-8">
		
		<title>[笔记]-Iterator-for...of | 用手记笔记，更用脑记笔记</title>
		
		<meta name="author" content="Huangzhike">
		
		
		<meta name="description" content="一个放笔记的地方">
		
		
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
		
		<meta property="og:title" content="[笔记]-Iterator-for...of"/>
		
		<meta property="og:site_name" content="用手记笔记，更用脑记笔记"/>
		
		
		<!-- favicon -->
		<link rel="icon" type="image/ico" href="/favicon.ico" sizes="32x32">
		<link rel="manifest" href="/manifest.json">
		<meta name="msapplication-TileColor" content="#009688">
		<meta name="msapplication-TileImage" content="/mstile-144x144.ico">
		<meta name="theme-color" content="#009688">
		<script>var timeStart = new Date();</script>
		<!-- favicon end -->
		<!-- <link href="//favicon.ico" rel="icon"> -->
		
		<!-- toc -->
		<!-- <link rel="stylesheet" href="/libs/tocify/jquery.tocify.css" media="screen" type="text/css"> -->
		<!-- <link rel="stylesheet" href="/libs/bs/css/bootstrap.min.css" media="screen" type="text/css"> -->
		<link rel="stylesheet" href="//apps.bdimg.com/libs/bootstrap/3.3.4/css/bootstrap.min.css" media="screen" type="text/css">
		<!-- material design -->
		<!-- <link rel="stylesheet" href="/libs/bs-material/css/ripples.min.css" media="screen" type="text/css"> -->
		<!-- <link rel="stylesheet" href="//apps.bdimg.com/libs/bootstrap-material/0.3.0/css/ripples.min.css" media="screen" type="text/css"> -->
		<!-- <link rel="stylesheet" href="/libs/bs-material/css/material.min.css" media="screen" type="text/css"> -->
		<!--<link rel="stylesheet" href="//apps.bdimg.com/libs/bootstrap-material/0.3.0/css/material.min.css" media="screen" type="text/css"> -->
		<!--<link rel="stylesheet" href="/css/highlight.light.css" media="screen" type="text/css">-->
		<link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
		
		
		<!-- <script src="//apps.bdimg.com/libs/jquery/2.0.3/jquery.min.js"></script>-->
		<!-- <script>window.jQuery || document.write('<script src="/libs/jquery-3.1.1.slim.min.js" type="text/javascript"><\/script>')</script>-->
	</head>

<body>
	<nav class="navbar navbar-default">
	<div class="container">
		<div class="navbar-header">
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
				<span class="sr-only">菜单</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			<a class="navbar-brand" href="/">用手记笔记，更用脑记笔记</a>
           
		</div>
		<div id="navbar" class="collapse navbar-collapse">
			<ul class="nav navbar-nav navbar-right">
				
				<li>
					<a href="/" title="">
						<i class="fa fa-home"></i>首页
					</a>
				</li>
				
				<li>
					<a href="/archives" title="">
						<i class="fa fa-list"></i>存档
					</a>
				</li>
				
				<li>
					<a href="/resume" title="我的主页">
						<i class="fa fa-github"></i>GitHub
					</a>
				</li>
				
			</ul>
		</div>
	</div>
</nav>

	<div class="container" >
		<div class="row">
	
		<div class="col-md-9 center-content">
			
			<div class="content">
				<!-- index -->
				
				<h2>[笔记]-Iterator-for...of</h2>
				
				<div>
					<span class="post-time">2016-11-08 12:22</span>
				</div>	
				
				<div class="article-content">
				<p><strong>2016-11-20重新整理更新</strong><br>参考：<br><a href="http://es6.ruanyifeng.com/" target="_blank" rel="external">http://es6.ruanyifeng.com/</a><br><a href="http://www.kancloud.cn/kancloud/es6-in-depth" target="_blank" rel="external">http://www.kancloud.cn/kancloud/es6-in-depth</a></p>
<ul>
<li><p>数据结构Set类似数组，但成员值唯一，没有重复值。</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">var s = new Set(); <span class="comment">// 构造函数，生成Set数据结构</span></div><div class="line">[<span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">2</span>, <span class="number">2</span>].map(x =&gt; s.add(x))</div><div class="line">for (i of s) &#123;console.log(i)&#125; <span class="comment">// 2 3 5 4</span></div><div class="line"><span class="comment">// Set接受一个数组为参数</span></div><div class="line">new Set([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>]).size <span class="comment">// 5</span></div></pre></td></tr></table></figure>
</li>
<li><p>对象是键值对的集合（Hash结构），但只能用字符串作键。</p>
</li>
<li>Map数据结构类似对象，也是键值对的集合，但各种类型的值（包括对象）都可以当作键。</li>
<li>Object提供“字符串—值”对应；</li>
<li><p>Map提供“值—值”对应，是更完善的Hash结构实现。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> m = <span class="keyword">new</span> <span class="built_in">Map</span>();</div><div class="line"><span class="keyword">var</span> o = &#123;p: <span class="string">"Hello World"</span>&#125;;</div><div class="line"></div><div class="line">m.<span class="keyword">set</span>(o, <span class="string">"content"</span>) <span class="comment">// 使用set方法，将对象o当作m的一个键</span></div><div class="line">m.<span class="keyword">get</span>(o) <span class="comment">// "content"</span></div><div class="line"></div><div class="line">m.delete(o) <span class="comment">// true</span></div><div class="line">m.has(o) <span class="comment">// false</span></div></pre></td></tr></table></figure>
</li>
<li><p>Map作为构造函数接受一个数组为参数。</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">var <span class="built_in">map</span> = <span class="keyword">new</span> Map([ [<span class="string">"name"</span>, <span class="string">"张三"</span>], [<span class="string">"title"</span>, <span class="string">"Author"</span>]]);</div><div class="line"><span class="built_in">map</span>.<span class="built_in">size</span> <span class="comment">// 2</span></div><div class="line"><span class="built_in">map</span>.has(<span class="string">"name"</span>) <span class="comment">// true</span></div><div class="line"><span class="built_in">map</span>.<span class="built_in">get</span>(<span class="string">"name"</span>) <span class="comment">// "张三"</span></div><div class="line"><span class="built_in">map</span>.has(<span class="string">"title"</span>) <span class="comment">// true</span></div><div class="line"><span class="built_in">map</span>.<span class="built_in">get</span>(<span class="string">"title"</span>) <span class="comment">// "Author"</span></div></pre></td></tr></table></figure>
</li>
<li><p>对同一个键多次赋值，后面覆盖前面</p>
</li>
<li>读取未知的键，返回undefined</li>
<li><p>只有对同一个对象的引用，Map才是同一个键</p>
<figure class="highlight processing"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">var <span class="built_in">map</span> = <span class="keyword">new</span> Map();</div><div class="line"></div><div class="line"><span class="built_in">map</span>.<span class="built_in">set</span>([<span class="string">'a'</span>], <span class="number">555</span>);</div><div class="line"><span class="built_in">map</span>.<span class="built_in">get</span>([<span class="string">'a'</span>]) <span class="comment">// undefined</span></div><div class="line"><span class="comment">// 表面是对同一个键，实际上是两个值，内存地址不一样</span></div></pre></td></tr></table></figure>
</li>
<li><p>Map的键跟内存地址绑定，只要内存地址不一样，就视为两个键。</p>
</li>
<li>如果Map的键是简单类型的值（数字、字符串、布尔值），只要两个值严格相等，视为一个键，包括0和-0。</li>
<li><p>虽然NaN不严格相等于自身，Map将其视为同一个键。</p>
<figure class="highlight lasso"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> <span class="built_in">map</span> = <span class="literal">new</span> <span class="built_in">Map</span>();</div><div class="line"></div><div class="line"><span class="built_in">map</span>.<span class="built_in">set</span>(<span class="number">NaN</span>, <span class="number">123</span>);</div><div class="line"><span class="built_in">map</span>.get(<span class="number">NaN</span>) <span class="comment">// 123</span></div><div class="line"></div><div class="line"><span class="built_in">map</span>.<span class="built_in">set</span>(<span class="number">-0</span>, <span class="number">123</span>);</div><div class="line"><span class="built_in">map</span>.get(+<span class="number">0</span>) <span class="comment">// 123</span></div></pre></td></tr></table></figure>
</li>
<li><p>JavaScript原有“集合”的数据结构，主要是数组和对象，ES6添加了Map和Set。</p>
</li>
<li>遍历器（Iterator）是一种接口，为不同的数据结构提供统一的访问机制。</li>
<li>任何数据结构只要部署Iterator接口，就可以完成遍历操作，依次处理该数据结构的所有成员。</li>
<li>Iterator接口主要供for…of使用。</li>
<li><p>Iterator的遍历过程：</p>
<ul>
<li>创建一个指针，指向当前数据结构的起始。遍历器的返回值是指针对象，包含value和done属性。</li>
<li>其中，value属性是当前成员的值，done属性是布尔值，表示遍历是否结束。</li>
<li>第一次调用指针对象的next方法，指针指向数据结构的第一个成员。</li>
<li>第二次调用指针对象的next方法，指针指向数据结构的第二个成员。</li>
<li>调用指针对象的next方法，直到指向数据结构的结束。<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">// 模拟<span class="built_in">next</span>方法返回值</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">makeIterator</span><span class="params">(array)</span></span> &#123;</div><div class="line">	let nextIndex = <span class="number">0</span>;</div><div class="line">	<span class="keyword">return</span> &#123;</div><div class="line">		<span class="built_in">next</span>: <span class="function"><span class="keyword">function</span><span class="params">()</span></span> &#123;</div><div class="line">			<span class="keyword">return</span> nextIndex &lt; array.length ?</div><div class="line">				&#123;value: array[nextIndex++], done: <span class="keyword">false</span>&#125; :</div><div class="line">				&#123;value: undefined, done: <span class="keyword">true</span>&#125;;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">var it = makeIterator([<span class="string">'a'</span>, <span class="string">'b'</span>]);</div><div class="line">// 闭包</div><div class="line">it.<span class="built_in">next</span>() // &#123; value: <span class="string">"a"</span>, done: <span class="keyword">false</span> &#125;</div><div class="line">it.<span class="built_in">next</span>() // &#123; value: <span class="string">"b"</span>, done: <span class="keyword">false</span> &#125;</div><div class="line">it.<span class="built_in">next</span>() // &#123; value: undefined, done: <span class="keyword">true</span> &#125;</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>有些数据结构，如数组，原生部署System.iterator属性，被for…of循环遍历，有些不行，如对象。</p>
</li>
<li>调用这个接口，返回一个指针对象。</li>
<li><p>原生具备Iterator接口：数组、某些类数组对象、Set和Map结构。</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="regexp">//</span> arr是数组，原生具有遍历器接口，在arr的Symbol.iterator属性上</div><div class="line">let arr = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>];</div><div class="line">let iter = arr[Symbol.iterator]();</div><div class="line"><span class="regexp">//</span> 调用这个属性得到遍历器</div><div class="line">iter.<span class="keyword">next</span>() <span class="regexp">//</span> &#123; value: <span class="string">'a'</span>, done: false &#125;</div><div class="line">iter.<span class="keyword">next</span>() <span class="regexp">//</span> &#123; value: <span class="string">'b'</span>, done: false &#125;</div><div class="line">iter.<span class="keyword">next</span>() <span class="regexp">//</span> &#123; value: <span class="string">'c'</span>, done: false &#125;</div><div class="line">iter.<span class="keyword">next</span>() <span class="regexp">//</span> &#123; value: undefined, done: true &#125;</div></pre></td></tr></table></figure>
</li>
<li><p>对象属性遍历顺序是不确定的，没有默认部署Iterator接口。</p>
</li>
<li>遍历器是线性处理，对于非线性的数据结构，部署遍历器接口，等于部署线性转换。</li>
<li><p>对象要有被for…of调用的Iterator接口，必须在Symbol.iterator的属性上部署遍历器方法，原型链上也行。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 部署Iterator接口，Symbol.iterator属性对应一个函数，执行后返回当前对象的遍历器</span></div><div class="line"><span class="keyword">class</span> <span class="title">RangeIterator</span> &#123;</div><div class="line">	constructor(start, stop) &#123;</div><div class="line">		<span class="keyword">this</span>.<span class="keyword">value</span> = start;</div><div class="line">		<span class="keyword">this</span>.stop = stop;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	[Symbol.iterator]() &#123;<span class="keyword">return</span> <span class="keyword">this</span>;&#125;</div><div class="line"></div><div class="line">	next() &#123;</div><div class="line">		<span class="keyword">let</span> <span class="keyword">value</span> = <span class="keyword">this</span>.<span class="keyword">value</span>;</div><div class="line">		<span class="keyword">if</span> (<span class="keyword">value</span> &lt; <span class="keyword">this</span>.stop) &#123;</div><div class="line">			<span class="keyword">this</span>.<span class="keyword">value</span>++;</div><div class="line">			<span class="keyword">return</span> &#123;done: <span class="literal">false</span>, <span class="keyword">value</span>: <span class="keyword">value</span>&#125;;</div><div class="line">		&#125; <span class="keyword">else</span> &#123;</div><div class="line">			<span class="keyword">return</span> &#123;done: <span class="literal">true</span>, <span class="keyword">value</span>: undefined&#125;;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function">function <span class="title">range</span>(<span class="params">start, stop</span>) </span>&#123;</div><div class="line">	<span class="keyword">return</span> <span class="keyword">new</span> RangeIterator(start, stop);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">for</span> (<span class="function"><span class="keyword">let</span> <span class="keyword">value</span> of <span class="title">range</span>(<span class="params"><span class="number">0</span>, <span class="number">3</span></span>)) </span>&#123;</div><div class="line">	console.log(<span class="keyword">value</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 通过遍历器实现指针结构</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Obj</span>(<span class="params">value</span>) </span>&#123;</div><div class="line">	<span class="keyword">this</span>.value = value;</div><div class="line">	<span class="keyword">this</span>.next = <span class="literal">null</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 在构造函数的原型链上部署Symbol.iterator方法，调用该方法会返回遍历器对象iterator</span></div><div class="line">Obj.prototype[<span class="built_in">Symbol</span>.iterator] = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">	<span class="comment">// 调用该对象的next方法，返回值的同时，自动将内部指针移到下一个实例</span></div><div class="line">	<span class="keyword">var</span> iterator = &#123;</div><div class="line">		<span class="attr">next</span>: next</div><div class="line">	&#125;;</div><div class="line"></div><div class="line">	<span class="keyword">var</span> current = <span class="keyword">this</span>;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">next</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="keyword">if</span> (current)&#123;</div><div class="line">			<span class="keyword">var</span> value = current.value;</div><div class="line">			<span class="keyword">var</span> done = current == <span class="literal">null</span>;</div><div class="line">			current = current.next;</div><div class="line">			<span class="keyword">return</span> &#123;</div><div class="line">				<span class="attr">done</span>: done,</div><div class="line">				<span class="attr">value</span>: value</div><div class="line">			&#125;</div><div class="line">		&#125; <span class="keyword">else</span> &#123;</div><div class="line">			<span class="keyword">return</span> &#123;</div><div class="line">				<span class="attr">done</span>: <span class="literal">true</span></div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> iterator;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> one = <span class="keyword">new</span> Obj(<span class="number">1</span>);</div><div class="line"><span class="keyword">var</span> two = <span class="keyword">new</span> Obj(<span class="number">2</span>);</div><div class="line"><span class="keyword">var</span> three = <span class="keyword">new</span> Obj(<span class="number">3</span>);</div><div class="line"></div><div class="line">one.next = two;</div><div class="line">two.next = three;</div><div class="line"></div><div class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">of</span> one)&#123;</div><div class="line">	<span class="built_in">console</span>.log(i)</div><div class="line">&#125;</div><div class="line"><span class="comment">// 1</span></div><div class="line"><span class="comment">// 2</span></div><div class="line"><span class="comment">// 3</span></div></pre></td></tr></table></figure>
</li>
<li><p>另一个为对象添加Iterator接口的例子</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">let obj = &#123;</div><div class="line">	<span class="keyword">data</span>: [ <span class="string">'hello'</span>, <span class="string">'world'</span> ],</div><div class="line">	[Symbol.iterator]() &#123;</div><div class="line">		const self = <span class="keyword">this</span>;</div><div class="line">		let index = <span class="number">0</span>;</div><div class="line">		<span class="keyword">return</span> &#123;</div><div class="line">			next() &#123;</div><div class="line">				<span class="keyword">if</span> (index &lt; self.<span class="keyword">data</span>.length) &#123;</div><div class="line">					<span class="keyword">return</span> &#123;</div><div class="line">						value: self.<span class="keyword">data</span>[index++],</div><div class="line">						done: <span class="literal">false</span></div><div class="line">					&#125;;</div><div class="line">				&#125; <span class="keyword">else</span> &#123;</div><div class="line">					<span class="keyword">return</span> &#123; value: undefined, done: <span class="literal">true</span> &#125;;</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">		&#125;;</div><div class="line">	&#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
</li>
<li><p>对于类数组对象（存在数值键名和length属性），部署Iterator接口简便方法：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">NodeList.prototype[<span class="built_in">Symbol</span>.iterator] = <span class="built_in">Array</span>.prototype[<span class="built_in">Symbol</span>.iterator];</div></pre></td></tr></table></figure>
</li>
<li><p>如果Symbol.iterator方法返回的不是遍历器，解释引擎将会报错。</p>
</li>
<li><p>有了遍历器接口，数据结构就可以用for…of循环遍历，也可以使用while循环遍历。</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">var <span class="variable">$iterator</span> = ITERABLE[Symbol.iterator]();</div><div class="line">var <span class="variable">$result</span> = <span class="variable">$iterator</span>.<span class="keyword">next</span>();</div><div class="line"><span class="regexp">//</span> ITERABLE代表可遍历的数据结构，<span class="variable">$iterator</span>是它的遍历器</div><div class="line"><span class="keyword">while</span> (!<span class="variable">$result</span>.done) &#123;</div><div class="line">	var x = <span class="variable">$result</span>.value;</div><div class="line">	<span class="regexp">//</span> ...</div><div class="line">	<span class="variable">$result</span> = <span class="variable">$iterator</span>.<span class="keyword">next</span>();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>一些场合会默认调用iterator接口（即Symbol.iterator方法），除了for…of循环，还有几个别的场合。</p>
<ul>
<li><p>解构赋值：对数组和Set结构进行解构赋值时，会默认调用iterator接口。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> <span class="keyword">set</span> = <span class="keyword">new</span> Set().<span class="keyword">add</span>(<span class="string">'a'</span>).<span class="keyword">add</span>(<span class="string">'b'</span>).<span class="keyword">add</span>(<span class="string">'c'</span>);</div><div class="line"><span class="keyword">let</span> [x,y] = <span class="keyword">set</span>; <span class="comment">// x='a'; y='b'</span></div><div class="line"><span class="keyword">let</span> [first, ...rest] = <span class="keyword">set</span>; <span class="comment">// first='a'; rest=['b','c'];</span></div></pre></td></tr></table></figure>
</li>
<li><p>扩展运算符：扩展运算符（…）也会调用默认的iterator接口。</p>
</li>
<li><p>只要数据结构部署了iterator接口，可以使用扩展运算符，转为数组<code>let arr = [...iterable];</code></p>
<figure class="highlight prolog"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">var str = <span class="string">'hello'</span>;</div><div class="line">[...str] // [<span class="string">'h'</span>, <span class="string">'e'</span>, <span class="string">'l'</span>, <span class="string">'l'</span>, <span class="string">'o'</span>]</div><div class="line"></div><div class="line">let arr = [<span class="string">'b'</span>, <span class="string">'c'</span>];</div><div class="line">[<span class="string">'a'</span>, ...arr, <span class="string">'d'</span>] // [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>]</div></pre></td></tr></table></figure>
</li>
<li><p>其他</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">yield</span>*</div><div class="line"><span class="built_in">Array</span>.from()</div><div class="line"><span class="built_in">Map</span>(), <span class="built_in">Set</span>(), <span class="built_in">WeakMap</span>(), <span class="built_in">WeakSet</span>()</div><div class="line"><span class="built_in">Promise</span>.all(), <span class="built_in">Promise</span>.race()</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>ES6对数组提供entries()、keys()和values()三个方法，就是返回三个遍历器。</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">var arr = [1, 5, 7];</div><div class="line">var arrEntries = arr.entries();</div><div class="line">arrEntries.toString() // "[object Array Iterator]"</div><div class="line">arrEntries === arrEntries[<span class="string">Symbol.iterator</span>](<span class="link"></span>) // true</div><div class="line">// entries方法返回遍历器（iterator），本质上调用了Symbol.iterator方法</div></pre></td></tr></table></figure>
</li>
<li><p>字符串是类数组对象，也原生具有Iterator接口。</p>
<figure class="highlight nimrod"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> someString = <span class="string">"hi"</span>;</div><div class="line">typeof someString[<span class="type">Symbol</span>.<span class="keyword">iterator</span>] // <span class="string">"function"</span></div><div class="line"><span class="keyword">var</span> <span class="keyword">iterator</span> = someString[<span class="type">Symbol</span>.<span class="keyword">iterator</span>]();</div><div class="line"><span class="keyword">iterator</span>.next()  // &#123; value: <span class="string">"h"</span>, done: <span class="literal">false</span> &#125;</div><div class="line"><span class="keyword">iterator</span>.next()  // &#123; value: <span class="string">"i"</span>, done: <span class="literal">false</span> &#125;</div><div class="line"><span class="keyword">iterator</span>.next()  // &#123; value: undefined, done: <span class="literal">true</span> &#125;</div><div class="line">// 调用<span class="type">Symbol</span>.<span class="keyword">iterator</span>方法返回一个遍历器，在这个遍历器上可以调用next方法，实现对于字符串的遍历。</div></pre></td></tr></table></figure>
</li>
<li><p>可以覆盖原生的Symbol.iterator方法，修改遍历器行为：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> str = <span class="keyword">new</span> <span class="built_in">String</span>(<span class="string">"hi"</span>);</div><div class="line">[...str] <span class="comment">// ["h", "i"]</span></div><div class="line"></div><div class="line">str[<span class="built_in">Symbol</span>.iterator] = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">	<span class="keyword">return</span> &#123;</div><div class="line">		<span class="attr">next</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">			<span class="keyword">if</span> (<span class="keyword">this</span>._first) &#123;</div><div class="line">				<span class="keyword">this</span>._first = <span class="literal">false</span>;</div><div class="line">				<span class="keyword">return</span> &#123;<span class="attr">value</span>: <span class="string">"bye"</span>, <span class="attr">done</span>: <span class="literal">false</span>&#125;;</div><div class="line">			&#125; <span class="keyword">else</span> &#123;</div><div class="line">				<span class="keyword">return</span> &#123;<span class="attr">done</span>: <span class="literal">true</span>&#125;;</div><div class="line">			&#125;</div><div class="line">		&#125;,</div><div class="line">		<span class="attr">_first</span>: <span class="literal">true</span></div><div class="line">	&#125;;</div><div class="line">&#125;;</div><div class="line"><span class="comment">// 字符串str的Symbol.iterator方法被修改了</span></div><div class="line">[...str] <span class="comment">// ["bye"]</span></div><div class="line">str <span class="comment">// "hi"</span></div></pre></td></tr></table></figure>
</li>
<li><p>Symbol.iterator方法的最简单实现，用Generator函数：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> myIterable = &#123;&#125;;</div><div class="line"></div><div class="line">myIterable[<span class="built_in">Symbol</span>.iterator] = <span class="function"><span class="keyword">function</span>* (<span class="params"></span>) </span>&#123;</div><div class="line">	<span class="keyword">yield</span> <span class="number">1</span>;</div><div class="line">	<span class="keyword">yield</span> <span class="number">2</span>;</div><div class="line">	<span class="keyword">yield</span> <span class="number">3</span>;</div><div class="line">&#125;;</div><div class="line">[...myIterable] <span class="comment">// [1, 2, 3]</span></div><div class="line"></div><div class="line"><span class="comment">// 简洁写法</span></div><div class="line"><span class="keyword">let</span> obj = &#123;</div><div class="line">	* [<span class="built_in">Symbol</span>.iterator]() &#123;</div><div class="line">		<span class="keyword">yield</span> <span class="string">'hello'</span>;</div><div class="line">		<span class="keyword">yield</span> <span class="string">'world'</span>;</div><div class="line">	&#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">for</span> (<span class="keyword">let</span> x <span class="keyword">of</span> obj) &#123;</div><div class="line">	<span class="built_in">console</span>.log(x);</div><div class="line">&#125;</div><div class="line"><span class="comment">// hello</span></div><div class="line"><span class="comment">// world</span></div><div class="line"><span class="comment">// Symbol.iterator几乎不用部署代码，用yield命令给出每一步返回值</span></div></pre></td></tr></table></figure>
</li>
<li><p>遍历器返回的指针对象除了next方法，还可以有return和throw方法。</p>
</li>
<li>next方法是必须的，return和throw方法是可选的。</li>
<li>如果for…of循环提前退出（因为出错，break或continue语句），就会调用return方法。</li>
<li>如果一个对象在完成遍历前，需要清理或释放资源，可以部署return方法。</li>
<li><p>throw方法主要配合Generator函数使用。</p>
</li>
<li><p>for…of循环使用范围包括数组、Set和Map结构、某些类数组对象（比如arguments对象、DOM NodeList对象）、Generator对象，以及字符串。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 数组原生具备iterator接口，for...of循环调用这个接口产生的遍历器，证明：</span></div><div class="line"><span class="keyword">const</span> arr = [<span class="string">'red'</span>, <span class="string">'green'</span>, <span class="string">'blue'</span>];</div><div class="line"><span class="keyword">let</span> iterator = arr[<span class="built_in">Symbol</span>.iterator]();</div><div class="line"></div><div class="line"><span class="keyword">for</span>(<span class="keyword">let</span> v <span class="keyword">of</span> arr) &#123;</div><div class="line">	<span class="built_in">console</span>.log(v); <span class="comment">// red green blue</span></div><div class="line">&#125;</div><div class="line"><span class="comment">// 等价</span></div><div class="line"><span class="keyword">for</span>(<span class="keyword">let</span> v <span class="keyword">of</span> iterator) &#123;</div><div class="line">	<span class="built_in">console</span>.log(v); <span class="comment">// red green blue</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>for…of循环可代替数组实例的forEach方法</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> arr = [<span class="string">'red'</span>, <span class="string">'green'</span>, <span class="string">'blue'</span>];</div><div class="line"></div><div class="line">arr.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">element, index</span>) </span>&#123;</div><div class="line">	<span class="built_in">console</span>.log(element); <span class="comment">// red green blue</span></div><div class="line">	<span class="built_in">console</span>.log(index); <span class="comment">// 0 1 2</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure>
</li>
<li><p>for…in循环，只能获得对象的键名，不能直接获取键值。for…of循环，允许遍历获得键值。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> arr = [<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>, <span class="string">"d"</span>];</div><div class="line"><span class="comment">// for...in循环读取键名</span></div><div class="line"><span class="keyword">for</span> (a <span class="keyword">in</span> arr) &#123;</div><div class="line">	<span class="built_in">console</span>.log(a); <span class="comment">// 0 1 2 3</span></div><div class="line">&#125;</div><div class="line"><span class="comment">// for...of循环读取键值</span></div><div class="line"><span class="keyword">for</span> (a <span class="keyword">of</span> arr) &#123;</div><div class="line">	<span class="built_in">console</span>.log(a); <span class="comment">// a b c d</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>Set和Map结构也原生具有Iterator接口，可直接使用for…of循环；</p>
</li>
<li>遍历顺序是各个成员被添加进数据结构的顺序；</li>
<li>Set结构遍历时，返回一个值；</li>
<li><p>Map结构遍历时，返回一个数组，两个成员分别为当前的键名和键值。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> engines = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="string">"Gecko"</span>, <span class="string">"Trident"</span>, <span class="string">"Webkit"</span>, <span class="string">"Webkit"</span>]);</div><div class="line"><span class="keyword">for</span> (<span class="keyword">var</span> e <span class="keyword">of</span> engines) &#123;</div><div class="line">	<span class="built_in">console</span>.log(e);</div><div class="line">&#125;</div><div class="line"><span class="comment">// Gecko</span></div><div class="line"><span class="comment">// Trident</span></div><div class="line"><span class="comment">// Webkit</span></div><div class="line"></div><div class="line"><span class="keyword">let</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>().set(<span class="string">'a'</span>, <span class="number">1</span>).set(<span class="string">'b'</span>, <span class="number">2</span>);</div><div class="line"><span class="keyword">for</span> (<span class="keyword">let</span> pair <span class="keyword">of</span> map) &#123;</div><div class="line">	<span class="built_in">console</span>.log(pair);</div><div class="line">&#125;</div><div class="line"><span class="comment">// ['a', 1]</span></div><div class="line"><span class="comment">// ['b', 2]</span></div><div class="line"></div><div class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [key, value] <span class="keyword">of</span> map) &#123;</div><div class="line">	<span class="built_in">console</span>.log(key + <span class="string">' : '</span> + value);</div><div class="line">&#125;</div><div class="line"><span class="comment">// a : 1</span></div><div class="line"><span class="comment">// b : 2</span></div></pre></td></tr></table></figure>
</li>
<li><p>ES6的Array、Set、Map都部署了以下三个方法，调用后都返回遍历器。</p>
<ul>
<li>entries() 返回一个遍历器，用来遍历 [键名, 键值] 组成的数组。<ul>
<li>对于数组，键名就是索引值；对于Set，键名与键值相同。Map的iterator接口，默认调用entries。</li>
</ul>
</li>
<li>keys() 返回一个遍历器，用来遍历所有的键名。</li>
<li>values() 返回一个遍历器，用来遍历所有的键值。<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> arr = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>];</div><div class="line"><span class="keyword">for</span> (<span class="keyword">let</span> pair <span class="keyword">of</span> arr.entries()) &#123;</div><div class="line">	<span class="built_in">console</span>.log(pair);</div><div class="line">&#125;</div><div class="line"><span class="comment">// [0, 'a']</span></div><div class="line"><span class="comment">// [1, 'b']</span></div><div class="line"><span class="comment">// [2, 'c']</span></div></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>类数组对象包括字符串、DOM NodeList对象、arguments对象等。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 字符串</span></div><div class="line"><span class="keyword">let</span> str = <span class="string">"hello"</span>;</div><div class="line"></div><div class="line"><span class="keyword">for</span> (<span class="keyword">let</span> s <span class="keyword">of</span> str) &#123;</div><div class="line">	<span class="built_in">console</span>.log(s); <span class="comment">// h e l l o</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// DOM NodeList对象</span></div><div class="line"><span class="keyword">let</span> paras = <span class="built_in">document</span>.querySelectorAll(<span class="string">"p"</span>);</div><div class="line"></div><div class="line"><span class="keyword">for</span> (<span class="keyword">let</span> p <span class="keyword">of</span> paras) &#123;</div><div class="line">	p.classList.add(<span class="string">"test"</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// arguments对象</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">printArgs</span>(<span class="params"></span>) </span>&#123;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">let</span> x <span class="keyword">of</span> <span class="built_in">arguments</span>) &#123;</div><div class="line">		<span class="built_in">console</span>.log(x);</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line">printArgs(<span class="string">'a'</span>, <span class="string">'b'</span>);</div><div class="line"><span class="comment">// 'a'</span></div><div class="line"><span class="comment">// 'b'</span></div></pre></td></tr></table></figure>
</li>
<li><p>不是所有类数组对象都有iterator接口，使用Array.from方法将其转为数组。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> arrayLike = &#123; <span class="attr">length</span>: <span class="number">2</span>, <span class="number">0</span>: <span class="string">'a'</span>, <span class="number">1</span>: <span class="string">'b'</span> &#125;;</div><div class="line"><span class="comment">// 报错</span></div><div class="line"><span class="keyword">for</span> (<span class="keyword">let</span> x <span class="keyword">of</span> arrayLike) &#123;</div><div class="line">	<span class="built_in">console</span>.log(x);</div><div class="line">&#125;</div><div class="line"><span class="comment">// 正确</span></div><div class="line"><span class="keyword">for</span> (<span class="keyword">let</span> x <span class="keyword">of</span> <span class="built_in">Array</span>.from(arrayLike)) &#123;</div><div class="line">	<span class="built_in">console</span>.log(x);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>普通对象必须部署了iterator接口后才能用for…of，for…in循环依然可以遍历键名。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> es6 = &#123;</div><div class="line">	<span class="attr">edition</span>: <span class="number">6</span>,</div><div class="line">	<span class="attr">committee</span>: <span class="string">"TC39"</span>,</div><div class="line">	<span class="attr">standard</span>: <span class="string">"ECMA-262"</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">for</span> (e <span class="keyword">in</span> es6) &#123;</div><div class="line">	<span class="built_in">console</span>.log(e);</div><div class="line">&#125;</div><div class="line"><span class="comment">// edition</span></div><div class="line"><span class="comment">// committee</span></div><div class="line"><span class="comment">// standard</span></div><div class="line"></div><div class="line"><span class="keyword">for</span> (e <span class="keyword">of</span> es6) &#123;</div><div class="line">	<span class="built_in">console</span>.log(e);</div><div class="line">&#125;</div><div class="line"><span class="comment">// TypeError: es6 is not iterable</span></div></pre></td></tr></table></figure>
</li>
<li><p>一种解决方法是，用Object.keys方法将对象的键名生成一个数组，然后遍历这个数组</p>
<figure class="highlight maxima"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> (<span class="built_in">var</span> <span class="built_in">key</span> of Object.keys(someObject)) &#123;</div><div class="line">	console.<span class="built_in">log</span>(<span class="built_in">key</span> + <span class="string">": "</span> + someObject[<span class="built_in">key</span>]);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>在对象上部署iterator接口的代码，一个方法是将数组的Symbol.iterator属性，直接赋值给其他对象的Symbol.iterator属性</p>
</li>
<li><p>如，让for…of循环遍历jQuery对象：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">jQuery.prototype[<span class="built_in">Symbol</span>.iterator] = <span class="built_in">Array</span>.prototype[<span class="built_in">Symbol</span>.iterator];</div></pre></td></tr></table></figure>
</li>
<li><p>另一个方法是用Generator函数将对象重新包装</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span>* <span class="title">entries</span>(<span class="params">obj</span>) </span>&#123;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">of</span> <span class="built_in">Object</span>.keys(obj)) &#123;</div><div class="line">		<span class="keyword">yield</span> [key, obj[key]];</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [key, value] <span class="keyword">of</span> entries(obj)) &#123;</div><div class="line">	<span class="built_in">console</span>.log(key, <span class="string">"-&gt;"</span>, value);</div><div class="line">&#125;</div><div class="line"><span class="comment">// a -&gt; 1</span></div><div class="line"><span class="comment">// b -&gt; 2</span></div><div class="line"><span class="comment">// c -&gt; 3</span></div></pre></td></tr></table></figure>
</li>
<li><p>以数组为例，JavaScript提供多种遍历。</p>
</li>
<li><p>for循环</p>
<figure class="highlight glsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> (var <span class="keyword">index</span> = <span class="number">0</span>; <span class="keyword">index</span> &lt; myArray.<span class="built_in">length</span>; <span class="keyword">index</span>++) &#123;</div><div class="line">	console.<span class="built_in">log</span>(myArray[<span class="keyword">index</span>]);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>forEach方法</p>
<figure class="highlight fortran"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">myArray.forEach(<span class="function"><span class="keyword">function</span></span> (<span class="keyword">value</span>) &#123;</div><div class="line">	console.<span class="built_in">log</span>(<span class="keyword">value</span>);</div><div class="line">&#125;);</div><div class="line">// 无法中途跳出forEach循环，break或<span class="keyword">return</span>都不能</div></pre></td></tr></table></figure>
</li>
<li><p>for…in循环遍历数组键名</p>
<figure class="highlight glsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> (var <span class="keyword">index</span> <span class="keyword">in</span> myArray) &#123;</div><div class="line">	console.<span class="built_in">log</span>(myArray[<span class="keyword">index</span>]);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>for…in主要遍历对象，不适用于遍历数组</p>
<ul>
<li>1）数组的键名是数字，但for…in以字符串为键名“0”、“1”等</li>
<li>2）for…in不仅遍历数字键名，还会遍历手动添加的其他键，甚至包括原型链上的键</li>
<li>3）某些情况下，for…in循环以任意顺序遍历键名</li>
</ul>
</li>
<li><p>for…of可以与break、continue和return配合使用</p>
<figure class="highlight ceylon"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> (<span class="keyword">let</span> <span class="keyword">value</span> <span class="keyword">of</span> myArray) &#123;</div><div class="line">	console.log(<span class="keyword">value</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>输出斐波纳契数列小于等于1000的项。如果当前项大于1000，break跳出for…of循环</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> (<span class="keyword">var</span> n <span class="keyword">of</span> fibonacci) &#123;</div><div class="line">	<span class="keyword">if</span> (n &gt; <span class="number">1000</span>)</div><div class="line">		<span class="keyword">break</span>;</div><div class="line">	<span class="built_in">console</span>.log(n);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>

				</div>
				<!-- about -->
				
			</div>
			<!-- pagination -->
			
			<div class="comment-section">
	
	


</div>
		</div>
		
	</div>


		<footer>
			
<p>Powered by <a href="https://hexo.io">Hexo</a> with <a href="https://github.com/wayou/hexo-theme-material">Material</a> theme modified by <b> Huangzhike </b></p>
<p>&copy; 2016 <a href="https://huangzhike.github.io"><b> Huangzhike </b></a></p>
<a id="gotop" href="#" title="back to top"><i class="mdi-hardware-keyboard-arrow-up"></i></a>

		</footer>
	</div>
	<!-- <script src="/libs/bs/js/bootstrap.min.js"></script> -->
	<!-- <script src="//apps.bdimg.com/libs/bootstrap/3.3.4/js/bootstrap.min.js"></script> -->
	<script src="/js/highlight.js"></script> 
	<script>hljs.initHighlightingOnLoad();var timeEnd = new Date();console.log('耗时：' + (timeEnd - timeStart));</script>
	<!-- <script>(typeof $().modal == 'function')|| document.write('<script src="/libs/bs/js/bootstrap.min.js" type="text/javascript"><\/script>')</script>-->
	<!-- material design -->
	<!-- <script src="/libs/bs-material/js/ripples.min.js"></script> -->
	<!-- <script src="//apps.bdimg.com/libs/bootstrap-material/0.3.0/js/ripples.min.js"></script> -->
	<!-- <script src="/libs/bs-material/js/material.min.js"></script> -->
	<!-- <script src="//apps.bdimg.com/libs/bootstrap-material/0.3.0/js/material.min.js"></script>-->
	<!-- toc -->
	<!-- <script src="/libs/tocify/jquery-ui.min.js"></script> -->
	<!-- <script src="//apps.bdimg.com/libs/jqueryui/1.10.4/jquery-ui.min.js"></script> -->
	<!-- <script src="/libs/tocify/jquery.tocify.custom.js"></script> -->
	<!-- <script src="/js/main.js"></script> -->
</body>
</html>
